var app=function(){"use strict";var _documentCurrentScript="undefined"!=typeof document?document.currentScript:null;function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function component_subscribe(e,t,r){e.$$.on_destroy.push(subscribe(t,r))}function set_store_value(e,t,r){return e.set(r),t}function append(e,t){e.appendChild(t)}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function attr(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function to_number(e){return""===e?null:+e}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function set_style(e,t,r,n){null==r?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function select_option(e,t,r){for(let r=0;r<e.options.length;r+=1){const n=e.options[r];if(n.__value===t)return void(n.selected=!0)}r&&void 0===t||(e.selectedIndex=-1)}function select_value(e){const t=e.querySelector(":checked");return t&&t.__value}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(0!==flushidx)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],r=[];render_callbacks.forEach((n=>-1===e.indexOf(n)?t.push(n):r.push(n))),r.forEach((e=>e())),render_callbacks=t}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,n){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}else n&&n()}function create_component(e){e&&e.c()}function mount_component(e,t,r,n){const{fragment:a,after_update:i}=e.$$;a&&a.m(t,r),n||add_render_callback((()=>{const t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]})),i.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;null!==r.fragment&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,r,n,a,i,o,s=[-1]){const c=current_component;set_current_component(e);const u=e.$$={fragment:null,ctx:[],props:i,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let l=!1;if(u.ctx=r?r(e,t.props||{},((t,r,...n)=>{const i=n.length?n[0]:r;return u.ctx&&a(u.ctx[t],u.ctx[t]=i)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](i),l&&make_dirty(e,t)),r})):[],u.update(),l=!0,run_all(u.before_update),u.fragment=!!n&&n(u.ctx),t.target){if(t.hydrate){const e=children(t.target);u.fragment&&u.fragment.l(e),e.forEach(detach)}else u.fragment&&u.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function create_fragment$4(e){let t;return{c(){t=element("div"),t.innerHTML='<div class="container-fluid"><div class="row"><div class="col d-flex align-items-center"><i class="bi bi-justify" style="font-size:45px;color:white"></i>  <span style="font-size:20px;margin-left:10px;color:white;">INTOSKY Multipurpose Ground Control Station</span></div> \n            <div class="col d-flex align-items-center justify-content-end"><div class="input-group" style="width:400px;"><div class="input-group-prepend"><div class="input-group-text"><i class="bi bi-geo-alt-fill"></i></div></div> \n                    <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="주소"/> \n                    <button class="btn btn-light"><i class="bi bi-search"></i></button></div></div></div></div>',attr(t,"class","top-layer svelte-1v1jjsr")},m(e,r){insert(e,t,r)},p:noop,i:noop,o:noop,d(e){e&&detach(t)}}}class Top extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$4,safe_not_equal,{})}}function create_fragment$3(e){let t,r,n,a,i,o,s,c,u,l,d,p,h;return{c(){t=element("div"),r=element("div"),n=element("div"),a=element("div"),a.innerHTML='<img src="/images/q10.jpg" width="55" height="55" alt="drone icon"/>',i=space(),o=element("div"),s=element("div"),c=element("div"),u=element("div"),l=element("span"),d=text(e[0]),p=space(),h=element("div"),h.innerHTML='<div class="col"><img src="/images/icon_battery.png" height="28" alt="battery icon" style="margin-right:10px"/> \n                            <img src="/images/icon_communication.png" height="28" alt="battery icon" style="margin-right:10px"/> \n                            <img src="/images/icon_sattelite.png" height="28" alt="battery icon"/></div>',attr(a,"class","col-auto"),set_style(l,"font-size","1.2em"),set_style(l,"color","white"),attr(u,"class","col-auto"),set_style(u,"text-align","left"),attr(c,"class","row g-0"),set_style(c,"margin-bottom","5px"),attr(h,"class","row g-0"),attr(s,"class","container-fluid g-0"),attr(o,"class","col-auto"),attr(n,"class","row g-3"),attr(r,"class","container g-0"),set_style(r,"width","190px"),set_style(r,"padding","5px"),set_style(t,"background","rgba(0,0,0,0.7)"),set_style(t,"margin-right","10px")},m(e,f){insert(e,t,f),append(t,r),append(r,n),append(n,a),append(n,i),append(n,o),append(o,s),append(s,c),append(c,u),append(u,l),append(l,d),append(s,p),append(s,h)},p(e,[t]){1&t&&set_data(d,e[0])},i:noop,o:noop,d(e){e&&detach(t)}}}function instance$3(e,t,r){let{droneID:n}=t;return e.$$set=e=>{"droneID"in e&&r(0,n=e.droneID)},[n]}class Drone_label extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{droneID:0})}}const subscriber_queue=[];function writable(e,t=noop){let r;const n=new Set;function a(t){if(safe_not_equal(e,t)&&(e=t,r)){const t=!subscriber_queue.length;for(const t of n)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,o=noop){const s=[i,o];return n.add(s),1===n.size&&(r=t(a)||noop),i(e),()=>{n.delete(s),0===n.size&&r&&(r(),r=null)}}}}let apiUrl="http://127.0.0.1:8000/";const DRONEKIT_API=writable(apiUrl);let mapViewer=null;const MAP_VIEWER=writable(mapViewer);let droneYawOffset=90;const DRONE_YAW_OFFSET=writable(droneYawOffset);let droneModelScale=.02;const DRONE_MODEL_SCALE=writable(droneModelScale);let apiCallInterval=500;const API_CALL_INTERVAL=writable(apiCallInterval);function defined(e){return null!=e}function DeveloperError(e){let t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}defined(Object.create)&&(DeveloperError.prototype=Object.create(Error.prototype),DeveloperError.prototype.constructor=DeveloperError),DeveloperError.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return defined(this.stack)&&(e+=`\n${this.stack.toString()}`),e},DeveloperError.throwInstantiationError=function(){throw new DeveloperError("This function defines an interface and should not be called directly.")};const Check={};function getUndefinedErrorMessage(e){return`${e} is required, actual value was undefined`}function getFailedTypeErrorMessage(e,t,r){return`Expected ${r} to be typeof ${t}, actual typeof was ${e}`}Check.typeOf={},Check.defined=function(e,t){if(!defined(t))throw new DeveloperError(getUndefinedErrorMessage(e))},Check.typeOf.func=function(e,t){if("function"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"function",e))},Check.typeOf.string=function(e,t){if("string"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"string",e))},Check.typeOf.number=function(e,t){if("number"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"number",e))},Check.typeOf.number.lessThan=function(e,t,r){if(Check.typeOf.number(e,t),t>=r)throw new DeveloperError(`Expected ${e} to be less than ${r}, actual value was ${t}`)},Check.typeOf.number.lessThanOrEquals=function(e,t,r){if(Check.typeOf.number(e,t),t>r)throw new DeveloperError(`Expected ${e} to be less than or equal to ${r}, actual value was ${t}`)},Check.typeOf.number.greaterThan=function(e,t,r){if(Check.typeOf.number(e,t),t<=r)throw new DeveloperError(`Expected ${e} to be greater than ${r}, actual value was ${t}`)},Check.typeOf.number.greaterThanOrEquals=function(e,t,r){if(Check.typeOf.number(e,t),t<r)throw new DeveloperError(`Expected ${e} to be greater than or equal to ${r}, actual value was ${t}`)},Check.typeOf.object=function(e,t){if("object"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"object",e))},Check.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"boolean",e))},Check.typeOf.bigint=function(e,t){if("bigint"!=typeof t)throw new DeveloperError(getFailedTypeErrorMessage(typeof t,"bigint",e))},Check.typeOf.number.equals=function(e,t,r,n){if(Check.typeOf.number(e,r),Check.typeOf.number(t,n),r!==n)throw new DeveloperError(`${e} must be equal to ${t}, the actual values are ${r} and ${n}`)};var Check$1=Check;function defaultValue(e,t){return null!=e?e:t}defaultValue.EMPTY_OBJECT=Object.freeze({});var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var MersenneTwister=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};MersenneTwister.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(e,t){var r,n,a;for(this.init_seed(19650218),r=1,n=0,a=this.N>t?this.N:t;a;a--){var i=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[n]+n,this.mt[r]>>>=0,n++,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),n>=t&&(n=0)}for(a=this.N-1;a;a--){i=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-r,this.mt[r]>>>=0,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1)}this.mt[0]=2147483648},MersenneTwister.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r;for(this.mti==this.N+1&&this.init_seed(5489),r=0;r<this.N-this.M;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^e>>>1^t[1&e];for(;r<this.N-1;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},MersenneTwister.prototype.random_int31=function(){return this.random_int()>>>1},MersenneTwister.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},MersenneTwister.prototype.random=function(){return this.random_int()*(1/4294967296)},MersenneTwister.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},MersenneTwister.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var mersenneTwister=MersenneTwister,MersenneTwister$1=getDefaultExportFromCjs(mersenneTwister);const CesiumMath={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};CesiumMath.sign=defaultValue(Math.sign,(function(e){return 0===(e=+e)||e!=e?e:e>0?1:-1})),CesiumMath.signNotZero=function(e){return e<0?-1:1},CesiumMath.toSNorm=function(e,t){return t=defaultValue(t,255),Math.round((.5*CesiumMath.clamp(e,-1,1)+.5)*t)},CesiumMath.fromSNorm=function(e,t){return t=defaultValue(t,255),CesiumMath.clamp(e,0,t)/t*2-1},CesiumMath.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:CesiumMath.clamp((e-t)/r,0,1)},CesiumMath.sinh=defaultValue(Math.sinh,(function(e){return(Math.exp(e)-Math.exp(-e))/2})),CesiumMath.cosh=defaultValue(Math.cosh,(function(e){return(Math.exp(e)+Math.exp(-e))/2})),CesiumMath.lerp=function(e,t,r){return(1-r)*e+r*t},CesiumMath.PI=Math.PI,CesiumMath.ONE_OVER_PI=1/Math.PI,CesiumMath.PI_OVER_TWO=Math.PI/2,CesiumMath.PI_OVER_THREE=Math.PI/3,CesiumMath.PI_OVER_FOUR=Math.PI/4,CesiumMath.PI_OVER_SIX=Math.PI/6,CesiumMath.THREE_PI_OVER_TWO=3*Math.PI/2,CesiumMath.TWO_PI=2*Math.PI,CesiumMath.ONE_OVER_TWO_PI=1/(2*Math.PI),CesiumMath.RADIANS_PER_DEGREE=Math.PI/180,CesiumMath.DEGREES_PER_RADIAN=180/Math.PI,CesiumMath.RADIANS_PER_ARCSECOND=CesiumMath.RADIANS_PER_DEGREE/3600,CesiumMath.toRadians=function(e){if(!defined(e))throw new DeveloperError("degrees is required.");return e*CesiumMath.RADIANS_PER_DEGREE},CesiumMath.toDegrees=function(e){if(!defined(e))throw new DeveloperError("radians is required.");return e*CesiumMath.DEGREES_PER_RADIAN},CesiumMath.convertLongitudeRange=function(e){if(!defined(e))throw new DeveloperError("angle is required.");const t=CesiumMath.TWO_PI,r=e-Math.floor(e/t)*t;return r<-Math.PI?r+t:r>=Math.PI?r-t:r},CesiumMath.clampToLatitudeRange=function(e){if(!defined(e))throw new DeveloperError("angle is required.");return CesiumMath.clamp(e,-1*CesiumMath.PI_OVER_TWO,CesiumMath.PI_OVER_TWO)},CesiumMath.negativePiToPi=function(e){if(!defined(e))throw new DeveloperError("angle is required.");return e>=-CesiumMath.PI&&e<=CesiumMath.PI?e:CesiumMath.zeroToTwoPi(e+CesiumMath.PI)-CesiumMath.PI},CesiumMath.zeroToTwoPi=function(e){if(!defined(e))throw new DeveloperError("angle is required.");if(e>=0&&e<=CesiumMath.TWO_PI)return e;const t=CesiumMath.mod(e,CesiumMath.TWO_PI);return Math.abs(t)<CesiumMath.EPSILON14&&Math.abs(e)>CesiumMath.EPSILON14?CesiumMath.TWO_PI:t},CesiumMath.mod=function(e,t){if(!defined(e))throw new DeveloperError("m is required.");if(!defined(t))throw new DeveloperError("n is required.");if(0===t)throw new DeveloperError("divisor cannot be 0.");return CesiumMath.sign(e)===CesiumMath.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t},CesiumMath.equalsEpsilon=function(e,t,r,n){if(!defined(e))throw new DeveloperError("left is required.");if(!defined(t))throw new DeveloperError("right is required.");r=defaultValue(r,0),n=defaultValue(n,r);const a=Math.abs(e-t);return a<=n||a<=r*Math.max(Math.abs(e),Math.abs(t))},CesiumMath.lessThan=function(e,t,r){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(t))throw new DeveloperError("second is required.");if(!defined(r))throw new DeveloperError("absoluteEpsilon is required.");return e-t<-r},CesiumMath.lessThanOrEquals=function(e,t,r){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(t))throw new DeveloperError("second is required.");if(!defined(r))throw new DeveloperError("absoluteEpsilon is required.");return e-t<r},CesiumMath.greaterThan=function(e,t,r){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(t))throw new DeveloperError("second is required.");if(!defined(r))throw new DeveloperError("absoluteEpsilon is required.");return e-t>r},CesiumMath.greaterThanOrEquals=function(e,t,r){if(!defined(e))throw new DeveloperError("first is required.");if(!defined(t))throw new DeveloperError("second is required.");if(!defined(r))throw new DeveloperError("absoluteEpsilon is required.");return e-t>-r};const factorials=[1];CesiumMath.factorial=function(e){if("number"!=typeof e||e<0)throw new DeveloperError("A number greater than or equal to 0 is required.");const t=factorials.length;if(e>=t){let r=factorials[t-1];for(let n=t;n<=e;n++){const e=r*n;factorials.push(e),r=e}}return factorials[e]},CesiumMath.incrementWrap=function(e,t,r){if(r=defaultValue(r,0),!defined(e))throw new DeveloperError("n is required.");if(t<=r)throw new DeveloperError("maximumValue must be greater than minimumValue.");return++e>t&&(e=r),e},CesiumMath.isPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new DeveloperError("A number between 0 and (2^32)-1 is required.");return 0!==e&&0==(e&e-1)},CesiumMath.nextPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>2147483648)throw new DeveloperError("A number between 0 and 2^31 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},CesiumMath.previousPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new DeveloperError("A number between 0 and (2^32)-1 is required.");return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e=((e|=e>>32)>>>0)-(e>>>1)},CesiumMath.clamp=function(e,t,r){return Check$1.typeOf.number("value",e),Check$1.typeOf.number("min",t),Check$1.typeOf.number("max",r),e<t?t:e>r?r:e};let randomNumberGenerator=new MersenneTwister$1;CesiumMath.setRandomNumberSeed=function(e){if(!defined(e))throw new DeveloperError("seed is required.");randomNumberGenerator=new MersenneTwister$1(e)},CesiumMath.nextRandomNumber=function(){return randomNumberGenerator.random()},CesiumMath.randomBetween=function(e,t){return CesiumMath.nextRandomNumber()*(t-e)+e},CesiumMath.acosClamped=function(e){if(!defined(e))throw new DeveloperError("value is required.");return Math.acos(CesiumMath.clamp(e,-1,1))},CesiumMath.asinClamped=function(e){if(!defined(e))throw new DeveloperError("value is required.");return Math.asin(CesiumMath.clamp(e,-1,1))},CesiumMath.chordLength=function(e,t){if(!defined(e))throw new DeveloperError("angle is required.");if(!defined(t))throw new DeveloperError("radius is required.");return 2*t*Math.sin(.5*e)},CesiumMath.logBase=function(e,t){if(!defined(e))throw new DeveloperError("number is required.");if(!defined(t))throw new DeveloperError("base is required.");return Math.log(e)/Math.log(t)},CesiumMath.cbrt=defaultValue(Math.cbrt,(function(e){const t=Math.pow(Math.abs(e),1/3);return e<0?-t:t})),CesiumMath.log2=defaultValue(Math.log2,(function(e){return Math.log(e)*Math.LOG2E})),CesiumMath.fog=function(e,t){const r=e*t;return 1-Math.exp(-r*r)},CesiumMath.fastApproximateAtan=function(e){return Check$1.typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},CesiumMath.fastApproximateAtan2=function(e,t){let r;Check$1.typeOf.number("x",e),Check$1.typeOf.number("y",t);let n=Math.abs(e);r=Math.abs(t);const a=Math.max(n,r);r=Math.min(n,r);const i=r/a;if(isNaN(i))throw new DeveloperError("either x or y must be nonzero");return n=CesiumMath.fastApproximateAtan(i),n=Math.abs(t)>Math.abs(e)?CesiumMath.PI_OVER_TWO-n:n,n=e<0?CesiumMath.PI-n:n,n=t<0?-n:n,n};var CesiumMath$1=CesiumMath;function Cartesian3(e,t,r){this.x=defaultValue(e,0),this.y=defaultValue(t,0),this.z=defaultValue(r,0)}Cartesian3.fromSpherical=function(e,t){Check$1.typeOf.object("spherical",e),defined(t)||(t=new Cartesian3);const r=e.clock,n=e.cone,a=defaultValue(e.magnitude,1),i=a*Math.sin(n);return t.x=i*Math.cos(r),t.y=i*Math.sin(r),t.z=a*Math.cos(n),t},Cartesian3.fromElements=function(e,t,r,n){return defined(n)?(n.x=e,n.y=t,n.z=r,n):new Cartesian3(e,t,r)},Cartesian3.clone=function(e,t){if(defined(e))return defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new Cartesian3(e.x,e.y,e.z)},Cartesian3.fromCartesian4=Cartesian3.clone,Cartesian3.packedLength=3,Cartesian3.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},Cartesian3.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Cartesian3),r.x=e[t++],r.y=e[t++],r.z=e[t],r},Cartesian3.packArray=function(e,t){Check$1.defined("array",e);const r=e.length,n=3*r;if(defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let n=0;n<r;++n)Cartesian3.pack(e[n],t,3*n);return t},Cartesian3.unpackArray=function(e,t){if(Check$1.defined("array",e),Check$1.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new DeveloperError("array length must be a multiple of 3.");const r=e.length;defined(t)?t.length=r/3:t=new Array(r/3);for(let n=0;n<r;n+=3){const r=n/3;t[r]=Cartesian3.unpack(e,n,t[r])}return t},Cartesian3.fromArray=Cartesian3.unpack,Cartesian3.maximumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},Cartesian3.minimumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},Cartesian3.minimumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},Cartesian3.maximumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},Cartesian3.clamp=function(e,t,r,n){Check$1.typeOf.object("value",e),Check$1.typeOf.object("min",t),Check$1.typeOf.object("max",r),Check$1.typeOf.object("result",n);const a=CesiumMath$1.clamp(e.x,t.x,r.x),i=CesiumMath$1.clamp(e.y,t.y,r.y),o=CesiumMath$1.clamp(e.z,t.z,r.z);return n.x=a,n.y=i,n.z=o,n},Cartesian3.magnitudeSquared=function(e){return Check$1.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},Cartesian3.magnitude=function(e){return Math.sqrt(Cartesian3.magnitudeSquared(e))};const distanceScratch$2=new Cartesian3;Cartesian3.distance=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian3.subtract(e,t,distanceScratch$2),Cartesian3.magnitude(distanceScratch$2)},Cartesian3.distanceSquared=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian3.subtract(e,t,distanceScratch$2),Cartesian3.magnitudeSquared(distanceScratch$2)},Cartesian3.normalize=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian3.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new DeveloperError("normalized result is not a number");return t},Cartesian3.dot=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},Cartesian3.multiplyComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},Cartesian3.divideComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},Cartesian3.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},Cartesian3.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},Cartesian3.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},Cartesian3.divideByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},Cartesian3.negate=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},Cartesian3.abs=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};const lerpScratch$3=new Cartesian3;Cartesian3.lerp=function(e,t,r,n){return Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n),Cartesian3.multiplyByScalar(t,r,lerpScratch$3),n=Cartesian3.multiplyByScalar(e,1-r,n),Cartesian3.add(lerpScratch$3,n,n)};const angleBetweenScratch$1=new Cartesian3,angleBetweenScratch2$1=new Cartesian3;Cartesian3.angleBetween=function(e,t){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian3.normalize(e,angleBetweenScratch$1),Cartesian3.normalize(t,angleBetweenScratch2$1);const r=Cartesian3.dot(angleBetweenScratch$1,angleBetweenScratch2$1),n=Cartesian3.magnitude(Cartesian3.cross(angleBetweenScratch$1,angleBetweenScratch2$1,angleBetweenScratch$1));return Math.atan2(n,r)};const mostOrthogonalAxisScratch$2=new Cartesian3;Cartesian3.mostOrthogonalAxis=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian3.normalize(e,mostOrthogonalAxisScratch$2);return Cartesian3.abs(r,r),t=r.x<=r.y?r.x<=r.z?Cartesian3.clone(Cartesian3.UNIT_X,t):Cartesian3.clone(Cartesian3.UNIT_Z,t):r.y<=r.z?Cartesian3.clone(Cartesian3.UNIT_Y,t):Cartesian3.clone(Cartesian3.UNIT_Z,t)},Cartesian3.projectVector=function(e,t,r){Check$1.defined("a",e),Check$1.defined("b",t),Check$1.defined("result",r);const n=Cartesian3.dot(e,t)/Cartesian3.dot(t,t);return Cartesian3.multiplyByScalar(t,n,r)},Cartesian3.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},Cartesian3.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},Cartesian3.equalsEpsilon=function(e,t,r,n){return e===t||defined(e)&&defined(t)&&CesiumMath$1.equalsEpsilon(e.x,t.x,r,n)&&CesiumMath$1.equalsEpsilon(e.y,t.y,r,n)&&CesiumMath$1.equalsEpsilon(e.z,t.z,r,n)},Cartesian3.cross=function(e,t,r){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r);const n=e.x,a=e.y,i=e.z,o=t.x,s=t.y,c=t.z,u=a*c-i*s,l=i*o-n*c,d=n*s-a*o;return r.x=u,r.y=l,r.z=d,r},Cartesian3.midpoint=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},Cartesian3.fromDegrees=function(e,t,r,n,a){return Check$1.typeOf.number("longitude",e),Check$1.typeOf.number("latitude",t),e=CesiumMath$1.toRadians(e),t=CesiumMath$1.toRadians(t),Cartesian3.fromRadians(e,t,r,n,a)};let scratchN=new Cartesian3,scratchK=new Cartesian3;const wgs84RadiiSquared=new Cartesian3(40680631590769,40680631590769,40408299984661.445);Cartesian3.fromRadians=function(e,t,r,n,a){Check$1.typeOf.number("longitude",e),Check$1.typeOf.number("latitude",t),r=defaultValue(r,0);const i=defined(n)?n.radiiSquared:wgs84RadiiSquared,o=Math.cos(t);scratchN.x=o*Math.cos(e),scratchN.y=o*Math.sin(e),scratchN.z=Math.sin(t),scratchN=Cartesian3.normalize(scratchN,scratchN),Cartesian3.multiplyComponents(i,scratchN,scratchK);const s=Math.sqrt(Cartesian3.dot(scratchN,scratchK));return scratchK=Cartesian3.divideByScalar(scratchK,s,scratchK),scratchN=Cartesian3.multiplyByScalar(scratchN,r,scratchN),defined(a)||(a=new Cartesian3),Cartesian3.add(scratchK,scratchN,a)},Cartesian3.fromDegreesArray=function(e,t,r){if(Check$1.defined("coordinates",e),e.length<2||e.length%2!=0)throw new DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");const n=e.length;defined(r)?r.length=n/2:r=new Array(n/2);for(let a=0;a<n;a+=2){const n=e[a],i=e[a+1],o=a/2;r[o]=Cartesian3.fromDegrees(n,i,0,t,r[o])}return r},Cartesian3.fromRadiansArray=function(e,t,r){if(Check$1.defined("coordinates",e),e.length<2||e.length%2!=0)throw new DeveloperError("the number of coordinates must be a multiple of 2 and at least 2");const n=e.length;defined(r)?r.length=n/2:r=new Array(n/2);for(let a=0;a<n;a+=2){const n=e[a],i=e[a+1],o=a/2;r[o]=Cartesian3.fromRadians(n,i,0,t,r[o])}return r},Cartesian3.fromDegreesArrayHeights=function(e,t,r){if(Check$1.defined("coordinates",e),e.length<3||e.length%3!=0)throw new DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");const n=e.length;defined(r)?r.length=n/3:r=new Array(n/3);for(let a=0;a<n;a+=3){const n=e[a],i=e[a+1],o=e[a+2],s=a/3;r[s]=Cartesian3.fromDegrees(n,i,o,t,r[s])}return r},Cartesian3.fromRadiansArrayHeights=function(e,t,r){if(Check$1.defined("coordinates",e),e.length<3||e.length%3!=0)throw new DeveloperError("the number of coordinates must be a multiple of 3 and at least 3");const n=e.length;defined(r)?r.length=n/3:r=new Array(n/3);for(let a=0;a<n;a+=3){const n=e[a],i=e[a+1],o=e[a+2],s=a/3;r[s]=Cartesian3.fromRadians(n,i,o,t,r[s])}return r},Cartesian3.ZERO=Object.freeze(new Cartesian3(0,0,0)),Cartesian3.ONE=Object.freeze(new Cartesian3(1,1,1)),Cartesian3.UNIT_X=Object.freeze(new Cartesian3(1,0,0)),Cartesian3.UNIT_Y=Object.freeze(new Cartesian3(0,1,0)),Cartesian3.UNIT_Z=Object.freeze(new Cartesian3(0,0,1)),Cartesian3.prototype.clone=function(e){return Cartesian3.clone(this,e)},Cartesian3.prototype.equals=function(e){return Cartesian3.equals(this,e)},Cartesian3.prototype.equalsEpsilon=function(e,t,r){return Cartesian3.equalsEpsilon(this,e,t,r)},Cartesian3.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};const scaleToGeodeticSurfaceIntersection=new Cartesian3,scaleToGeodeticSurfaceGradient=new Cartesian3;function scaleToGeodeticSurface(e,t,r,n,a){if(!defined(e))throw new DeveloperError("cartesian is required.");if(!defined(t))throw new DeveloperError("oneOverRadii is required.");if(!defined(r))throw new DeveloperError("oneOverRadiiSquared is required.");if(!defined(n))throw new DeveloperError("centerToleranceSquared is required.");const i=e.x,o=e.y,s=e.z,c=t.x,u=t.y,l=t.z,d=i*i*c*c,p=o*o*u*u,h=s*s*l*l,f=d+p+h,m=Math.sqrt(1/f),y=Cartesian3.multiplyByScalar(e,m,scaleToGeodeticSurfaceIntersection);if(f<n)return isFinite(m)?Cartesian3.clone(y,a):void 0;const g=r.x,C=r.y,b=r.z,x=scaleToGeodeticSurfaceGradient;x.x=y.x*g*2,x.y=y.y*C*2,x.z=y.z*b*2;let w,v,_,O,$,S,M,E,k,R,T,q=(1-m)*Cartesian3.magnitude(e)/(.5*Cartesian3.magnitude(x)),D=0;do{q-=D,_=1/(1+q*g),O=1/(1+q*C),$=1/(1+q*b),S=_*_,M=O*O,E=$*$,k=S*_,R=M*O,T=E*$,w=d*S+p*M+h*E-1,v=d*k*g+p*R*C+h*T*b;D=w/(-2*v)}while(Math.abs(w)>CesiumMath$1.EPSILON12);return defined(a)?(a.x=i*_,a.y=o*O,a.z=s*$,a):new Cartesian3(i*_,o*O,s*$)}function Cartographic(e,t,r){this.longitude=defaultValue(e,0),this.latitude=defaultValue(t,0),this.height=defaultValue(r,0)}Cartographic.fromRadians=function(e,t,r,n){return Check$1.typeOf.number("longitude",e),Check$1.typeOf.number("latitude",t),r=defaultValue(r,0),defined(n)?(n.longitude=e,n.latitude=t,n.height=r,n):new Cartographic(e,t,r)},Cartographic.fromDegrees=function(e,t,r,n){return Check$1.typeOf.number("longitude",e),Check$1.typeOf.number("latitude",t),e=CesiumMath$1.toRadians(e),t=CesiumMath$1.toRadians(t),Cartographic.fromRadians(e,t,r,n)};const cartesianToCartographicN$1=new Cartesian3,cartesianToCartographicP$1=new Cartesian3,cartesianToCartographicH$1=new Cartesian3,wgs84OneOverRadii=new Cartesian3(1/6378137,1/6378137,1/6356752.314245179),wgs84OneOverRadiiSquared=new Cartesian3(1/40680631590769,1/40680631590769,1/40408299984661.445),wgs84CenterToleranceSquared=CesiumMath$1.EPSILON1;function Cartesian2(e,t){this.x=defaultValue(e,0),this.y=defaultValue(t,0)}Cartographic.fromCartesian=function(e,t,r){const n=defined(t)?t.oneOverRadii:wgs84OneOverRadii,a=defined(t)?t.oneOverRadiiSquared:wgs84OneOverRadiiSquared,i=scaleToGeodeticSurface(e,n,a,defined(t)?t._centerToleranceSquared:wgs84CenterToleranceSquared,cartesianToCartographicP$1);if(!defined(i))return;let o=Cartesian3.multiplyComponents(i,a,cartesianToCartographicN$1);o=Cartesian3.normalize(o,o);const s=Cartesian3.subtract(e,i,cartesianToCartographicH$1),c=Math.atan2(o.y,o.x),u=Math.asin(o.z),l=CesiumMath$1.sign(Cartesian3.dot(s,e))*Cartesian3.magnitude(s);return defined(r)?(r.longitude=c,r.latitude=u,r.height=l,r):new Cartographic(c,u,l)},Cartographic.toCartesian=function(e,t,r){return Check$1.defined("cartographic",e),Cartesian3.fromRadians(e.longitude,e.latitude,e.height,t,r)},Cartographic.clone=function(e,t){if(defined(e))return defined(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new Cartographic(e.longitude,e.latitude,e.height)},Cartographic.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},Cartographic.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},Cartographic.ZERO=Object.freeze(new Cartographic(0,0,0)),Cartographic.prototype.clone=function(e){return Cartographic.clone(this,e)},Cartographic.prototype.equals=function(e){return Cartographic.equals(this,e)},Cartographic.prototype.equalsEpsilon=function(e,t){return Cartographic.equalsEpsilon(this,e,t)},Cartographic.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`},Cartesian2.fromElements=function(e,t,r){return defined(r)?(r.x=e,r.y=t,r):new Cartesian2(e,t)},Cartesian2.clone=function(e,t){if(defined(e))return defined(t)?(t.x=e.x,t.y=e.y,t):new Cartesian2(e.x,e.y)},Cartesian2.fromCartesian3=Cartesian2.clone,Cartesian2.fromCartesian4=Cartesian2.clone,Cartesian2.packedLength=2,Cartesian2.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e.x,t[r]=e.y,t},Cartesian2.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Cartesian2),r.x=e[t++],r.y=e[t],r},Cartesian2.packArray=function(e,t){Check$1.defined("array",e);const r=e.length,n=2*r;if(defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let n=0;n<r;++n)Cartesian2.pack(e[n],t,2*n);return t},Cartesian2.unpackArray=function(e,t){if(Check$1.defined("array",e),Check$1.typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new DeveloperError("array length must be a multiple of 2.");const r=e.length;defined(t)?t.length=r/2:t=new Array(r/2);for(let n=0;n<r;n+=2){const r=n/2;t[r]=Cartesian2.unpack(e,n,t[r])}return t},Cartesian2.fromArray=Cartesian2.unpack,Cartesian2.maximumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.max(e.x,e.y)},Cartesian2.minimumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.min(e.x,e.y)},Cartesian2.minimumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},Cartesian2.maximumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},Cartesian2.clamp=function(e,t,r,n){Check$1.typeOf.object("value",e),Check$1.typeOf.object("min",t),Check$1.typeOf.object("max",r),Check$1.typeOf.object("result",n);const a=CesiumMath$1.clamp(e.x,t.x,r.x),i=CesiumMath$1.clamp(e.y,t.y,r.y);return n.x=a,n.y=i,n},Cartesian2.magnitudeSquared=function(e){return Check$1.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},Cartesian2.magnitude=function(e){return Math.sqrt(Cartesian2.magnitudeSquared(e))};const distanceScratch$1=new Cartesian2;Cartesian2.distance=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian2.subtract(e,t,distanceScratch$1),Cartesian2.magnitude(distanceScratch$1)},Cartesian2.distanceSquared=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian2.subtract(e,t,distanceScratch$1),Cartesian2.magnitudeSquared(distanceScratch$1)},Cartesian2.normalize=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian2.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,isNaN(t.x)||isNaN(t.y))throw new DeveloperError("normalized result is not a number");return t},Cartesian2.dot=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),e.x*t.x+e.y*t.y},Cartesian2.cross=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),e.x*t.y-e.y*t.x},Cartesian2.multiplyComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r},Cartesian2.divideComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r},Cartesian2.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r},Cartesian2.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r},Cartesian2.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r},Cartesian2.divideByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r},Cartesian2.negate=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t},Cartesian2.abs=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};const lerpScratch$2=new Cartesian2;Cartesian2.lerp=function(e,t,r,n){return Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n),Cartesian2.multiplyByScalar(t,r,lerpScratch$2),n=Cartesian2.multiplyByScalar(e,1-r,n),Cartesian2.add(lerpScratch$2,n,n)};const angleBetweenScratch=new Cartesian2,angleBetweenScratch2=new Cartesian2;Cartesian2.angleBetween=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian2.normalize(e,angleBetweenScratch),Cartesian2.normalize(t,angleBetweenScratch2),CesiumMath$1.acosClamped(Cartesian2.dot(angleBetweenScratch,angleBetweenScratch2))};const mostOrthogonalAxisScratch$1=new Cartesian2;function initialize(e,t,r,n){t=defaultValue(t,0),r=defaultValue(r,0),n=defaultValue(n,0),Check$1.typeOf.number.greaterThanOrEquals("x",t,0),Check$1.typeOf.number.greaterThanOrEquals("y",r,0),Check$1.typeOf.number.greaterThanOrEquals("z",n,0),e._radii=new Cartesian3(t,r,n),e._radiiSquared=new Cartesian3(t*t,r*r,n*n),e._radiiToTheFourth=new Cartesian3(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new Cartesian3(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new Cartesian3(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=CesiumMath$1.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function Ellipsoid(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,initialize(this,e,t,r)}Cartesian2.mostOrthogonalAxis=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian2.normalize(e,mostOrthogonalAxisScratch$1);return Cartesian2.abs(r,r),t=r.x<=r.y?Cartesian2.clone(Cartesian2.UNIT_X,t):Cartesian2.clone(Cartesian2.UNIT_Y,t)},Cartesian2.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.x===t.x&&e.y===t.y},Cartesian2.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},Cartesian2.equalsEpsilon=function(e,t,r,n){return e===t||defined(e)&&defined(t)&&CesiumMath$1.equalsEpsilon(e.x,t.x,r,n)&&CesiumMath$1.equalsEpsilon(e.y,t.y,r,n)},Cartesian2.ZERO=Object.freeze(new Cartesian2(0,0)),Cartesian2.ONE=Object.freeze(new Cartesian2(1,1)),Cartesian2.UNIT_X=Object.freeze(new Cartesian2(1,0)),Cartesian2.UNIT_Y=Object.freeze(new Cartesian2(0,1)),Cartesian2.prototype.clone=function(e){return Cartesian2.clone(this,e)},Cartesian2.prototype.equals=function(e){return Cartesian2.equals(this,e)},Cartesian2.prototype.equalsEpsilon=function(e,t,r){return Cartesian2.equalsEpsilon(this,e,t,r)},Cartesian2.prototype.toString=function(){return`(${this.x}, ${this.y})`},Object.defineProperties(Ellipsoid.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),Ellipsoid.clone=function(e,t){if(!defined(e))return;const r=e._radii;return defined(t)?(Cartesian3.clone(r,t._radii),Cartesian3.clone(e._radiiSquared,t._radiiSquared),Cartesian3.clone(e._radiiToTheFourth,t._radiiToTheFourth),Cartesian3.clone(e._oneOverRadii,t._oneOverRadii),Cartesian3.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new Ellipsoid(r.x,r.y,r.z)},Ellipsoid.fromCartesian3=function(e,t){return defined(t)||(t=new Ellipsoid),defined(e)?(initialize(t,e.x,e.y,e.z),t):t},Ellipsoid.WGS84=Object.freeze(new Ellipsoid(6378137,6378137,6356752.314245179)),Ellipsoid.UNIT_SPHERE=Object.freeze(new Ellipsoid(1,1,1)),Ellipsoid.MOON=Object.freeze(new Ellipsoid(CesiumMath$1.LUNAR_RADIUS,CesiumMath$1.LUNAR_RADIUS,CesiumMath$1.LUNAR_RADIUS)),Ellipsoid.prototype.clone=function(e){return Ellipsoid.clone(this,e)},Ellipsoid.packedLength=Cartesian3.packedLength,Ellipsoid.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),Cartesian3.pack(e._radii,t,r),t},Ellipsoid.unpack=function(e,t,r){Check$1.defined("array",e),t=defaultValue(t,0);const n=Cartesian3.unpack(e,t);return Ellipsoid.fromCartesian3(n,r)},Ellipsoid.prototype.geocentricSurfaceNormal=Cartesian3.normalize,Ellipsoid.prototype.geodeticSurfaceNormalCartographic=function(e,t){Check$1.typeOf.object("cartographic",e);const r=e.longitude,n=e.latitude,a=Math.cos(n),i=a*Math.cos(r),o=a*Math.sin(r),s=Math.sin(n);return defined(t)||(t=new Cartesian3),t.x=i,t.y=o,t.z=s,Cartesian3.normalize(t,t)},Ellipsoid.prototype.geodeticSurfaceNormal=function(e,t){if(!Cartesian3.equalsEpsilon(e,Cartesian3.ZERO,CesiumMath$1.EPSILON14))return defined(t)||(t=new Cartesian3),t=Cartesian3.multiplyComponents(e,this._oneOverRadiiSquared,t),Cartesian3.normalize(t,t)};const cartographicToCartesianNormal=new Cartesian3,cartographicToCartesianK=new Cartesian3;Ellipsoid.prototype.cartographicToCartesian=function(e,t){const r=cartographicToCartesianNormal,n=cartographicToCartesianK;this.geodeticSurfaceNormalCartographic(e,r),Cartesian3.multiplyComponents(this._radiiSquared,r,n);const a=Math.sqrt(Cartesian3.dot(r,n));return Cartesian3.divideByScalar(n,a,n),Cartesian3.multiplyByScalar(r,e.height,r),defined(t)||(t=new Cartesian3),Cartesian3.add(n,r,t)},Ellipsoid.prototype.cartographicArrayToCartesianArray=function(e,t){Check$1.defined("cartographics",e);const r=e.length;defined(t)?t.length=r:t=new Array(r);for(let n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};const cartesianToCartographicN=new Cartesian3,cartesianToCartographicP=new Cartesian3,cartesianToCartographicH=new Cartesian3;Ellipsoid.prototype.cartesianToCartographic=function(e,t){const r=this.scaleToGeodeticSurface(e,cartesianToCartographicP);if(!defined(r))return;const n=this.geodeticSurfaceNormal(r,cartesianToCartographicN),a=Cartesian3.subtract(e,r,cartesianToCartographicH),i=Math.atan2(n.y,n.x),o=Math.asin(n.z),s=CesiumMath$1.sign(Cartesian3.dot(a,e))*Cartesian3.magnitude(a);return defined(t)?(t.longitude=i,t.latitude=o,t.height=s,t):new Cartographic(i,o,s)},Ellipsoid.prototype.cartesianArrayToCartographicArray=function(e,t){Check$1.defined("cartesians",e);const r=e.length;defined(t)?t.length=r:t=new Array(r);for(let n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},Ellipsoid.prototype.scaleToGeodeticSurface=function(e,t){return scaleToGeodeticSurface(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},Ellipsoid.prototype.scaleToGeocentricSurface=function(e,t){Check$1.typeOf.object("cartesian",e),defined(t)||(t=new Cartesian3);const r=e.x,n=e.y,a=e.z,i=this._oneOverRadiiSquared,o=1/Math.sqrt(r*r*i.x+n*n*i.y+a*a*i.z);return Cartesian3.multiplyByScalar(e,o,t)},Ellipsoid.prototype.transformPositionToScaledSpace=function(e,t){return defined(t)||(t=new Cartesian3),Cartesian3.multiplyComponents(e,this._oneOverRadii,t)},Ellipsoid.prototype.transformPositionFromScaledSpace=function(e,t){return defined(t)||(t=new Cartesian3),Cartesian3.multiplyComponents(e,this._radii,t)},Ellipsoid.prototype.equals=function(e){return this===e||defined(e)&&Cartesian3.equals(this._radii,e._radii)},Ellipsoid.prototype.toString=function(){return this._radii.toString()},Ellipsoid.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){if(Check$1.typeOf.object("position",e),!CesiumMath$1.equalsEpsilon(this._radii.x,this._radii.y,CesiumMath$1.EPSILON15))throw new DeveloperError("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");Check$1.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),t=defaultValue(t,0);const n=this._squaredXOverSquaredZ;if(defined(r)||(r=new Cartesian3),r.x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};const scratchEndpoint=new Cartesian3;Ellipsoid.prototype.getLocalCurvature=function(e,t){Check$1.typeOf.object("surfacePosition",e),defined(t)||(t=new Cartesian2);const r=this.getSurfaceNormalIntersectionWithZAxis(e,0,scratchEndpoint),n=Cartesian3.distance(e,r),a=n*(this.minimumRadius*n/this.maximumRadius**2)**2;return Cartesian2.fromElements(1/n,1/a,t)};const abscissas=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],weights=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function gaussLegendreQuadrature(e,t,r){Check$1.typeOf.number("a",e),Check$1.typeOf.number("b",t),Check$1.typeOf.func("func",r);const n=.5*(t+e),a=.5*(t-e);let i=0;for(let e=0;e<5;e++){const t=a*abscissas[e];i+=weights[e]*(r(n+t)+r(n-t))}return i*=a,i}function Matrix3(e,t,r,n,a,i,o,s,c){this[0]=defaultValue(e,0),this[1]=defaultValue(n,0),this[2]=defaultValue(o,0),this[3]=defaultValue(t,0),this[4]=defaultValue(a,0),this[5]=defaultValue(s,0),this[6]=defaultValue(r,0),this[7]=defaultValue(i,0),this[8]=defaultValue(c,0)}Ellipsoid.prototype.surfaceArea=function(e){Check$1.typeOf.object("rectangle",e);const t=e.west;let r=e.east;const n=e.south,a=e.north;for(;r<t;)r+=CesiumMath$1.TWO_PI;const i=this._radiiSquared,o=i.x,s=i.y,c=i.z,u=o*s;return gaussLegendreQuadrature(n,a,(function(e){const n=Math.cos(e),a=Math.sin(e);return Math.cos(e)*gaussLegendreQuadrature(t,r,(function(e){const t=Math.cos(e),r=Math.sin(e);return Math.sqrt(u*a*a+c*(s*t*t+o*r*r)*n*n)}))}))},Matrix3.packedLength=9,Matrix3.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},Matrix3.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Matrix3),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},Matrix3.packArray=function(e,t){Check$1.defined("array",e);const r=e.length,n=9*r;if(defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 9 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let n=0;n<r;++n)Matrix3.pack(e[n],t,9*n);return t},Matrix3.unpackArray=function(e,t){if(Check$1.defined("array",e),Check$1.typeOf.number.greaterThanOrEquals("array.length",e.length,9),e.length%9!=0)throw new DeveloperError("array length must be a multiple of 9.");const r=e.length;defined(t)?t.length=r/9:t=new Array(r/9);for(let n=0;n<r;n+=9){const r=n/9;t[r]=Matrix3.unpack(e,n,t[r])}return t},Matrix3.clone=function(e,t){if(defined(e))return defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},Matrix3.fromArray=Matrix3.unpack,Matrix3.fromColumnMajorArray=function(e,t){return Check$1.defined("values",e),Matrix3.clone(e,t)},Matrix3.fromRowMajorArray=function(e,t){return Check$1.defined("values",e),defined(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new Matrix3(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Matrix3.fromQuaternion=function(e,t){Check$1.typeOf.object("quaternion",e);const r=e.x*e.x,n=e.x*e.y,a=e.x*e.z,i=e.x*e.w,o=e.y*e.y,s=e.y*e.z,c=e.y*e.w,u=e.z*e.z,l=e.z*e.w,d=e.w*e.w,p=r-o-u+d,h=2*(n-l),f=2*(a+c),m=2*(n+l),y=-r+o-u+d,g=2*(s-i),C=2*(a-c),b=2*(s+i),x=-r-o+u+d;return defined(t)?(t[0]=p,t[1]=m,t[2]=C,t[3]=h,t[4]=y,t[5]=b,t[6]=f,t[7]=g,t[8]=x,t):new Matrix3(p,h,f,m,y,g,C,b,x)},Matrix3.fromHeadingPitchRoll=function(e,t){Check$1.typeOf.object("headingPitchRoll",e);const r=Math.cos(-e.pitch),n=Math.cos(-e.heading),a=Math.cos(e.roll),i=Math.sin(-e.pitch),o=Math.sin(-e.heading),s=Math.sin(e.roll),c=r*n,u=-a*o+s*i*n,l=s*o+a*i*n,d=r*o,p=a*n+s*i*o,h=-s*n+a*i*o,f=-i,m=s*r,y=a*r;return defined(t)?(t[0]=c,t[1]=d,t[2]=f,t[3]=u,t[4]=p,t[5]=m,t[6]=l,t[7]=h,t[8]=y,t):new Matrix3(c,u,l,d,p,h,f,m,y)},Matrix3.fromScale=function(e,t){return Check$1.typeOf.object("scale",e),defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new Matrix3(e.x,0,0,0,e.y,0,0,0,e.z)},Matrix3.fromUniformScale=function(e,t){return Check$1.typeOf.number("scale",e),defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new Matrix3(e,0,0,0,e,0,0,0,e)},Matrix3.fromCrossProduct=function(e,t){return Check$1.typeOf.object("vector",e),defined(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new Matrix3(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},Matrix3.fromRotationX=function(e,t){Check$1.typeOf.number("angle",e);const r=Math.cos(e),n=Math.sin(e);return defined(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=n,t[6]=0,t[7]=-n,t[8]=r,t):new Matrix3(1,0,0,0,r,-n,0,n,r)},Matrix3.fromRotationY=function(e,t){Check$1.typeOf.number("angle",e);const r=Math.cos(e),n=Math.sin(e);return defined(t)?(t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=1,t[5]=0,t[6]=n,t[7]=0,t[8]=r,t):new Matrix3(r,0,n,0,1,0,-n,0,r)},Matrix3.fromRotationZ=function(e,t){Check$1.typeOf.number("angle",e);const r=Math.cos(e),n=Math.sin(e);return defined(t)?(t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Matrix3(r,-n,0,n,r,0,0,0,1)},Matrix3.toArray=function(e,t){return Check$1.typeOf.object("matrix",e),defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},Matrix3.getElementIndex=function(e,t){return Check$1.typeOf.number.greaterThanOrEquals("row",t,0),Check$1.typeOf.number.lessThanOrEquals("row",t,2),Check$1.typeOf.number.greaterThanOrEquals("column",e,0),Check$1.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},Matrix3.getColumn=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,2),Check$1.typeOf.object("result",r);const n=3*t,a=e[n],i=e[n+1],o=e[n+2];return r.x=a,r.y=i,r.z=o,r},Matrix3.setColumn=function(e,t,r,n){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,2),Check$1.typeOf.object("cartesian",r),Check$1.typeOf.object("result",n);const a=3*t;return(n=Matrix3.clone(e,n))[a]=r.x,n[a+1]=r.y,n[a+2]=r.z,n},Matrix3.getRow=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,2),Check$1.typeOf.object("result",r);const n=e[t],a=e[t+3],i=e[t+6];return r.x=n,r.y=a,r.z=i,r},Matrix3.setRow=function(e,t,r,n){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,2),Check$1.typeOf.object("cartesian",r),Check$1.typeOf.object("result",n),(n=Matrix3.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};const scaleScratch1$1=new Cartesian3;Matrix3.setScale=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("scale",t),Check$1.typeOf.object("result",r);const n=Matrix3.getScale(e,scaleScratch1$1),a=t.x/n.x,i=t.y/n.y,o=t.z/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*o,r[7]=e[7]*o,r[8]=e[8]*o,r};const scaleScratch2$1=new Cartesian3;Matrix3.setUniformScale=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scale",t),Check$1.typeOf.object("result",r);const n=Matrix3.getScale(e,scaleScratch2$1),a=t/n.x,i=t/n.y,o=t/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*o,r[7]=e[7]*o,r[8]=e[8]*o,r};const scratchColumn$1=new Cartesian3;Matrix3.getScale=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t.x=Cartesian3.magnitude(Cartesian3.fromElements(e[0],e[1],e[2],scratchColumn$1)),t.y=Cartesian3.magnitude(Cartesian3.fromElements(e[3],e[4],e[5],scratchColumn$1)),t.z=Cartesian3.magnitude(Cartesian3.fromElements(e[6],e[7],e[8],scratchColumn$1)),t};const scaleScratch3$1=new Cartesian3;Matrix3.getMaximumScale=function(e){return Matrix3.getScale(e,scaleScratch3$1),Cartesian3.maximumComponent(scaleScratch3$1)};const scaleScratch4$1=new Cartesian3;Matrix3.setRotation=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",r);const n=Matrix3.getScale(e,scaleScratch4$1);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=t[3]*n.y,r[4]=t[4]*n.y,r[5]=t[5]*n.y,r[6]=t[6]*n.z,r[7]=t[7]*n.z,r[8]=t[8]*n.z,r};const scaleScratch5$1=new Cartesian3;function computeFrobeniusNorm(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}Matrix3.getRotation=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=Matrix3.getScale(e,scaleScratch5$1);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[3]/r.y,t[4]=e[4]/r.y,t[5]=e[5]/r.y,t[6]=e[6]/r.z,t[7]=e[7]/r.z,t[8]=e[8]/r.z,t},Matrix3.multiply=function(e,t,r){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r);const n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],c=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],u=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=c,r[6]=u,r[7]=l,r[8]=d,r},Matrix3.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},Matrix3.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},Matrix3.multiplyByVector=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("cartesian",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z,o=e[0]*n+e[3]*a+e[6]*i,s=e[1]*n+e[4]*a+e[7]*i,c=e[2]*n+e[5]*a+e[8]*i;return r.x=o,r.y=s,r.z=c,r},Matrix3.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},Matrix3.multiplyByScale=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("scale",t),Check$1.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},Matrix3.multiplyByUniformScale=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scale",t),Check$1.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},Matrix3.negate=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},Matrix3.transpose=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=e[0],n=e[3],a=e[6],i=e[1],o=e[4],s=e[7],c=e[2],u=e[5],l=e[8];return t[0]=r,t[1]=n,t[2]=a,t[3]=i,t[4]=o,t[5]=s,t[6]=c,t[7]=u,t[8]=l,t};const rowVal=[1,0,0],colVal=[2,2,1];function offDiagonalFrobeniusNorm(e){let t=0;for(let r=0;r<3;++r){const n=e[Matrix3.getElementIndex(colVal[r],rowVal[r])];t+=2*n*n}return Math.sqrt(t)}function shurDecomposition(e,t){const r=CesiumMath$1.EPSILON15;let n=0,a=1;for(let t=0;t<3;++t){const r=Math.abs(e[Matrix3.getElementIndex(colVal[t],rowVal[t])]);r>n&&(a=t,n=r)}let i=1,o=0;const s=rowVal[a],c=colVal[a];if(Math.abs(e[Matrix3.getElementIndex(c,s)])>r){const t=(e[Matrix3.getElementIndex(c,c)]-e[Matrix3.getElementIndex(s,s)])/2/e[Matrix3.getElementIndex(c,s)];let r;r=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),i=1/Math.sqrt(1+r*r),o=r*i}return(t=Matrix3.clone(Matrix3.IDENTITY,t))[Matrix3.getElementIndex(s,s)]=t[Matrix3.getElementIndex(c,c)]=i,t[Matrix3.getElementIndex(c,s)]=o,t[Matrix3.getElementIndex(s,c)]=-o,t}const jMatrix=new Matrix3,jMatrixTranspose=new Matrix3;Matrix3.computeEigenDecomposition=function(e,t){Check$1.typeOf.object("matrix",e);const r=CesiumMath$1.EPSILON20;let n=0,a=0;defined(t)||(t={});const i=t.unitary=Matrix3.clone(Matrix3.IDENTITY,t.unitary),o=t.diagonal=Matrix3.clone(e,t.diagonal),s=r*computeFrobeniusNorm(o);for(;a<10&&offDiagonalFrobeniusNorm(o)>s;)shurDecomposition(o,jMatrix),Matrix3.transpose(jMatrix,jMatrixTranspose),Matrix3.multiply(o,jMatrix,o),Matrix3.multiply(jMatrixTranspose,o,o),Matrix3.multiply(i,jMatrix,i),++n>2&&(++a,n=0);return t},Matrix3.abs=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},Matrix3.determinant=function(e){Check$1.typeOf.object("matrix",e);const t=e[0],r=e[3],n=e[6],a=e[1],i=e[4],o=e[7],s=e[2],c=e[5],u=e[8];return t*(i*u-c*o)+a*(c*n-r*u)+s*(r*o-i*n)},Matrix3.inverse=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],l=e[8],d=Matrix3.determinant(e);if(Math.abs(d)<=CesiumMath$1.EPSILON15)throw new DeveloperError("matrix is not invertible");t[0]=o*l-u*s,t[1]=u*a-n*l,t[2]=n*s-o*a,t[3]=c*s-i*l,t[4]=r*l-c*a,t[5]=i*a-r*s,t[6]=i*u-c*o,t[7]=c*n-r*u,t[8]=r*o-i*n;const p=1/d;return Matrix3.multiplyByScalar(t,p,t)};const scratchTransposeMatrix$1=new Matrix3;function Cartesian4(e,t,r,n){this.x=defaultValue(e,0),this.y=defaultValue(t,0),this.z=defaultValue(r,0),this.w=defaultValue(n,0)}Matrix3.inverseTranspose=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),Matrix3.inverse(Matrix3.transpose(e,scratchTransposeMatrix$1),t)},Matrix3.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},Matrix3.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},Matrix3.IDENTITY=Object.freeze(new Matrix3(1,0,0,0,1,0,0,0,1)),Matrix3.ZERO=Object.freeze(new Matrix3(0,0,0,0,0,0,0,0,0)),Matrix3.COLUMN0ROW0=0,Matrix3.COLUMN0ROW1=1,Matrix3.COLUMN0ROW2=2,Matrix3.COLUMN1ROW0=3,Matrix3.COLUMN1ROW1=4,Matrix3.COLUMN1ROW2=5,Matrix3.COLUMN2ROW0=6,Matrix3.COLUMN2ROW1=7,Matrix3.COLUMN2ROW2=8,Object.defineProperties(Matrix3.prototype,{length:{get:function(){return Matrix3.packedLength}}}),Matrix3.prototype.clone=function(e){return Matrix3.clone(this,e)},Matrix3.prototype.equals=function(e){return Matrix3.equals(this,e)},Matrix3.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},Matrix3.prototype.equalsEpsilon=function(e,t){return Matrix3.equalsEpsilon(this,e,t)},Matrix3.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})\n(${this[1]}, ${this[4]}, ${this[7]})\n(${this[2]}, ${this[5]}, ${this[8]})`},Cartesian4.fromElements=function(e,t,r,n,a){return defined(a)?(a.x=e,a.y=t,a.z=r,a.w=n,a):new Cartesian4(e,t,r,n)},Cartesian4.fromColor=function(e,t){return Check$1.typeOf.object("color",e),defined(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new Cartesian4(e.red,e.green,e.blue,e.alpha)},Cartesian4.clone=function(e,t){if(defined(e))return defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Cartesian4(e.x,e.y,e.z,e.w)},Cartesian4.packedLength=4,Cartesian4.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Cartesian4.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Cartesian4),r.x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},Cartesian4.packArray=function(e,t){Check$1.defined("array",e);const r=e.length,n=4*r;if(defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let n=0;n<r;++n)Cartesian4.pack(e[n],t,4*n);return t},Cartesian4.unpackArray=function(e,t){if(Check$1.defined("array",e),Check$1.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new DeveloperError("array length must be a multiple of 4.");const r=e.length;defined(t)?t.length=r/4:t=new Array(r/4);for(let n=0;n<r;n+=4){const r=n/4;t[r]=Cartesian4.unpack(e,n,t[r])}return t},Cartesian4.fromArray=Cartesian4.unpack,Cartesian4.maximumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},Cartesian4.minimumComponent=function(e){return Check$1.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},Cartesian4.minimumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},Cartesian4.maximumByComponent=function(e,t,r){return Check$1.typeOf.object("first",e),Check$1.typeOf.object("second",t),Check$1.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},Cartesian4.clamp=function(e,t,r,n){Check$1.typeOf.object("value",e),Check$1.typeOf.object("min",t),Check$1.typeOf.object("max",r),Check$1.typeOf.object("result",n);const a=CesiumMath$1.clamp(e.x,t.x,r.x),i=CesiumMath$1.clamp(e.y,t.y,r.y),o=CesiumMath$1.clamp(e.z,t.z,r.z),s=CesiumMath$1.clamp(e.w,t.w,r.w);return n.x=a,n.y=i,n.z=o,n.w=s,n},Cartesian4.magnitudeSquared=function(e){return Check$1.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Cartesian4.magnitude=function(e){return Math.sqrt(Cartesian4.magnitudeSquared(e))};const distanceScratch=new Cartesian4;Cartesian4.distance=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian4.subtract(e,t,distanceScratch),Cartesian4.magnitude(distanceScratch)},Cartesian4.distanceSquared=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Cartesian4.subtract(e,t,distanceScratch),Cartesian4.magnitudeSquared(distanceScratch)},Cartesian4.normalize=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian4.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new DeveloperError("normalized result is not a number");return t},Cartesian4.dot=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Cartesian4.multiplyComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},Cartesian4.divideComponents=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},Cartesian4.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Cartesian4.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Cartesian4.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Cartesian4.divideByScalar=function(e,t,r){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Cartesian4.negate=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Cartesian4.abs=function(e,t){return Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};const lerpScratch$1=new Cartesian4;Cartesian4.lerp=function(e,t,r,n){return Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n),Cartesian4.multiplyByScalar(t,r,lerpScratch$1),n=Cartesian4.multiplyByScalar(e,1-r,n),Cartesian4.add(lerpScratch$1,n,n)};const mostOrthogonalAxisScratch=new Cartesian4;Cartesian4.mostOrthogonalAxis=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian4.normalize(e,mostOrthogonalAxisScratch);return Cartesian4.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?Cartesian4.clone(Cartesian4.UNIT_X,t):Cartesian4.clone(Cartesian4.UNIT_W,t):r.z<=r.w?Cartesian4.clone(Cartesian4.UNIT_Z,t):Cartesian4.clone(Cartesian4.UNIT_W,t):r.y<=r.z?r.y<=r.w?Cartesian4.clone(Cartesian4.UNIT_Y,t):Cartesian4.clone(Cartesian4.UNIT_W,t):r.z<=r.w?Cartesian4.clone(Cartesian4.UNIT_Z,t):Cartesian4.clone(Cartesian4.UNIT_W,t)},Cartesian4.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Cartesian4.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},Cartesian4.equalsEpsilon=function(e,t,r,n){return e===t||defined(e)&&defined(t)&&CesiumMath$1.equalsEpsilon(e.x,t.x,r,n)&&CesiumMath$1.equalsEpsilon(e.y,t.y,r,n)&&CesiumMath$1.equalsEpsilon(e.z,t.z,r,n)&&CesiumMath$1.equalsEpsilon(e.w,t.w,r,n)},Cartesian4.ZERO=Object.freeze(new Cartesian4(0,0,0,0)),Cartesian4.ONE=Object.freeze(new Cartesian4(1,1,1,1)),Cartesian4.UNIT_X=Object.freeze(new Cartesian4(1,0,0,0)),Cartesian4.UNIT_Y=Object.freeze(new Cartesian4(0,1,0,0)),Cartesian4.UNIT_Z=Object.freeze(new Cartesian4(0,0,1,0)),Cartesian4.UNIT_W=Object.freeze(new Cartesian4(0,0,0,1)),Cartesian4.prototype.clone=function(e){return Cartesian4.clone(this,e)},Cartesian4.prototype.equals=function(e){return Cartesian4.equals(this,e)},Cartesian4.prototype.equalsEpsilon=function(e,t,r){return Cartesian4.equalsEpsilon(this,e,t,r)},Cartesian4.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const scratchF32Array=new Float32Array(1),scratchU8Array=new Uint8Array(scratchF32Array.buffer),testU32=new Uint32Array([287454020]),testU8=new Uint8Array(testU32.buffer),littleEndian=68===testU8[0];function RuntimeError(e){let t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function Matrix4(e,t,r,n,a,i,o,s,c,u,l,d,p,h,f,m){this[0]=defaultValue(e,0),this[1]=defaultValue(a,0),this[2]=defaultValue(c,0),this[3]=defaultValue(p,0),this[4]=defaultValue(t,0),this[5]=defaultValue(i,0),this[6]=defaultValue(u,0),this[7]=defaultValue(h,0),this[8]=defaultValue(r,0),this[9]=defaultValue(o,0),this[10]=defaultValue(l,0),this[11]=defaultValue(f,0),this[12]=defaultValue(n,0),this[13]=defaultValue(s,0),this[14]=defaultValue(d,0),this[15]=defaultValue(m,0)}Cartesian4.packFloat=function(e,t){return Check$1.typeOf.number("value",e),defined(t)||(t=new Cartesian4),scratchF32Array[0]=e,littleEndian?(t.x=scratchU8Array[0],t.y=scratchU8Array[1],t.z=scratchU8Array[2],t.w=scratchU8Array[3]):(t.x=scratchU8Array[3],t.y=scratchU8Array[2],t.z=scratchU8Array[1],t.w=scratchU8Array[0]),t},Cartesian4.unpackFloat=function(e){return Check$1.typeOf.object("packedFloat",e),littleEndian?(scratchU8Array[0]=e.x,scratchU8Array[1]=e.y,scratchU8Array[2]=e.z,scratchU8Array[3]=e.w):(scratchU8Array[0]=e.w,scratchU8Array[1]=e.z,scratchU8Array[2]=e.y,scratchU8Array[3]=e.x),scratchF32Array[0]},defined(Object.create)&&(RuntimeError.prototype=Object.create(Error.prototype),RuntimeError.prototype.constructor=RuntimeError),RuntimeError.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return defined(this.stack)&&(e+=`\n${this.stack.toString()}`),e},Matrix4.packedLength=16,Matrix4.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},Matrix4.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Matrix4),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},Matrix4.packArray=function(e,t){Check$1.defined("array",e);const r=e.length,n=16*r;if(defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new DeveloperError("If result is a typed array, it must have exactly array.length * 16 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let n=0;n<r;++n)Matrix4.pack(e[n],t,16*n);return t},Matrix4.unpackArray=function(e,t){if(Check$1.defined("array",e),Check$1.typeOf.number.greaterThanOrEquals("array.length",e.length,16),e.length%16!=0)throw new DeveloperError("array length must be a multiple of 16.");const r=e.length;defined(t)?t.length=r/16:t=new Array(r/16);for(let n=0;n<r;n+=16){const r=n/16;t[r]=Matrix4.unpack(e,n,t[r])}return t},Matrix4.clone=function(e,t){if(defined(e))return defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},Matrix4.fromArray=Matrix4.unpack,Matrix4.fromColumnMajorArray=function(e,t){return Check$1.defined("values",e),Matrix4.clone(e,t)},Matrix4.fromRowMajorArray=function(e,t){return Check$1.defined("values",e),defined(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new Matrix4(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},Matrix4.fromRotationTranslation=function(e,t,r){return Check$1.typeOf.object("rotation",e),t=defaultValue(t,Cartesian3.ZERO),defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new Matrix4(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},Matrix4.fromTranslationQuaternionRotationScale=function(e,t,r,n){Check$1.typeOf.object("translation",e),Check$1.typeOf.object("rotation",t),Check$1.typeOf.object("scale",r),defined(n)||(n=new Matrix4);const a=r.x,i=r.y,o=r.z,s=t.x*t.x,c=t.x*t.y,u=t.x*t.z,l=t.x*t.w,d=t.y*t.y,p=t.y*t.z,h=t.y*t.w,f=t.z*t.z,m=t.z*t.w,y=t.w*t.w,g=s-d-f+y,C=2*(c-m),b=2*(u+h),x=2*(c+m),w=-s+d-f+y,v=2*(p-l),_=2*(u-h),O=2*(p+l),$=-s-d+f+y;return n[0]=g*a,n[1]=x*a,n[2]=_*a,n[3]=0,n[4]=C*i,n[5]=w*i,n[6]=O*i,n[7]=0,n[8]=b*o,n[9]=v*o,n[10]=$*o,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},Matrix4.fromTranslationRotationScale=function(e,t){return Check$1.typeOf.object("translationRotationScale",e),Matrix4.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},Matrix4.fromTranslation=function(e,t){return Check$1.typeOf.object("translation",e),Matrix4.fromRotationTranslation(Matrix3.IDENTITY,e,t)},Matrix4.fromScale=function(e,t){return Check$1.typeOf.object("scale",e),defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Matrix4(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},Matrix4.fromUniformScale=function(e,t){return Check$1.typeOf.number("scale",e),defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Matrix4(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)},Matrix4.fromRotation=function(e,t){return Check$1.typeOf.object("rotation",e),defined(t)||(t=new Matrix4),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};const fromCameraF=new Cartesian3,fromCameraR=new Cartesian3,fromCameraU=new Cartesian3;Matrix4.fromCamera=function(e,t){Check$1.typeOf.object("camera",e);const r=e.position,n=e.direction,a=e.up;Check$1.typeOf.object("camera.position",r),Check$1.typeOf.object("camera.direction",n),Check$1.typeOf.object("camera.up",a),Cartesian3.normalize(n,fromCameraF),Cartesian3.normalize(Cartesian3.cross(fromCameraF,a,fromCameraR),fromCameraR),Cartesian3.normalize(Cartesian3.cross(fromCameraR,fromCameraF,fromCameraU),fromCameraU);const i=fromCameraR.x,o=fromCameraR.y,s=fromCameraR.z,c=fromCameraF.x,u=fromCameraF.y,l=fromCameraF.z,d=fromCameraU.x,p=fromCameraU.y,h=fromCameraU.z,f=r.x,m=r.y,y=r.z,g=i*-f+o*-m+s*-y,C=d*-f+p*-m+h*-y,b=c*f+u*m+l*y;return defined(t)?(t[0]=i,t[1]=d,t[2]=-c,t[3]=0,t[4]=o,t[5]=p,t[6]=-u,t[7]=0,t[8]=s,t[9]=h,t[10]=-l,t[11]=0,t[12]=g,t[13]=C,t[14]=b,t[15]=1,t):new Matrix4(i,o,s,g,d,p,h,C,-c,-u,-l,b,0,0,0,1)},Matrix4.computePerspectiveFieldOfView=function(e,t,r,n,a){Check$1.typeOf.number.greaterThan("fovY",e,0),Check$1.typeOf.number.lessThan("fovY",e,Math.PI),Check$1.typeOf.number.greaterThan("near",r,0),Check$1.typeOf.number.greaterThan("far",n,0),Check$1.typeOf.object("result",a);const i=1/Math.tan(.5*e),o=i/t,s=(n+r)/(r-n),c=2*n*r/(r-n);return a[0]=o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=s,a[11]=-1,a[12]=0,a[13]=0,a[14]=c,a[15]=0,a},Matrix4.computeOrthographicOffCenter=function(e,t,r,n,a,i,o){Check$1.typeOf.number("left",e),Check$1.typeOf.number("right",t),Check$1.typeOf.number("bottom",r),Check$1.typeOf.number("top",n),Check$1.typeOf.number("near",a),Check$1.typeOf.number("far",i),Check$1.typeOf.object("result",o);let s=1/(t-e),c=1/(n-r),u=1/(i-a);const l=-(t+e)*s,d=-(n+r)*c,p=-(i+a)*u;return s*=2,c*=2,u*=-2,o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=u,o[11]=0,o[12]=l,o[13]=d,o[14]=p,o[15]=1,o},Matrix4.computePerspectiveOffCenter=function(e,t,r,n,a,i,o){Check$1.typeOf.number("left",e),Check$1.typeOf.number("right",t),Check$1.typeOf.number("bottom",r),Check$1.typeOf.number("top",n),Check$1.typeOf.number("near",a),Check$1.typeOf.number("far",i),Check$1.typeOf.object("result",o);const s=2*a/(t-e),c=2*a/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),d=-(i+a)/(i-a),p=-2*i*a/(i-a);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=u,o[9]=l,o[10]=d,o[11]=-1,o[12]=0,o[13]=0,o[14]=p,o[15]=0,o},Matrix4.computeInfinitePerspectiveOffCenter=function(e,t,r,n,a,i){Check$1.typeOf.number("left",e),Check$1.typeOf.number("right",t),Check$1.typeOf.number("bottom",r),Check$1.typeOf.number("top",n),Check$1.typeOf.number("near",a),Check$1.typeOf.object("result",i);const o=2*a/(t-e),s=2*a/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),l=-2*a;return i[0]=o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=c,i[9]=u,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=l,i[15]=0,i},Matrix4.computeViewportTransformation=function(e,t,r,n){defined(n)||(n=new Matrix4),e=defaultValue(e,defaultValue.EMPTY_OBJECT);const a=defaultValue(e.x,0),i=defaultValue(e.y,0),o=defaultValue(e.width,0),s=defaultValue(e.height,0);t=defaultValue(t,0);const c=.5*o,u=.5*s,l=.5*((r=defaultValue(r,1))-t),d=c,p=u,h=l,f=a+c,m=i+u,y=t+l;return n[0]=d,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=p,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=h,n[11]=0,n[12]=f,n[13]=m,n[14]=y,n[15]=1,n},Matrix4.computeView=function(e,t,r,n,a){return Check$1.typeOf.object("position",e),Check$1.typeOf.object("direction",t),Check$1.typeOf.object("up",r),Check$1.typeOf.object("right",n),Check$1.typeOf.object("result",a),a[0]=n.x,a[1]=r.x,a[2]=-t.x,a[3]=0,a[4]=n.y,a[5]=r.y,a[6]=-t.y,a[7]=0,a[8]=n.z,a[9]=r.z,a[10]=-t.z,a[11]=0,a[12]=-Cartesian3.dot(n,e),a[13]=-Cartesian3.dot(r,e),a[14]=Cartesian3.dot(t,e),a[15]=1,a},Matrix4.toArray=function(e,t){return Check$1.typeOf.object("matrix",e),defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},Matrix4.getElementIndex=function(e,t){return Check$1.typeOf.number.greaterThanOrEquals("row",t,0),Check$1.typeOf.number.lessThanOrEquals("row",t,3),Check$1.typeOf.number.greaterThanOrEquals("column",e,0),Check$1.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},Matrix4.getColumn=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,3),Check$1.typeOf.object("result",r);const n=4*t,a=e[n],i=e[n+1],o=e[n+2],s=e[n+3];return r.x=a,r.y=i,r.z=o,r.w=s,r},Matrix4.setColumn=function(e,t,r,n){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,3),Check$1.typeOf.object("cartesian",r),Check$1.typeOf.object("result",n);const a=4*t;return(n=Matrix4.clone(e,n))[a]=r.x,n[a+1]=r.y,n[a+2]=r.z,n[a+3]=r.w,n},Matrix4.getRow=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,3),Check$1.typeOf.object("result",r);const n=e[t],a=e[t+4],i=e[t+8],o=e[t+12];return r.x=n,r.y=a,r.z=i,r.w=o,r},Matrix4.setRow=function(e,t,r,n){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number.greaterThanOrEquals("index",t,0),Check$1.typeOf.number.lessThanOrEquals("index",t,3),Check$1.typeOf.object("cartesian",r),Check$1.typeOf.object("result",n),(n=Matrix4.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n},Matrix4.setTranslation=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("translation",t),Check$1.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};const scaleScratch1=new Cartesian3;Matrix4.setScale=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("scale",t),Check$1.typeOf.object("result",r);const n=Matrix4.getScale(e,scaleScratch1),a=t.x/n.x,i=t.y/n.y,o=t.z/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3],r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7],r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};const scaleScratch2=new Cartesian3;Matrix4.setUniformScale=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scale",t),Check$1.typeOf.object("result",r);const n=Matrix4.getScale(e,scaleScratch2),a=t/n.x,i=t/n.y,o=t/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3],r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7],r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};const scratchColumn=new Cartesian3;Matrix4.getScale=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t.x=Cartesian3.magnitude(Cartesian3.fromElements(e[0],e[1],e[2],scratchColumn)),t.y=Cartesian3.magnitude(Cartesian3.fromElements(e[4],e[5],e[6],scratchColumn)),t.z=Cartesian3.magnitude(Cartesian3.fromElements(e[8],e[9],e[10],scratchColumn)),t};const scaleScratch3=new Cartesian3;Matrix4.getMaximumScale=function(e){return Matrix4.getScale(e,scaleScratch3),Cartesian3.maximumComponent(scaleScratch3)};const scaleScratch4=new Cartesian3;Matrix4.setRotation=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",r);const n=Matrix4.getScale(e,scaleScratch4);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=e[3],r[4]=t[3]*n.y,r[5]=t[4]*n.y,r[6]=t[5]*n.y,r[7]=e[7],r[8]=t[6]*n.z,r[9]=t[7]*n.z,r[10]=t[8]*n.z,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};const scaleScratch5=new Cartesian3;Matrix4.getRotation=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=Matrix4.getScale(e,scaleScratch5);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[4]/r.y,t[4]=e[5]/r.y,t[5]=e[6]/r.y,t[6]=e[8]/r.z,t[7]=e[9]/r.z,t[8]=e[10]/r.z,t},Matrix4.multiply=function(e,t,r){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r);const n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],l=e[7],d=e[8],p=e[9],h=e[10],f=e[11],m=e[12],y=e[13],g=e[14],C=e[15],b=t[0],x=t[1],w=t[2],v=t[3],_=t[4],O=t[5],$=t[6],S=t[7],M=t[8],E=t[9],k=t[10],R=t[11],T=t[12],q=t[13],D=t[14],A=t[15],I=n*b+s*x+d*w+m*v,j=a*b+c*x+p*w+y*v,P=i*b+u*x+h*w+g*v,z=o*b+l*x+f*w+C*v,U=n*_+s*O+d*$+m*S,N=a*_+c*O+p*$+y*S,F=i*_+u*O+h*$+g*S,Q=o*_+l*O+f*$+C*S,L=n*M+s*E+d*k+m*R,V=a*M+c*E+p*k+y*R,B=i*M+u*E+h*k+g*R,W=o*M+l*E+f*k+C*R,H=n*T+s*q+d*D+m*A,J=a*T+c*q+p*D+y*A,Y=i*T+u*q+h*D+g*A,G=o*T+l*q+f*D+C*A;return r[0]=I,r[1]=j,r[2]=P,r[3]=z,r[4]=U,r[5]=N,r[6]=F,r[7]=Q,r[8]=L,r[9]=V,r[10]=B,r[11]=W,r[12]=H,r[13]=J,r[14]=Y,r[15]=G,r},Matrix4.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},Matrix4.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},Matrix4.multiplyTransformation=function(e,t,r){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r);const n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],c=e[6],u=e[8],l=e[9],d=e[10],p=e[12],h=e[13],f=e[14],m=t[0],y=t[1],g=t[2],C=t[4],b=t[5],x=t[6],w=t[8],v=t[9],_=t[10],O=t[12],$=t[13],S=t[14],M=n*m+o*y+u*g,E=a*m+s*y+l*g,k=i*m+c*y+d*g,R=n*C+o*b+u*x,T=a*C+s*b+l*x,q=i*C+c*b+d*x,D=n*w+o*v+u*_,A=a*w+s*v+l*_,I=i*w+c*v+d*_,j=n*O+o*$+u*S+p,P=a*O+s*$+l*S+h,z=i*O+c*$+d*S+f;return r[0]=M,r[1]=E,r[2]=k,r[3]=0,r[4]=R,r[5]=T,r[6]=q,r[7]=0,r[8]=D,r[9]=A,r[10]=I,r[11]=0,r[12]=j,r[13]=P,r[14]=z,r[15]=1,r},Matrix4.multiplyByMatrix3=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("rotation",t),Check$1.typeOf.object("result",r);const n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],c=e[6],u=e[8],l=e[9],d=e[10],p=t[0],h=t[1],f=t[2],m=t[3],y=t[4],g=t[5],C=t[6],b=t[7],x=t[8],w=n*p+o*h+u*f,v=a*p+s*h+l*f,_=i*p+c*h+d*f,O=n*m+o*y+u*g,$=a*m+s*y+l*g,S=i*m+c*y+d*g,M=n*C+o*b+u*x,E=a*C+s*b+l*x,k=i*C+c*b+d*x;return r[0]=w,r[1]=v,r[2]=_,r[3]=0,r[4]=O,r[5]=$,r[6]=S,r[7]=0,r[8]=M,r[9]=E,r[10]=k,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},Matrix4.multiplyByTranslation=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("translation",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z,o=n*e[0]+a*e[4]+i*e[8]+e[12],s=n*e[1]+a*e[5]+i*e[9]+e[13],c=n*e[2]+a*e[6]+i*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=s,r[14]=c,r[15]=e[15],r},Matrix4.multiplyByScale=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("scale",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z;return 1===n&&1===a&&1===i?Matrix4.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=e[7],r[8]=i*e[8],r[9]=i*e[9],r[10]=i*e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r)},Matrix4.multiplyByUniformScale=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scale",t),Check$1.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3],r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7],r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},Matrix4.multiplyByVector=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("cartesian",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z,o=t.w,s=e[0]*n+e[4]*a+e[8]*i+e[12]*o,c=e[1]*n+e[5]*a+e[9]*i+e[13]*o,u=e[2]*n+e[6]*a+e[10]*i+e[14]*o,l=e[3]*n+e[7]*a+e[11]*i+e[15]*o;return r.x=s,r.y=c,r.z=u,r.w=l,r},Matrix4.multiplyByPointAsVector=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("cartesian",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i,s=e[1]*n+e[5]*a+e[9]*i,c=e[2]*n+e[6]*a+e[10]*i;return r.x=o,r.y=s,r.z=c,r},Matrix4.multiplyByPoint=function(e,t,r){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("cartesian",t),Check$1.typeOf.object("result",r);const n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i+e[12],s=e[1]*n+e[5]*a+e[9]*i+e[13],c=e[2]*n+e[6]*a+e[10]*i+e[14];return r.x=o,r.y=s,r.z=c,r},Matrix4.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},Matrix4.negate=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},Matrix4.transpose=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=o,t[14]=s,t[15]=e[15],t},Matrix4.abs=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},Matrix4.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},Matrix4.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},Matrix4.getTranslation=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},Matrix4.getMatrix3=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};const scratchInverseRotation=new Matrix3,scratchMatrix3Zero=new Matrix3,scratchBottomRow=new Cartesian4,scratchExpectedBottomRow=new Cartesian4(0,0,0,1);Matrix4.inverse=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=e[0],n=e[4],a=e[8],i=e[12],o=e[1],s=e[5],c=e[9],u=e[13],l=e[2],d=e[6],p=e[10],h=e[14],f=e[3],m=e[7],y=e[11],g=e[15];let C=p*g,b=h*y,x=d*g,w=h*m,v=d*y,_=p*m,O=l*g,$=h*f,S=l*y,M=p*f,E=l*m,k=d*f;const R=C*s+w*c+v*u-(b*s+x*c+_*u),T=b*o+O*c+M*u-(C*o+$*c+S*u),q=x*o+$*s+E*u-(w*o+O*s+k*u),D=_*o+S*s+k*c-(v*o+M*s+E*c),A=b*n+x*a+_*i-(C*n+w*a+v*i),I=C*r+$*a+S*i-(b*r+O*a+M*i),j=w*r+O*n+k*i-(x*r+$*n+E*i),P=v*r+M*n+E*a-(_*r+S*n+k*a);C=a*u,b=i*c,x=n*u,w=i*s,v=n*c,_=a*s,O=r*u,$=i*o,S=r*c,M=a*o,E=r*s,k=n*o;const z=C*m+w*y+v*g-(b*m+x*y+_*g),U=b*f+O*y+M*g-(C*f+$*y+S*g),N=x*f+$*m+E*g-(w*f+O*m+k*g),F=_*f+S*m+k*y-(v*f+M*m+E*y),Q=x*p+_*h+b*d-(v*h+C*d+w*p),L=S*h+C*l+$*p-(O*p+M*h+b*l),V=O*d+k*h+w*l-(E*h+x*l+$*d),B=E*p+v*l+M*d-(S*d+k*p+_*l);let W=r*R+n*T+a*q+i*D;if(Math.abs(W)<CesiumMath$1.EPSILON21){if(Matrix3.equalsEpsilon(Matrix4.getMatrix3(e,scratchInverseRotation),scratchMatrix3Zero,CesiumMath$1.EPSILON7)&&Cartesian4.equals(Matrix4.getRow(e,3,scratchBottomRow),scratchExpectedBottomRow))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new RuntimeError("matrix is not invertible because its determinate is zero.")}return W=1/W,t[0]=R*W,t[1]=T*W,t[2]=q*W,t[3]=D*W,t[4]=A*W,t[5]=I*W,t[6]=j*W,t[7]=P*W,t[8]=z*W,t[9]=U*W,t[10]=N*W,t[11]=F*W,t[12]=Q*W,t[13]=L*W,t[14]=V*W,t[15]=B*W,t},Matrix4.inverseTransformation=function(e,t){Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t);const r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],s=e[6],c=e[8],u=e[9],l=e[10],d=e[12],p=e[13],h=e[14],f=-r*d-n*p-a*h,m=-i*d-o*p-s*h,y=-c*d-u*p-l*h;return t[0]=r,t[1]=i,t[2]=c,t[3]=0,t[4]=n,t[5]=o,t[6]=u,t[7]=0,t[8]=a,t[9]=s,t[10]=l,t[11]=0,t[12]=f,t[13]=m,t[14]=y,t[15]=1,t};const scratchTransposeMatrix=new Matrix4;Matrix4.inverseTranspose=function(e,t){return Check$1.typeOf.object("matrix",e),Check$1.typeOf.object("result",t),Matrix4.inverse(Matrix4.transpose(e,scratchTransposeMatrix),t)},Matrix4.IDENTITY=Object.freeze(new Matrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Matrix4.ZERO=Object.freeze(new Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Matrix4.COLUMN0ROW0=0,Matrix4.COLUMN0ROW1=1,Matrix4.COLUMN0ROW2=2,Matrix4.COLUMN0ROW3=3,Matrix4.COLUMN1ROW0=4,Matrix4.COLUMN1ROW1=5,Matrix4.COLUMN1ROW2=6,Matrix4.COLUMN1ROW3=7,Matrix4.COLUMN2ROW0=8,Matrix4.COLUMN2ROW1=9,Matrix4.COLUMN2ROW2=10,Matrix4.COLUMN2ROW3=11,Matrix4.COLUMN3ROW0=12,Matrix4.COLUMN3ROW1=13,Matrix4.COLUMN3ROW2=14,Matrix4.COLUMN3ROW3=15,Object.defineProperties(Matrix4.prototype,{length:{get:function(){return Matrix4.packedLength}}}),Matrix4.prototype.clone=function(e){return Matrix4.clone(this,e)},Matrix4.prototype.equals=function(e){return Matrix4.equals(this,e)},Matrix4.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},Matrix4.prototype.equalsEpsilon=function(e,t){return Matrix4.equalsEpsilon(this,e,t)},Matrix4.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})\n(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})\n(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})\n(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var URI={exports:{}},punycode={exports:{}},hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,e=punycode,t=punycode.exports,function(r){var n=t&&!t.nodeType&&t,a=e&&!e.nodeType&&e,i="object"==typeof commonjsGlobal&&commonjsGlobal;i.global!==i&&i.window!==i&&i.self!==i||(r=i);var o,s,c=2147483647,u=36,l=1,d=26,p=38,h=700,f=72,m=128,y="-",g=/^xn--/,C=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-l,v=Math.floor,_=String.fromCharCode;function O(e){throw new RangeError(x[e])}function $(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function S(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+$((e=e.replace(b,".")).split("."),t).join(".")}function M(e){for(var t,r,n=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function E(e){return $(e,(function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function R(e,t,r){var n=0;for(e=r?v(e/h):e>>1,e+=v(e/t);e>w*d>>1;n+=u)e=v(e/w);return v(n+(w+1)*e/(e+p))}function T(e){var t,r,n,a,i,o,s,p,h,g,C,b=[],x=e.length,w=0,_=m,$=f;for((r=e.lastIndexOf(y))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&O("not-basic"),b.push(e.charCodeAt(n));for(a=r>0?r+1:0;a<x;){for(i=w,o=1,s=u;a>=x&&O("invalid-input"),((p=(C=e.charCodeAt(a++))-48<10?C-22:C-65<26?C-65:C-97<26?C-97:u)>=u||p>v((c-w)/o))&&O("overflow"),w+=p*o,!(p<(h=s<=$?l:s>=$+d?d:s-$));s+=u)o>v(c/(g=u-h))&&O("overflow"),o*=g;$=R(w-i,t=b.length+1,0==i),v(w/t)>c-_&&O("overflow"),_+=v(w/t),w%=t,b.splice(w++,0,_)}return E(b)}function q(e){var t,r,n,a,i,o,s,p,h,g,C,b,x,w,$,S=[];for(b=(e=M(e)).length,t=m,r=0,i=f,o=0;o<b;++o)(C=e[o])<128&&S.push(_(C));for(n=a=S.length,a&&S.push(y);n<b;){for(s=c,o=0;o<b;++o)(C=e[o])>=t&&C<s&&(s=C);for(s-t>v((c-r)/(x=n+1))&&O("overflow"),r+=(s-t)*x,t=s,o=0;o<b;++o)if((C=e[o])<t&&++r>c&&O("overflow"),C==t){for(p=r,h=u;!(p<(g=h<=i?l:h>=i+d?d:h-i));h+=u)$=p-g,w=u-g,S.push(_(k(g+$%w,0))),p=v($/w);S.push(_(k(p,0))),i=R(r,x,n==a),r=0,++n}++r,++t}return S.join("")}if(o={version:"1.3.2",ucs2:{decode:M,encode:E},decode:T,encode:q,toASCII:function(e){return S(e,(function(e){return C.test(e)?"xn--"+q(e):e}))},toUnicode:function(e){return S(e,(function(e){return g.test(e)?T(e.slice(4).toLowerCase()):e}))}},n&&a)if(e.exports==n)a.exports=o;else for(s in o)o.hasOwnProperty(s)&&(n[s]=o[s]);else r.punycode=o}(commonjsGlobal)),punycode.exports;var e,t}
/*! https://mths.be/punycode v1.4.0 by @mathias */
punycode.exports;var IPv6={exports:{}},hasRequiredIPv6;
/*!
     * URI.js - Mutating URLs
     * IPv6 Support
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */function requireIPv6(){return hasRequiredIPv6||(hasRequiredIPv6=1,t=commonjsGlobal,r=function(e){var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),a=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[a-1]&&""===n[a-2]&&n.pop(),-1!==n[(a=n.length)-1].indexOf(".")&&(i=7),t=0;t<a&&""!==n[t];t++);if(t<i)for(n.splice(t,1,"0000");n.length<i;)n.splice(t,0,"0000");for(var o=0;o<i;o++){r=n[o].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[o]=r.join("")}var c=-1,u=0,l=0,d=-1,p=!1;for(o=0;o<i;o++)p?"0"===n[o]?l+=1:(p=!1,l>u&&(c=d,u=l)):"0"===n[o]&&(p=!0,d=o,l=1);l>u&&(c=d,u=l),u>1&&n.splice(c,u,""),a=n.length;var h="";for(""===n[0]&&(h=":"),o=0;o<a&&(h+=n[o],o!==a-1);o++)h+=":";return""===n[a-1]&&(h+=":"),h},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}},(e=IPv6).exports?e.exports=r():t.IPv6=r(t)),IPv6.exports;var e,t,r}var SecondLevelDomains={exports:{}},hasRequiredSecondLevelDomains,module,root,factory;
/*!
     * URI.js - Mutating URLs
     * Second Level Domain (SLD) Support
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */function requireSecondLevelDomains(){return hasRequiredSecondLevelDomains||(hasRequiredSecondLevelDomains=1,t=commonjsGlobal,r=function(e){var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var a=r.list[e.slice(t+1)];return!!a&&a.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var a=r.list[e.slice(t+1)];return a?a.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r},(e=SecondLevelDomains).exports?e.exports=r():t.SecondLevelDomains=r(t)),SecondLevelDomains.exports;var e,t,r}
/*!
     * URI.js - Mutating URLs
     *
     * Version: 1.19.11
     *
     * Author: Rodney Rehm
     * Web: http://medialize.github.io/URI.js/
     *
     * Licensed under
     *   MIT License http://www.opensource.org/licenses/mit-license
     *
     */module=URI,root=commonjsGlobal,factory=function(e,t,r,n){var a=n&&n.URI;function i(e,t){var r=arguments.length>=1;if(!(this instanceof i))return r?arguments.length>=2?new i(e,t):new i(e):new i;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}i.version="1.19.11";var o=i.prototype,s=Object.prototype.hasOwnProperty;function c(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function l(e){return"Array"===u(e)}function d(e,t){var r,n,a={};if("RegExp"===u(t))a=null;else if(l(t))for(r=0,n=t.length;r<n;r++)a[t[r]]=!0;else a[t]=!0;for(r=0,n=e.length;r<n;r++)(a&&void 0!==a[e[r]]||!a&&t.test(e[r]))&&(e.splice(r,1),n--,r--);return e}function p(e,t){var r,n;if(l(t)){for(r=0,n=t.length;r<n;r++)if(!p(e,t[r]))return!1;return!0}var a=u(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===a){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function h(e,t){if(!l(e)||!l(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function f(e){return e.replace(/^\/+|\/+$/g,"")}function m(e){return escape(e)}function y(e){return encodeURIComponent(e).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return i.domAttributes[t]}},i.encode=y,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=y,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(e,t){var r=i.encode(e+"");return void 0===t&&(t=i.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},i.decodeQuery=function(e,t){e+="",void 0===t&&(t=i.escapeQuerySpace);try{return i.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var g,C={encode:"encode",decode:"decode"},b=function(e,t){return function(r){try{return i[t](r+"").replace(i.characters[e][t].expression,(function(r){return i.characters[e][t].map[r]}))}catch(e){return r}}};for(g in C)i[g+"PathSegment"]=b("pathname",C[g]),i[g+"UrnPathSegment"]=b("urnpath",C[g]);var x=function(e,t,r){return function(n){var a;a=r?function(e){return i[t](i[r](e))}:i[t];for(var o=(n+"").split(e),s=0,c=o.length;s<c;s++)o[s]=a(o[s]);return o.join(e)}};function w(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function v(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}i.decodePath=x("/","decodePathSegment"),i.decodeUrnPath=x(":","decodeUrnPathSegment"),i.recodePath=x("/","encodePathSegment","decode"),i.recodeUrnPath=x(":","encodeUrnPathSegment","decode"),i.encodeReserved=b("reserved","encode"),i.parse=function(e,t){var r;return t||(t={preventInvalidHostname:i.preventInvalidHostname}),(r=(e=(e=e.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},i.parseHost=function(e,t){e||(e="");var r,n,a=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===a&&(a=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,a)||null,"/"===t.port&&(t.port=null);else{var o=e.indexOf(":"),s=e.indexOf("/"),c=e.indexOf(":",o+1);-1!==c&&(-1===s||c<s)?(t.hostname=e.substring(0,a)||null,t.port=null):(n=e.substring(0,a).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(a).charAt(0)&&(a++,e="/"+e),t.preventInvalidHostname&&i.ensureValidHostname(t.hostname,t.protocol),t.port&&i.ensureValidPort(t.port),e.substring(a)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,a=e.indexOf("/"),o=e.lastIndexOf("@",a>-1?a:e.length-1);return o>-1&&(-1===a||o<a)?(n=e.substring(0,o).split(":"),t.username=n[0]?i.decode(n[0]):null,n.shift(),t.password=n[0]?i.decode(n.join(":")):null,e=r.substring(o+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,a,o={},c=e.split("&"),u=c.length,l=0;l<u;l++)r=c[l].split("="),n=i.decodeQuery(r.shift(),t),a=r.length?i.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(s.call(o,n)?("string"!=typeof o[n]&&null!==o[n]||(o[n]=[o[n]]),o[n].push(a)):o[n]=a);return o},i.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username)),e.password&&(t+=":"+i.encode(e.password)),t&&(t+="@"),t},i.buildQuery=function(e,t,r){var n,a,o,c,u="";for(a in e)if("__proto__"!==a&&s.call(e,a))if(l(e[a]))for(n={},o=0,c=e[a].length;o<c;o++)void 0!==e[a][o]&&void 0===n[e[a][o]+""]&&(u+="&"+i.buildQueryParameter(a,e[a][o],r),!0!==t&&(n[e[a][o]+""]=!0));else void 0!==e[a]&&(u+="&"+i.buildQueryParameter(a,e[a],r));return u.substring(1)},i.buildQueryParameter=function(e,t,r){return i.encodeQuery(e,r)+(null!==t?"="+i.encodeQuery(t,r):"")},i.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),l(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},i.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},i.removeQuery=function(e,t,r){var n,a,o;if(l(t))for(n=0,a=t.length;n<a;n++)e[t[n]]=void 0;else if("RegExp"===u(t))for(o in e)t.test(o)&&(e[o]=void 0);else if("object"==typeof t)for(o in t)s.call(t,o)&&i.removeQuery(e,o,t[o]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===u(r)?!l(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=d(e[t],r):e[t]!==String(r)||l(r)&&1!==r.length?l(e[t])&&(e[t]=d(e[t],r)):e[t]=void 0:e[t]=void 0}},i.hasQuery=function(e,t,r,n){switch(u(t)){case"String":break;case"RegExp":for(var a in e)if(s.call(e,a)&&t.test(a)&&(void 0===r||i.hasQuery(e,a,r)))return!0;return!1;case"Object":for(var o in t)if(s.call(t,o)&&!i.hasQuery(e,o,t[o]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(l(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!l(e[t])&&(n?p:h)(e[t],r);case"RegExp":return l(e[t])?!!n&&p(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return l(e[t])?!!n&&p(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var a=new i(arguments[n]);e.push(a);for(var o=a.segment(),s=0;s<o.length;s++)"string"==typeof o[s]&&t.push(o[s]),o[s]&&r++}if(!t.length||!r)return new i("");var c=new i("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||c.path("/"+c.path()),c.normalize()},i.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t,r){r||(r={});var n=r.start||i.findUri.start,a=r.end||i.findUri.end,o=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,c=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var u=n.exec(e);if(!u)break;var l=u.index;if(r.ignoreHtml){var d=e.slice(Math.max(l-3,0),l);if(d&&c.test(d))continue}for(var p=l+e.slice(l).search(a),h=e.slice(l,p),f=-1;;){var m=s.exec(h);if(!m)break;var y=m.index+m[0].length;f=Math.max(f,y)}if(!((h=f>-1?h.slice(0,f)+h.slice(f).replace(o,""):h.replace(o,"")).length<=u[0].length||r.ignore&&r.ignore.test(h))){var g=t(h,l,p=l+h.length,e);void 0!==g?(g=String(g),e=e.slice(0,l)+g+e.slice(p),n.lastIndex=l+g.length):n.lastIndex=p}}return n.lastIndex=0,e},i.ensureValidHostname=function(t,r){var n=!!t,a=!1;if(!!r&&(a=p(i.hostProtocols,r)),a&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(i.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},i.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=a),this},o.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},o.clone=function(){return new i(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},o.protocol=w("protocol"),o.username=w("username"),o.password=w("password"),o.hostname=w("hostname"),o.port=w("port"),o.query=v("query","?"),o.fragment=v("fragment","#"),o.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},o.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},o.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=e?i.recodeUrnPath(e):"":this._parts.path=e?i.recodePath(e):"/",this.build(!t),this},o.path=o.pathname,o.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=i._parts();var n=e instanceof i,a="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName&&(e=e[i.getDomAttribute(e)]||"",a=!1),!n&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=i.parse(String(e),this._parts);else{if(!n&&!a)throw new TypeError("invalid input");var o=n?e._parts:e;for(r in o)"query"!==r&&s.call(this._parts,r)&&(this._parts[r]=o[r]);o.query&&this.query(o.query,!1)}return this.build(!t),this},o.is=function(e){var t=!1,n=!1,a=!1,o=!1,s=!1,c=!1,u=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,n=i.ip4_expression.test(this._parts.hostname),a=i.ip6_expression.test(this._parts.hostname),s=(o=!(t=n||a))&&r&&r.has(this._parts.hostname),c=o&&i.idn_expression.test(this._parts.hostname),u=o&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return a;case"idn":return c;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var _=o.protocol,O=o.port,$=o.hostname;o.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _.call(this,e,t)},o.scheme=o.protocol,o.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),i.ensureValidPort(e))),O.call(this,e,t))},o.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(e,this._parts.protocol)}return $.call(this,e,t)},o.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},o.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},o.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},o.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this},o.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},o.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,n),o=new RegExp("^"+c(a));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&i.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},o.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},o.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),a=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[a.toLowerCase()]&&r.get(this._parts.hostname)||a}var i;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');i=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},o.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(n):n}var a=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,a),s=new RegExp("^"+c(o));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},o.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?i.decodePathSegment(n):n}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var o=new RegExp(c(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(o,e),a?this.normalizePath(t):this.build(!t),this},o.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,a=this.filename(),o=a.lastIndexOf(".");return-1===o?"":(r=a.substring(o+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var s,u=this.suffix();if(u)s=e?new RegExp(c(u)+"$"):new RegExp(c("."+u)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return s&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},o.segment=function(e,t,r){var n=this._parts.urn?":":"/",a=this.path(),i="/"===a.substring(0,1),o=a.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&o.shift(),e<0&&(e=Math.max(o.length+e,0)),void 0===t)return void 0===e?o:o[e];if(null===e||void 0===o[e])if(l(t)){o=[];for(var s=0,c=t.length;s<c;s++)(t[s].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(f(t[s])))}else(t||"string"==typeof t)&&(t=f(t),""===o[o.length-1]?o[o.length-1]=t:o.push(t));else t?o[e]=f(t):o.splice(e,1);return i&&o.unshift(""),this.path(o.join(n),r)},o.segmentCoded=function(e,t,r){var n,a,o;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(l(n=this.segment(e,t,r)))for(a=0,o=n.length;a<o;a++)n[a]=i.decode(n[a]);else n=void 0!==n?i.decode(n):void 0;return n}if(l(t))for(a=0,o=t.length;a<o;a++)t[a]=i.encode(t[a]);else t="string"==typeof t||t instanceof String?i.encode(t):t;return this.segment(e,t,r)};var S=o.query;return o.query=function(e,t){if(!0===e)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},o.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var a in e)s.call(e,a)&&(n[a]=e[a])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},o.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},o.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},o.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,e,t,r)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},o.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},o.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},o.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,a,o="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(o=r.substring(1).match(/^(\.\.\/)+/)||"")&&(o=o[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(a=r.substring(0,n).lastIndexOf("/"))&&(a=n),r=r.substring(0,a)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=o+r.substring(1)),this._parts.path=r,this.build(!e),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},o.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var e=i.encode,t=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},o.unicode=function(){var e=i.encode,t=i.decode;i.encode=y,i.decode=unescape;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},o.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",a=0,o=t._parts.query.split("&"),s=o.length;a<s;a++){var c=(o[a]||"").split("=");n+="&"+i.decodeQuery(c[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==c[1]&&(n+="="+i.decodeQuery(c[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(t.hash(),!0)},o.absoluteTo=function(e){var t,r,n,a=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof i||(e=new i(e)),a._parts.protocol)return a;if(a._parts.protocol=e._parts.protocol,this._parts.hostname)return a;for(r=0;n=o[r];r++)a._parts[n]=e._parts[n];return a._parts.path?(".."===a._parts.path.substring(-2)&&(a._parts.path+="/"),"/"!==a.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),a._parts.path=(t?t+"/":"")+a._parts.path,a.normalizePath())):(a._parts.path=e._parts.path,a._parts.query||(a._parts.query=e._parts.query)),a.build(),a},o.relativeTo=function(e){var t,r,n,a,o,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new i(e).normalize(),t=s._parts,r=e._parts,a=s.path(),o=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==r.hostname||t.port!==r.port)return s.build();if(t.hostname=null,t.port=null,a===o)return t.path="",s.build();if(!(n=i.commonPath(a,o)))return s.build();var c=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=c+t.path.substring(n.length)||"./",s.build()},o.equals=function(e){var t,r,n,a,o,c=this.clone(),u=new i(e),d={};if(c.normalize(),u.normalize(),c.toString()===u.toString())return!0;if(n=c.query(),a=u.query(),c.query(""),u.query(""),c.toString()!==u.toString())return!1;if(n.length!==a.length)return!1;for(o in t=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(a,this._parts.escapeQuerySpace),t)if(s.call(t,o)){if(l(t[o])){if(!h(t[o],r[o]))return!1}else if(t[o]!==r[o])return!1;d[o]=!0}for(o in r)if(s.call(r,o)&&!d[o])return!1;return!0},o.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},o.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},o.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},i},module.exports?module.exports=factory(requirePunycode(),requireIPv6(),requireSecondLevelDomains()):root.URI=factory(root.punycode,root.IPv6,root.SecondLevelDomains,root);var URIExports=URI.exports,Uri=getDefaultExportFromCjs(URIExports);function getAbsoluteUri(e,t){let r;return"undefined"!=typeof document&&(r=document),getAbsoluteUri._implementation(e,t,r)}function appendForwardSlash(e){return 0!==e.length&&"/"===e[e.length-1]||(e=`${e}/`),e}function clone(e,t){if(null===e||"object"!=typeof e)return e;t=defaultValue(t,!1);const r=new e.constructor;for(const n in e)if(e.hasOwnProperty(n)){let a=e[n];t&&(a=clone(a,t)),r[n]=a}return r}function combine(e,t,r){r=defaultValue(r,!1);const n={},a=defined(e),i=defined(t);let o,s,c;if(a)for(o in e)e.hasOwnProperty(o)&&(s=e[o],i&&r&&"object"==typeof s&&t.hasOwnProperty(o)?(c=t[o],n[o]="object"==typeof c?combine(s,c,r):s):n[o]=s);if(i)for(o in t)t.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(c=t[o],n[o]=c);return n}function defer(){let e,t;const r=new Promise((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}}function getBaseUri(e,t){if(!defined(e))throw new DeveloperError("uri is required.");let r="";const n=e.lastIndexOf("/");return-1!==n&&(r=e.substring(0,n+1)),t?(0!==(e=new Uri(e)).query().length&&(r+=`?${e.query()}`),0!==e.fragment().length&&(r+=`#${e.fragment()}`),r):r}function getExtensionFromUri(e){if(!defined(e))throw new DeveloperError("uri is required.");const t=new Uri(e);t.normalize();let r=t.path(),n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),n=r.lastIndexOf("."),r=-1===n?"":r.substr(n+1),r}getAbsoluteUri._implementation=function(e,t,r){if(!defined(e))throw new DeveloperError("relative uri is required.");if(!defined(t)){if(void 0===r)return e;t=defaultValue(r.baseURI,r.location.href)}const n=new Uri(e);return""!==n.scheme()?n.toString():n.absoluteTo(t).toString()};const context2DsByWidthAndHeight={};function getImagePixels(e,t,r){defined(t)||(t=e.width),defined(r)||(r=e.height);let n=context2DsByWidthAndHeight[t];defined(n)||(n={},context2DsByWidthAndHeight[t]=n);let a=n[r];if(!defined(a)){const e=document.createElement("canvas");e.width=t,e.height=r,a=e.getContext("2d",{willReadFrequently:!0}),a.globalCompositeOperation="copy",n[r]=a}return a.drawImage(e,0,0,t,r),a.getImageData(0,0,t,r).data}const blobUriRegex=/^blob:/i;function isBlobUri(e){return Check$1.typeOf.string("uri",e),blobUriRegex.test(e)}let a$1;function isCrossOriginUrl(e){defined(a$1)||(a$1=document.createElement("a")),a$1.href=window.location.href;const t=a$1.host,r=a$1.protocol;return a$1.href=e,a$1.href=a$1.href,r!==a$1.protocol||t!==a$1.host}const dataUriRegex$1=/^data:/i;function isDataUri(e){return Check$1.typeOf.string("uri",e),dataUriRegex$1.test(e)}function loadAndExecuteScript(e){const t=document.createElement("script");return t.async=!0,t.src=e,new Promise(((e,r)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");const n=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,n.removeChild(t),e()},t.onerror=function(e){r(e)},n.appendChild(t)}))}function objectToQuery(e){if(!defined(e))throw new DeveloperError("obj is required.");let t="";for(const r in e)if(e.hasOwnProperty(r)){const n=e[r],a=`${encodeURIComponent(r)}=`;if(Array.isArray(n))for(let e=0,r=n.length;e<r;++e)t+=`${a+encodeURIComponent(n[e])}&`;else t+=`${a+encodeURIComponent(n)}&`}return t=t.slice(0,-1),t}function queryToObject(e){if(!defined(e))throw new DeveloperError("queryString is required.");const t={};if(""===e)return t;const r=e.replace(/\+/g,"%20").split(/[&;]/);for(let e=0,n=r.length;e<n;++e){const n=r[e].split("="),a=decodeURIComponent(n[0]);let i=n[1];i=defined(i)?decodeURIComponent(i):"";const o=t[a];"string"==typeof o?t[a]=[o,i]:Array.isArray(o)?o.push(i):t[a]=i}return t}const RequestState={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5};var RequestState$1=Object.freeze(RequestState);const RequestType={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3};var RequestType$1=Object.freeze(RequestType);function Request(e){e=defaultValue(e,defaultValue.EMPTY_OBJECT);const t=defaultValue(e.throttleByServer,!1),r=defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=defaultValue(e.type,RequestType$1.OTHER),this.serverKey=e.serverKey,this.state=RequestState$1.UNISSUED,this.deferred=void 0,this.cancelled=!1}function parseResponseHeaders(e){const t={};if(!e)return t;const r=e.split("\r\n");for(let e=0;e<r.length;++e){const n=r[e],a=n.indexOf(": ");if(a>0){const e=n.substring(0,a),r=n.substring(a+2);t[e]=r}}return t}function RequestErrorEvent(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=parseResponseHeaders(this.responseHeaders))}function Event(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function compareNumber(e,t){return t-e}function Heap(e){Check$1.typeOf.object("options",e),Check$1.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function sortRequests(e,t){return e.priority-t.priority}Request.prototype.cancel=function(){this.cancelled=!0},Request.prototype.clone=function(e){return defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=RequestState$1.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Request(this)},RequestErrorEvent.prototype.toString=function(){let e="Request has failed.";return defined(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e},Object.defineProperties(Event.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Event.prototype.addEventListener=function(e,t){Check$1.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);const r=this;return function(){r.removeEventListener(e,t)}},Event.prototype.removeEventListener=function(e,t){Check$1.typeOf.func("listener",e);const r=this._listeners,n=this._scopes;let a=-1;for(let i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},Event.prototype.raiseEvent=function(){let e;this._insideRaiseEvent=!0;const t=this._listeners,r=this._scopes;let n=t.length;for(e=0;e<n;e++){defined(t[e])&&t[e].apply(r[e],arguments)}const a=this._toRemove;if(n=a.length,n>0){for(a.sort(compareNumber),e=0;e<n;e++){const n=a[e];t.splice(n,1),r.splice(n,1)}a.length=0}this._insideRaiseEvent=!1},Object.defineProperties(Heap.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){Check$1.typeOf.number.greaterThanOrEquals("maximumLength",e,0);const t=this._length;if(e<t){const r=this._array;for(let n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),Heap.prototype.reserve=function(e){e=defaultValue(e,this._length),this._array.length=e},Heap.prototype.heapify=function(e){e=defaultValue(e,0);const t=this._length,r=this._comparator,n=this._array;let a=-1,i=!0;for(;i;){const o=2*(e+1),s=o-1;a=s<t&&r(n[s],n[e])<0?s:e,o<t&&r(n[o],n[a])<0&&(a=o),a!==e?(swap(n,a,e),e=a):i=!1}},Heap.prototype.resort=function(){const e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},Heap.prototype.insert=function(e){Check$1.defined("element",e);const t=this._array,r=this._comparator,n=this._maximumLength;let a,i=this._length++;for(i<t.length?t[i]=e:t.push(e);0!==i;){const e=Math.floor((i-1)/2);if(!(r(t[i],t[e])<0))break;swap(t,i,e),i=e}return defined(n)&&this._length>n&&(a=t[n],this._length=n),a},Heap.prototype.pop=function(e){if(e=defaultValue(e,0),0===this._length)return;Check$1.typeOf.number.lessThan("index",e,this._length);const t=this._array,r=t[e];return swap(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r};const statistics={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0};let priorityHeapLength=20;const requestHeap=new Heap({comparator:sortRequests});requestHeap.maximumLength=priorityHeapLength,requestHeap.reserve(priorityHeapLength);const activeRequests=[];let numberOfActiveRequestsByServer={};const pageUri="undefined"!=typeof document?new Uri(document.location.href):new Uri,requestCompletedEvent=new Event;function RequestScheduler(){}function updatePriority(e){defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function issueRequest(e){return e.state===RequestState$1.UNISSUED&&(e.state=RequestState$1.ISSUED,e.deferred=defer()),e.deferred.promise}function getRequestReceivedFunction(e){return function(t){if(e.state===RequestState$1.CANCELLED)return;const r=e.deferred;--statistics.numberOfActiveRequests,--numberOfActiveRequestsByServer[e.serverKey],requestCompletedEvent.raiseEvent(),e.state=RequestState$1.RECEIVED,e.deferred=void 0,r.resolve(t)}}function getRequestFailedFunction(e){return function(t){e.state!==RequestState$1.CANCELLED&&(++statistics.numberOfFailedRequests,--statistics.numberOfActiveRequests,--numberOfActiveRequestsByServer[e.serverKey],requestCompletedEvent.raiseEvent(t),e.state=RequestState$1.FAILED,e.deferred.reject(t))}}function startRequest(e){const t=issueRequest(e);return e.state=RequestState$1.ACTIVE,activeRequests.push(e),++statistics.numberOfActiveRequests,++statistics.numberOfActiveRequestsEver,++numberOfActiveRequestsByServer[e.serverKey],e.requestFunction().then(getRequestReceivedFunction(e)).catch(getRequestFailedFunction(e)),t}function cancelRequest(e){const t=e.state===RequestState$1.ACTIVE;if(e.state=RequestState$1.CANCELLED,++statistics.numberOfCancelledRequests,defined(e.deferred)){const t=e.deferred;e.deferred=void 0,t.reject()}t&&(--statistics.numberOfActiveRequests,--numberOfActiveRequestsByServer[e.serverKey],++statistics.numberOfCancelledActiveRequests),defined(e.cancelFunction)&&e.cancelFunction()}function updateStatistics(){RequestScheduler.debugShowStatistics&&(0===statistics.numberOfActiveRequests&&statistics.lastNumberOfActiveRequests>0&&(statistics.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${statistics.numberOfAttemptedRequests}`),statistics.numberOfAttemptedRequests=0),statistics.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${statistics.numberOfCancelledRequests}`),statistics.numberOfCancelledRequests=0),statistics.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${statistics.numberOfCancelledActiveRequests}`),statistics.numberOfCancelledActiveRequests=0),statistics.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${statistics.numberOfFailedRequests}`),statistics.numberOfFailedRequests=0)),statistics.lastNumberOfActiveRequests=statistics.numberOfActiveRequests)}RequestScheduler.maximumRequests=50,RequestScheduler.maximumRequestsPerServer=18,RequestScheduler.requestsByServer={},RequestScheduler.throttleRequests=!0,RequestScheduler.debugShowStatistics=!1,RequestScheduler.requestCompletedEvent=requestCompletedEvent,Object.defineProperties(RequestScheduler,{statistics:{get:function(){return statistics}},priorityHeapLength:{get:function(){return priorityHeapLength},set:function(e){if(e<priorityHeapLength)for(;requestHeap.length>e;){cancelRequest(requestHeap.pop())}priorityHeapLength=e,requestHeap.maximumLength=e,requestHeap.reserve(e)}}}),RequestScheduler.serverHasOpenSlots=function(e,t){t=defaultValue(t,1);const r=defaultValue(RequestScheduler.requestsByServer[e],RequestScheduler.maximumRequestsPerServer);return numberOfActiveRequestsByServer[e]+t<=r},RequestScheduler.heapHasOpenSlots=function(e){return requestHeap.length+e<=priorityHeapLength},RequestScheduler.update=function(){let e,t,r=0;const n=activeRequests.length;for(e=0;e<n;++e)t=activeRequests[e],t.cancelled&&cancelRequest(t),t.state===RequestState$1.ACTIVE?r>0&&(activeRequests[e-r]=t):++r;activeRequests.length-=r;const a=requestHeap.internalArray,i=requestHeap.length;for(e=0;e<i;++e)updatePriority(a[e]);requestHeap.resort();const o=Math.max(RequestScheduler.maximumRequests-activeRequests.length,0);let s=0;for(;s<o&&requestHeap.length>0;)t=requestHeap.pop(),t.cancelled?cancelRequest(t):!t.throttleByServer||RequestScheduler.serverHasOpenSlots(t.serverKey)?(startRequest(t),++s):cancelRequest(t);updateStatistics()},RequestScheduler.getServerKey=function(e){Check$1.typeOf.string("url",e);let t=new Uri(e);""===t.scheme()&&(t=t.absoluteTo(pageUri),t.normalize());let r=t.authority();/:/.test(r)||(r=`${r}:${"https"===t.scheme()?"443":"80"}`);return defined(numberOfActiveRequestsByServer[r])||(numberOfActiveRequestsByServer[r]=0),r},RequestScheduler.request=function(e){if(Check$1.typeOf.object("request",e),Check$1.typeOf.string("request.url",e.url),Check$1.typeOf.func("request.requestFunction",e.requestFunction),isDataUri(e.url)||isBlobUri(e.url))return requestCompletedEvent.raiseEvent(),e.state=RequestState$1.RECEIVED,e.requestFunction();if(++statistics.numberOfAttemptedRequests,defined(e.serverKey)||(e.serverKey=RequestScheduler.getServerKey(e.url)),RequestScheduler.throttleRequests&&e.throttleByServer&&!RequestScheduler.serverHasOpenSlots(e.serverKey))return;if(!RequestScheduler.throttleRequests||!e.throttle)return startRequest(e);if(activeRequests.length>=RequestScheduler.maximumRequests)return;updatePriority(e);const t=requestHeap.insert(e);if(defined(t)){if(t===e)return;cancelRequest(t)}return issueRequest(e)},RequestScheduler.clearForSpecs=function(){for(;requestHeap.length>0;){cancelRequest(requestHeap.pop())}const e=activeRequests.length;for(let t=0;t<e;++t)cancelRequest(activeRequests[t]);activeRequests.length=0,numberOfActiveRequestsByServer={},statistics.numberOfAttemptedRequests=0,statistics.numberOfActiveRequests=0,statistics.numberOfCancelledRequests=0,statistics.numberOfCancelledActiveRequests=0,statistics.numberOfFailedRequests=0,statistics.numberOfActiveRequestsEver=0,statistics.lastNumberOfActiveRequests=0},RequestScheduler.numberOfActiveRequestsByServer=function(e){return numberOfActiveRequestsByServer[e]},RequestScheduler.requestHeap=requestHeap;const TrustedServers={};let _servers={};function getAuthority(e){const t=new Uri(e);t.normalize();let r=t.authority();if(0!==r.length){if(t.authority(r),-1!==r.indexOf("@")){const e=r.split("@");r=e[1]}if(-1===r.indexOf(":")){let e=t.scheme();if(0===e.length&&(e=window.location.protocol,e=e.substring(0,e.length-1)),"http"===e)r+=":80";else{if("https"!==e)return;r+=":443"}}return r}}TrustedServers.add=function(e,t){if(!defined(e))throw new DeveloperError("host is required.");if(!defined(t)||t<=0)throw new DeveloperError("port is required to be greater than 0.");const r=`${e.toLowerCase()}:${t}`;defined(_servers[r])||(_servers[r]=!0)},TrustedServers.remove=function(e,t){if(!defined(e))throw new DeveloperError("host is required.");if(!defined(t)||t<=0)throw new DeveloperError("port is required to be greater than 0.");const r=`${e.toLowerCase()}:${t}`;defined(_servers[r])&&delete _servers[r]},TrustedServers.contains=function(e){if(!defined(e))throw new DeveloperError("url is required.");const t=getAuthority(e);return!(!defined(t)||!defined(_servers[t]))},TrustedServers.clear=function(){_servers={}};var TrustedServers$1=TrustedServers;const xhrBlobSupported=function(){try{const e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function Resource(e){"string"==typeof(e=defaultValue(e,defaultValue.EMPTY_OBJECT))&&(e={url:e}),Check$1.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=defaultClone(e.templateValues,{}),this._queryParameters=defaultClone(e.queryParameters,{}),this.headers=defaultClone(e.headers,{}),this.request=defaultValue(e.request,new Request),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=defaultValue(e.retryAttempts,0),this._retryCount=0;defaultValue(e.parseUrl,!0)?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function defaultClone(e,t){return defined(e)?clone(e):t}let supportsImageBitmapOptionsPromise;function parseQueryString(e){return 0===e.length?{}:-1===e.indexOf("=")?{[e]:void 0}:queryToObject(e)}function combineQueryParameters(e,t,r){if(!r)return combine(e,t);const n=clone(e,!0);for(const e in t)if(t.hasOwnProperty(e)){let r=n[e];const a=t[e];defined(r)?(Array.isArray(r)||(r=n[e]=[r]),n[e]=r.concat(a)):n[e]=Array.isArray(a)?a.slice():a}return n}function stringifyQuery(e){const t=Object.keys(e);return 0===t.length?"":1!==t.length||defined(e[t[0]])?`?${objectToQuery(e)}`:`?${t[0]}`}function fetchImage(e){const t=e.resource,r=e.flipY,n=e.skipColorSpaceConversion,a=e.preferImageBitmap,i=t.request;i.url=t.url,i.requestFunction=function(){let e=!1;t.isDataUri||t.isBlobUri||(e=t.isCrossOriginUrl);const o=defer();return Resource._Implementations.createImage(i,e,o,r,n,a),o.promise};const o=RequestScheduler.request(i);if(defined(o))return o.catch((function(e){return i.state!==RequestState$1.FAILED?Promise.reject(e):t.retryOnError(e).then((function(o){return o?(i.state=RequestState$1.UNISSUED,i.deferred=void 0,fetchImage({resource:t,flipY:r,skipColorSpaceConversion:n,preferImageBitmap:a})):Promise.reject(e)}))}))}function fetchJsonp(e,t,r){const n={};n[t]=r,e.setQueryParameters(n);const a=e.request,i=e.url;a.url=i,a.requestFunction=function(){const e=defer();return window[r]=function(t){e.resolve(t);try{delete window[r]}catch(e){window[r]=void 0}},Resource._Implementations.loadAndExecuteScript(i,r,e),e.promise};const o=RequestScheduler.request(a);if(defined(o))return o.catch((function(n){return a.state!==RequestState$1.FAILED?Promise.reject(n):e.retryOnError(n).then((function(i){return i?(a.state=RequestState$1.UNISSUED,a.deferred=void 0,fetchJsonp(e,t,r)):Promise.reject(n)}))}))}function checkAndResetRequest(e){if(e.state===RequestState$1.ISSUED||e.state===RequestState$1.ACTIVE)throw new RuntimeError("The Resource is already being fetched.");e.state=RequestState$1.UNISSUED,e.deferred=void 0}Resource.createIfNeeded=function(e){return e instanceof Resource?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new Resource({url:e})},Resource.supportsImageBitmapOptions=function(){if(defined(supportsImageBitmapOptionsPromise))return supportsImageBitmapOptionsPromise;if("function"!=typeof createImageBitmap)return supportsImageBitmapOptionsPromise=Promise.resolve(!1),supportsImageBitmapOptionsPromise;return supportsImageBitmapOptionsPromise=Resource.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then((function(e){return Promise.all([createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(e)])})).then((function(e){const t=getImagePixels(e[0]),r=getImagePixels(e[1]);return t[1]!==r[1]})).catch((function(){return!1})),supportsImageBitmapOptionsPromise},Object.defineProperties(Resource,{isBlobSupported:{get:function(){return xhrBlobSupported}}}),Object.defineProperties(Resource.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return getExtensionFromUri(this._url)}},isDataUri:{get:function(){return isDataUri(this._url)}},isBlobUri:{get:function(){return isBlobUri(this._url)}},isCrossOriginUrl:{get:function(){return isCrossOriginUrl(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),Resource.prototype.toString=function(){return this.getUrlComponent(!0,!0)},Resource.prototype.parseUrl=function(e,t,r,n){let a=new Uri(e);const i=parseQueryString(a.query());this._queryParameters=t?combineQueryParameters(i,this.queryParameters,r):i,a.search(""),a.fragment(""),defined(n)&&""===a.scheme()&&(a=a.absoluteTo(getAbsoluteUri(n))),this._url=a.toString()},Resource.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let r=this._url;e&&(r=`${r}${stringifyQuery(this.queryParameters)}`),r=r.replace(/%7B/g,"{").replace(/%7D/g,"}");const n=this._templateValues;return Object.keys(n).length>0&&(r=r.replace(/{(.*?)}/g,(function(e,t){const r=n[t];return defined(r)?encodeURIComponent(r):e}))),t&&defined(this.proxy)&&(r=this.proxy.getURL(r)),r},Resource.prototype.setQueryParameters=function(e,t){this._queryParameters=t?combineQueryParameters(this._queryParameters,e,!1):combineQueryParameters(e,this._queryParameters,!1)},Resource.prototype.appendQueryParameters=function(e){this._queryParameters=combineQueryParameters(e,this._queryParameters,!0)},Resource.prototype.setTemplateValues=function(e,t){this._templateValues=t?combine(this._templateValues,e):combine(e,this._templateValues)},Resource.prototype.getDerivedResource=function(e){const t=this.clone();if(t._retryCount=0,defined(e.url)){const r=defaultValue(e.preserveQueryParameters,!1);t.parseUrl(e.url,!0,r,this._url)}return defined(e.queryParameters)&&(t._queryParameters=combine(e.queryParameters,t.queryParameters)),defined(e.templateValues)&&(t._templateValues=combine(e.templateValues,t.templateValues)),defined(e.headers)&&(t.headers=combine(e.headers,t.headers)),defined(e.proxy)&&(t.proxy=e.proxy),defined(e.request)&&(t.request=e.request),defined(e.retryCallback)&&(t.retryCallback=e.retryCallback),defined(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},Resource.prototype.retryOnError=function(e){const t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);const r=this;return Promise.resolve(t(this,e)).then((function(e){return++r._retryCount,e}))},Resource.prototype.clone=function(e){return defined(e)?(e._url=this._url,e._queryParameters=clone(this._queryParameters),e._templateValues=clone(this._templateValues),e.headers=clone(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new Resource({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:defined(this.credits)?this.credits.slice():void 0})},Resource.prototype.getBaseUri=function(e){return getBaseUri(this.getUrlComponent(e),e)},Resource.prototype.appendForwardSlash=function(){this._url=appendForwardSlash(this._url)},Resource.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},Resource.fetchArrayBuffer=function(e){return new Resource(e).fetchArrayBuffer()},Resource.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},Resource.fetchBlob=function(e){return new Resource(e).fetchBlob()},Resource.prototype.fetchImage=function(e){e=defaultValue(e,defaultValue.EMPTY_OBJECT);const t=defaultValue(e.preferImageBitmap,!1),r=defaultValue(e.preferBlob,!1),n=defaultValue(e.flipY,!1),a=defaultValue(e.skipColorSpaceConversion,!1);if(checkAndResetRequest(this.request),!xhrBlobSupported||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return fetchImage({resource:this,flipY:n,skipColorSpaceConversion:a,preferImageBitmap:t});const i=this.fetchBlob();if(!defined(i))return;let o,s,c,u;return Resource.supportsImageBitmapOptions().then((function(e){return o=e,s=o&&t,i})).then((function(e){if(!defined(e))return;if(u=e,s)return Resource.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1,skipColorSpaceConversion:a});const t=window.URL.createObjectURL(e);return c=new Resource({url:t}),fetchImage({resource:c,flipY:n,skipColorSpaceConversion:a,preferImageBitmap:!1})})).then((function(e){if(defined(e))return e.blob=u,s||window.URL.revokeObjectURL(c.url),e})).catch((function(e){return defined(c)&&window.URL.revokeObjectURL(c.url),e.blob=u,Promise.reject(e)}))},Resource.fetchImage=function(e){return new Resource(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},Resource.prototype.fetchText=function(){return this.fetch({responseType:"text"})},Resource.fetchText=function(e){return new Resource(e).fetchText()},Resource.prototype.fetchJson=function(){const e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(defined(e))return e.then((function(e){if(defined(e))return JSON.parse(e)}))},Resource.fetchJson=function(e){return new Resource(e).fetchJson()},Resource.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},Resource.fetchXML=function(e){return new Resource(e).fetchXML()},Resource.prototype.fetchJsonp=function(e){let t;e=defaultValue(e,"callback"),checkAndResetRequest(this.request);do{t=`loadJsonp${CesiumMath$1.nextRandomNumber().toString().substring(2,8)}`}while(defined(window[t]));return fetchJsonp(this,e,t)},Resource.fetchJsonp=function(e){return new Resource(e).fetchJsonp(e.callbackParameterName)},Resource.prototype._makeRequest=function(e){const t=this;checkAndResetRequest(t.request);const r=t.request,n=t.url;r.url=n,r.requestFunction=function(){const a=e.responseType,i=combine(e.headers,t.headers),o=e.overrideMimeType,s=e.method,c=e.data,u=defer(),l=Resource._Implementations.loadWithXhr(n,a,s,c,i,u,o);return defined(l)&&defined(l.abort)&&(r.cancelFunction=function(){l.abort()}),u.promise};const a=RequestScheduler.request(r);if(defined(a))return a.then((function(e){return r.cancelFunction=void 0,e})).catch((function(n){return r.cancelFunction=void 0,r.state!==RequestState$1.FAILED?Promise.reject(n):t.retryOnError(n).then((function(a){return a?(r.state=RequestState$1.UNISSUED,r.deferred=void 0,t.fetch(e)):Promise.reject(n)}))}))};const dataUriRegex=/^data:(.*?)(;base64)?,(.*)$/;function decodeDataUriText(e,t){const r=decodeURIComponent(t);return e?atob(r):r}function decodeDataUriArrayBuffer(e,t){const r=decodeDataUriText(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n);for(let e=0;e<r.length;e++)a[e]=r.charCodeAt(e);return n}function decodeDataUri(e,t){t=defaultValue(t,"");const r=e[1],n=!!e[2],a=e[3];let i,o;switch(t){case"":case"text":return decodeDataUriText(n,a);case"arraybuffer":return decodeDataUriArrayBuffer(n,a);case"blob":return i=decodeDataUriArrayBuffer(n,a),new Blob([i],{type:r});case"document":return o=new DOMParser,o.parseFromString(decodeDataUriText(n,a),r);case"json":return JSON.parse(decodeDataUriText(n,a));default:throw new DeveloperError(`Unhandled responseType: ${t}`)}}function decodeResponse(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}function loadWithHttpRequest(e,t,r,n,a,i,o){let s,c;Promise.all([import("url"),import("zlib")]).then((([t,r])=>(s=t.parse(e),c=r,"https:"===s.protocol?import("https"):import("http")))).then((e=>{const n={protocol:s.protocol,hostname:s.hostname,port:s.port,path:s.path,query:s.query,method:r,headers:a};e.request(n).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)return void i.reject(new RequestErrorEvent(e.statusCode,e,e.headers));const r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){const n=Buffer.concat(r);"gzip"===e.headers["content-encoding"]?c.gunzip(n,(function(e,r){e?i.reject(new RuntimeError("Error decompressing response.")):i.resolve(decodeResponse(r,t))})):i.resolve(decodeResponse(n,t))}))})).on("error",(function(e){i.reject(new RequestErrorEvent)})).end()}))}Resource.prototype.fetch=function(e){return(e=defaultClone(e,{})).method="GET",this._makeRequest(e)},Resource.fetch=function(e){return new Resource(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource.prototype.delete=function(e){return(e=defaultClone(e,{})).method="DELETE",this._makeRequest(e)},Resource.delete=function(e){return new Resource(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},Resource.prototype.head=function(e){return(e=defaultClone(e,{})).method="HEAD",this._makeRequest(e)},Resource.head=function(e){return new Resource(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource.prototype.options=function(e){return(e=defaultClone(e,{})).method="OPTIONS",this._makeRequest(e)},Resource.options=function(e){return new Resource(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource.prototype.post=function(e,t){return Check$1.defined("data",e),(t=defaultClone(t,{})).method="POST",t.data=e,this._makeRequest(t)},Resource.post=function(e){return new Resource(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource.prototype.put=function(e,t){return Check$1.defined("data",e),(t=defaultClone(t,{})).method="PUT",t.data=e,this._makeRequest(t)},Resource.put=function(e){return new Resource(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource.prototype.patch=function(e,t){return Check$1.defined("data",e),(t=defaultClone(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},Resource.patch=function(e){return new Resource(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Resource._Implementations={},Resource._Implementations.loadImageElement=function(e,t,r){const n=new Image;n.onload=function(){0===n.naturalWidth&&0===n.naturalHeight&&0===n.width&&0===n.height&&(n.width=300,n.height=150),r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(TrustedServers$1.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e},Resource._Implementations.createImage=function(e,t,r,n,a,i){const o=e.url;Resource.supportsImageBitmapOptions().then((function(s){if(!s||!i)return void Resource._Implementations.loadImageElement(o,t,r);const c=defer(),u=Resource._Implementations.loadWithXhr(o,"blob","GET",void 0,void 0,c,void 0,void 0,void 0);return defined(u)&&defined(u.abort)&&(e.cancelFunction=function(){u.abort()}),c.promise.then((function(e){if(defined(e))return Resource.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1,skipColorSpaceConversion:a});r.reject(new RuntimeError(`Successfully retrieved ${o} but it contained no content.`))})).then((function(e){r.resolve(e)}))})).catch((function(e){r.reject(e)}))},Resource.createImageBitmapFromBlob=function(e,t){return Check$1.defined("options",t),Check$1.typeOf.bool("options.flipY",t.flipY),Check$1.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),Check$1.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};const noXMLHttpRequest="undefined"==typeof XMLHttpRequest;Resource._Implementations.loadWithXhr=function(e,t,r,n,a,i,o){const s=dataUriRegex.exec(e);if(null!==s)return void i.resolve(decodeDataUri(s,t));if(noXMLHttpRequest)return void loadWithHttpRequest(e,t,r,n,a,i);const c=new XMLHttpRequest;if(TrustedServers$1.contains(e)&&(c.withCredentials=!0),c.open(r,e,!0),defined(o)&&defined(c.overrideMimeType)&&c.overrideMimeType(o),defined(a))for(const e in a)a.hasOwnProperty(e)&&c.setRequestHeader(e,a[e]);defined(t)&&(c.responseType=t);let u=!1;return"string"==typeof e&&(u=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),c.onload=function(){if((c.status<200||c.status>=300)&&(!u||0!==c.status))return void i.reject(new RequestErrorEvent(c.status,c.response,c.getAllResponseHeaders()));const e=c.response,n=c.responseType;if("HEAD"===r||"OPTIONS"===r){const e=c.getAllResponseHeaders().trim().split(/[\r\n]+/),t={};return e.forEach((function(e){const r=e.split(": "),n=r.shift();t[n]=r.join(": ")})),void i.resolve(t)}if(204===c.status)i.resolve();else if(!defined(e)||defined(t)&&n!==t)if("json"===t&&"string"==typeof e)try{i.resolve(JSON.parse(e))}catch(e){i.reject(e)}else(""===n||"document"===n)&&defined(c.responseXML)&&c.responseXML.hasChildNodes()?i.resolve(c.responseXML):""!==n&&"text"!==n||!defined(c.responseText)?i.reject(new RuntimeError("Invalid XMLHttpRequest response type.")):i.resolve(c.responseText);else i.resolve(e)},c.onerror=function(e){i.reject(new RequestErrorEvent)},c.send(n),c},Resource._Implementations.loadAndExecuteScript=function(e,t,r){return loadAndExecuteScript(e).catch((function(e){r.reject(e)}))},Resource._DefaultImplementations={},Resource._DefaultImplementations.createImage=Resource._Implementations.createImage,Resource._DefaultImplementations.loadWithXhr=Resource._Implementations.loadWithXhr,Resource._DefaultImplementations.loadAndExecuteScript=Resource._Implementations.loadAndExecuteScript,Resource.DEFAULT=Object.freeze(new Resource({url:"undefined"==typeof document?"":document.location.href.split("?")[0]}));const cesiumScriptRegex=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function getBaseUrlFromCesiumScript(){const e=document.getElementsByTagName("script");for(let t=0,r=e.length;t<r;++t){const r=e[t].getAttribute("src"),n=cesiumScriptRegex.exec(r);if(null!==n)return n[1]}}let a,baseResource,implementation;function tryMakeAbsolute(e){return"undefined"==typeof document?e:(defined(a)||(a=document.createElement("a")),a.href=e,a.href)}function getCesiumBaseUrl(){if(defined(baseResource))return baseResource;let e;if(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:defined(_documentCurrentScript&&_documentCurrentScript.src||new URL("bundle.js",document.baseURI).href)?getAbsoluteUri(".",_documentCurrentScript&&_documentCurrentScript.src||new URL("bundle.js",document.baseURI).href):"object"==typeof define&&defined(define.amd)&&!define.amd.toUrlUndefined&&defined(require.toUrl)?getAbsoluteUri("..",buildModuleUrl("Core/buildModuleUrl.js")):getBaseUrlFromCesiumScript(),!defined(e))throw new DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return baseResource=new Resource({url:tryMakeAbsolute(e)}),baseResource.appendForwardSlash(),baseResource}function buildModuleUrlFromRequireToUrl(e){return tryMakeAbsolute(require.toUrl(`../${e}`))}function buildModuleUrlFromBaseUrl(e){return getCesiumBaseUrl().getDerivedResource({url:e}).url}function buildModuleUrl(e){defined(implementation)||(implementation="object"==typeof define&&defined(define.amd)&&!define.amd.toUrlUndefined&&defined(require.toUrl)?buildModuleUrlFromRequireToUrl:buildModuleUrlFromBaseUrl);return implementation(e)}function binarySearch(e,t,r){Check$1.defined("array",e),Check$1.defined("itemToFind",t),Check$1.defined("comparator",r);let n,a,i=0,o=e.length-1;for(;i<=o;)if(n=~~((i+o)/2),a=r(e[n],t),a<0)i=n+1;else{if(!(a>0))return n;o=n-1}return~(o+1)}function EarthOrientationParametersSample(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}function GregorianDate(e,t,r,n,a,i,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=o,this.isLeapSecond=s}function isLeapYear(e){if(null===e||isNaN(e))throw new DeveloperError("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function LeapSecond(e,t){this.julianDate=e,this.offset=t}buildModuleUrl._cesiumScriptRegex=cesiumScriptRegex,buildModuleUrl._buildModuleUrlFromBaseUrl=buildModuleUrlFromBaseUrl,buildModuleUrl._clearBaseResource=function(){baseResource=void 0},buildModuleUrl.setBaseUrl=function(e){baseResource=Resource.DEFAULT.getDerivedResource({url:e})},buildModuleUrl.getCesiumBaseUrl=getCesiumBaseUrl;const TimeConstants={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5};var TimeConstants$1=Object.freeze(TimeConstants);const TimeStandard={UTC:0,TAI:1};var TimeStandard$1=Object.freeze(TimeStandard);const gregorianDateScratch=new GregorianDate,daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],daysInLeapFeburary=29;function compareLeapSecondDates$1(e,t){return JulianDate.compare(e.julianDate,t.julianDate)}const binarySearchScratchLeapSecond=new LeapSecond;function convertUtcToTai(e){binarySearchScratchLeapSecond.julianDate=e;const t=JulianDate.leapSeconds;let r=binarySearch(t,binarySearchScratchLeapSecond,compareLeapSecondDates$1);r<0&&(r=~r),r>=t.length&&(r=t.length-1);let n=t[r].offset;if(r>0){JulianDate.secondsDifference(t[r].julianDate,e)>n&&(r--,n=t[r].offset)}JulianDate.addSeconds(e,n,e)}function convertTaiToUtc(e,t){binarySearchScratchLeapSecond.julianDate=e;const r=JulianDate.leapSeconds;let n=binarySearch(r,binarySearchScratchLeapSecond,compareLeapSecondDates$1);if(n<0&&(n=~n),0===n)return JulianDate.addSeconds(e,-r[0].offset,t);if(n>=r.length)return JulianDate.addSeconds(e,-r[n-1].offset,t);const a=JulianDate.secondsDifference(r[n].julianDate,e);return 0===a?JulianDate.addSeconds(e,-r[n].offset,t):a<=1?void 0:JulianDate.addSeconds(e,-r[--n].offset,t)}function setComponents(e,t,r){const n=t/TimeConstants$1.SECONDS_PER_DAY|0;return e+=n,(t-=TimeConstants$1.SECONDS_PER_DAY*n)<0&&(e--,t+=TimeConstants$1.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function computeJulianDateComponents(e,t,r,n,a,i,o){const s=(t-14)/12|0,c=e+4800+s;let u=(1461*c/4|0)+(367*(t-2-12*s)/12|0)-(3*((c+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);const l=i+(n*TimeConstants$1.SECONDS_PER_HOUR+a*TimeConstants$1.SECONDS_PER_MINUTE+o*TimeConstants$1.SECONDS_PER_MILLISECOND);return l>=43200&&(u-=1),[u,l]}const matchCalendarYear=/^(\d{4})$/,matchCalendarMonth=/^(\d{4})-(\d{2})$/,matchOrdinalDate=/^(\d{4})-?(\d{3})$/,matchWeekDate=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,matchCalendarDate=/^(\d{4})-?(\d{2})-?(\d{2})$/,utcOffset=/([Z+\-])?(\d{2})?:?(\d{2})?$/,matchHours=/^(\d{2})(\.\d+)?/.source+utcOffset.source,matchHoursMinutes=/^(\d{2}):?(\d{2})(\.\d+)?/.source+utcOffset.source,matchHoursMinutesSeconds=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+utcOffset.source,iso8601ErrorMessage="Invalid ISO 8601 date.";function JulianDate(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=defaultValue(e,0),t=defaultValue(t,0),r=defaultValue(r,TimeStandard$1.UTC);const n=0|e;setComponents(n,t+=(e-n)*TimeConstants$1.SECONDS_PER_DAY,this),r===TimeStandard$1.UTC&&convertUtcToTai(this)}JulianDate.fromGregorianDate=function(e,t){if(!(e instanceof GregorianDate))throw new DeveloperError("date must be a valid GregorianDate.");const r=computeJulianDateComponents(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return defined(t)?(setComponents(r[0],r[1],t),convertUtcToTai(t),t):new JulianDate(r[0],r[1],TimeStandard$1.UTC)},JulianDate.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new DeveloperError("date must be a valid JavaScript Date.");const r=computeJulianDateComponents(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return defined(t)?(setComponents(r[0],r[1],t),convertUtcToTai(t),t):new JulianDate(r[0],r[1],TimeStandard$1.UTC)},JulianDate.fromIso8601=function(e,t){if("string"!=typeof e)throw new DeveloperError(iso8601ErrorMessage);let r,n=(e=e.replace(",",".")).split("T"),a=1,i=1,o=0,s=0,c=0,u=0;const l=n[0],d=n[1];let p,h,f,m;if(!defined(l))throw new DeveloperError(iso8601ErrorMessage);if(n=l.match(matchCalendarDate),null!==n){if(f=l.split("-").length-1,f>0&&2!==f)throw new DeveloperError(iso8601ErrorMessage);r=+n[1],a=+n[2],i=+n[3]}else if(n=l.match(matchCalendarMonth),null!==n)r=+n[1],a=+n[2];else if(n=l.match(matchCalendarYear),null!==n)r=+n[1];else{let e;if(n=l.match(matchOrdinalDate),null!==n){if(r=+n[1],e=+n[2],h=isLeapYear(r),e<1||h&&e>366||!h&&e>365)throw new DeveloperError(iso8601ErrorMessage)}else{if(n=l.match(matchWeekDate),null===n)throw new DeveloperError(iso8601ErrorMessage);{r=+n[1];const t=+n[2],a=+n[3]||0;if(f=l.split("-").length-1,f>0&&(!defined(n[3])&&1!==f||defined(n[3])&&2!==f))throw new DeveloperError(iso8601ErrorMessage);e=7*t+a-new Date(Date.UTC(r,0,4)).getUTCDay()-3}}p=new Date(Date.UTC(r,0,1)),p.setUTCDate(e),a=p.getUTCMonth()+1,i=p.getUTCDate()}if(h=isLeapYear(r),a<1||a>12||i<1||(2!==a||!h)&&i>daysInMonth[a-1]||h&&2===a&&i>daysInLeapFeburary)throw new DeveloperError(iso8601ErrorMessage);if(defined(d)){if(n=d.match(matchHoursMinutesSeconds),null!==n){if(f=d.split(":").length-1,f>0&&2!==f&&3!==f)throw new DeveloperError(iso8601ErrorMessage);o=+n[1],s=+n[2],c=+n[3],u=1e3*+(n[4]||0),m=5}else if(n=d.match(matchHoursMinutes),null!==n){if(f=d.split(":").length-1,f>2)throw new DeveloperError(iso8601ErrorMessage);o=+n[1],s=+n[2],c=60*+(n[3]||0),m=4}else{if(n=d.match(matchHours),null===n)throw new DeveloperError(iso8601ErrorMessage);o=+n[1],s=60*+(n[2]||0),m=3}if(s>=60||c>=61||o>24||24===o&&(s>0||c>0||u>0))throw new DeveloperError(iso8601ErrorMessage);const e=n[m],t=+n[m+1],l=+(n[m+2]||0);switch(e){case"+":o-=t,s-=l;break;case"-":o+=t,s+=l;break;case"Z":break;default:s+=new Date(Date.UTC(r,a-1,i,o,s)).getTimezoneOffset()}}const y=60===c;for(y&&c--;s>=60;)s-=60,o++;for(;o>=24;)o-=24,i++;for(p=h&&2===a?daysInLeapFeburary:daysInMonth[a-1];i>p;)i-=p,a++,a>12&&(a-=12,r++),p=h&&2===a?daysInLeapFeburary:daysInMonth[a-1];for(;s<0;)s+=60,o--;for(;o<0;)o+=24,i--;for(;i<1;)a--,a<1&&(a+=12,r--),p=h&&2===a?daysInLeapFeburary:daysInMonth[a-1],i+=p;const g=computeJulianDateComponents(r,a,i,o,s,c,u);return defined(t)?(setComponents(g[0],g[1],t),convertUtcToTai(t)):t=new JulianDate(g[0],g[1],TimeStandard$1.UTC),y&&JulianDate.addSeconds(t,1,t),t},JulianDate.now=function(e){return JulianDate.fromDate(new Date,e)};const toGregorianDateScratch=new JulianDate(0,0,TimeStandard$1.TAI);function EarthOrientationParameters(e){e=defaultValue(e,defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=defaultValue(e.addNewLeapSeconds,!0),defined(e.data)?onDataReady(this,e.data):onDataReady(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function compareLeapSecondDates(e,t){return JulianDate.compare(e.julianDate,t)}function onDataReady(e,t){if(!defined(t.columnNames))throw new RuntimeError("Error in loaded EOP data: The columnNames property is required.");if(!defined(t.samples))throw new RuntimeError("Error in loaded EOP data: The samples property is required.");const r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),o=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),c=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||a<0||i<0||o<0||s<0||c<0)throw new RuntimeError("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");const u=e._samples=t.samples,l=e._dates=[];let d;e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=c,e._columnCount=t.columnNames.length,e._lastIndex=void 0;const p=e._addNewLeapSeconds;for(let t=0,n=u.length;t<n;t+=e._columnCount){const e=u[t+r],n=u[t+c],a=new JulianDate(e+TimeConstants$1.MODIFIED_JULIAN_DATE_DIFFERENCE,n,TimeStandard$1.TAI);if(l.push(a),p){if(n!==d&&defined(d)){const e=JulianDate.leapSeconds,t=binarySearch(e,a,compareLeapSecondDates);if(t<0){const r=new LeapSecond(a,n);e.splice(~t,0,r)}}d=n}}}function fillResultFromIndex(e,t,r,n,a){const i=r*n;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function linearInterp(e,t,r){return t+e*(r-t)}function interpolate(e,t,r,n,a,i,o){const s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;const c=t[a],u=t[i];if(c.equals(u)||n.equals(c))return fillResultFromIndex(e,r,a,s,o),o;if(n.equals(u))return fillResultFromIndex(e,r,i,s,o),o;const l=JulianDate.secondsDifference(n,c)/JulianDate.secondsDifference(u,c),d=a*s,p=i*s;let h=r[d+e._ut1MinusUtcSecondsColumn],f=r[p+e._ut1MinusUtcSecondsColumn];const m=f-h;if(m>.5||m<-.5){const t=r[d+e._taiMinusUtcSecondsColumn],a=r[p+e._taiMinusUtcSecondsColumn];t!==a&&(u.equals(n)?h=f:f-=a-t)}return o.xPoleWander=linearInterp(l,r[d+e._xPoleWanderRadiansColumn],r[p+e._xPoleWanderRadiansColumn]),o.yPoleWander=linearInterp(l,r[d+e._yPoleWanderRadiansColumn],r[p+e._yPoleWanderRadiansColumn]),o.xPoleOffset=linearInterp(l,r[d+e._xCelestialPoleOffsetRadiansColumn],r[p+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=linearInterp(l,r[d+e._yCelestialPoleOffsetRadiansColumn],r[p+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=linearInterp(l,h,f),o}function HeadingPitchRoll(e,t,r){this.heading=defaultValue(e,0),this.pitch=defaultValue(t,0),this.roll=defaultValue(r,0)}function Iau2006XysSample(e,t,r){this.x=e,this.y=t,this.s=r}function Iau2006XysData(e){e=defaultValue(e,defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=Resource.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new JulianDate(this._sampleZeroJulianEphemerisDate,0,TimeStandard$1.TAI),this._stepSizeDays=defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];const t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t);for(let e=0;e<=t;++e){r[e]=a,n[e]=e*this._stepSizeDays;for(let n=0;n<=t;++n)n!==e&&(r[e]*=e-n);r[e]=1/r[e]}this._work=new Array(t+1),this._coef=new Array(t+1)}JulianDate.toGregorianDate=function(e,t){if(!defined(e))throw new DeveloperError("julianDate is required.");let r=!1,n=convertTaiToUtc(e,toGregorianDateScratch);defined(n)||(JulianDate.addSeconds(e,-1,toGregorianDateScratch),n=convertTaiToUtc(toGregorianDateScratch,toGregorianDateScratch),r=!0);let a=n.dayNumber;const i=n.secondsOfDay;i>=43200&&(a+=1);let o=a+68569|0;const s=4*o/146097|0;o=o-((146097*s+3)/4|0)|0;const c=4e3*(o+1)/1461001|0;o=o-(1461*c/4|0)+31|0;const u=80*o/2447|0,l=o-(2447*u/80|0)|0;o=u/11|0;const d=u+2-12*o|0,p=100*(s-49)+c+o|0;let h=i/TimeConstants$1.SECONDS_PER_HOUR|0,f=i-h*TimeConstants$1.SECONDS_PER_HOUR;const m=f/TimeConstants$1.SECONDS_PER_MINUTE|0;f-=m*TimeConstants$1.SECONDS_PER_MINUTE;let y=0|f;const g=(f-y)/TimeConstants$1.SECONDS_PER_MILLISECOND;return h+=12,h>23&&(h-=24),r&&(y+=1),defined(t)?(t.year=p,t.month=d,t.day=l,t.hour=h,t.minute=m,t.second=y,t.millisecond=g,t.isLeapSecond=r,t):new GregorianDate(p,d,l,h,m,y,g,r)},JulianDate.toDate=function(e){if(!defined(e))throw new DeveloperError("julianDate is required.");const t=JulianDate.toGregorianDate(e,gregorianDateScratch);let r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},JulianDate.toIso8601=function(e,t){if(!defined(e))throw new DeveloperError("julianDate is required.");const r=JulianDate.toGregorianDate(e,gregorianDateScratch);let n=r.year,a=r.month,i=r.day,o=r.hour;const s=r.minute,c=r.second,u=r.millisecond;let l;return 1e4===n&&1===a&&1===i&&0===o&&0===s&&0===c&&0===u&&(n=9999,a=12,i=31,o=24),defined(t)||0===u?defined(t)&&0!==t?(l=(.01*u).toFixed(t).replace(".","").slice(0,t),`${n.toString().padStart(4,"0")}-${a.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${l}Z`):`${n.toString().padStart(4,"0")}-${a.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}Z`:(l=(.01*u).toString().replace(".",""),`${n.toString().padStart(4,"0")}-${a.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${l}Z`)},JulianDate.clone=function(e,t){if(defined(e))return defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new JulianDate(e.dayNumber,e.secondsOfDay,TimeStandard$1.TAI)},JulianDate.compare=function(e,t){if(!defined(e))throw new DeveloperError("left is required.");if(!defined(t))throw new DeveloperError("right is required.");const r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},JulianDate.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},JulianDate.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(JulianDate.secondsDifference(e,t))<=r},JulianDate.totalDays=function(e){if(!defined(e))throw new DeveloperError("julianDate is required.");return e.dayNumber+e.secondsOfDay/TimeConstants$1.SECONDS_PER_DAY},JulianDate.secondsDifference=function(e,t){if(!defined(e))throw new DeveloperError("left is required.");if(!defined(t))throw new DeveloperError("right is required.");return(e.dayNumber-t.dayNumber)*TimeConstants$1.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},JulianDate.daysDifference=function(e,t){if(!defined(e))throw new DeveloperError("left is required.");if(!defined(t))throw new DeveloperError("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/TimeConstants$1.SECONDS_PER_DAY},JulianDate.computeTaiMinusUtc=function(e){binarySearchScratchLeapSecond.julianDate=e;const t=JulianDate.leapSeconds;let r=binarySearch(t,binarySearchScratchLeapSecond,compareLeapSecondDates$1);return r<0&&(r=~r,--r,r<0&&(r=0)),t[r].offset},JulianDate.addSeconds=function(e,t,r){if(!defined(e))throw new DeveloperError("julianDate is required.");if(!defined(t))throw new DeveloperError("seconds is required.");if(!defined(r))throw new DeveloperError("result is required.");return setComponents(e.dayNumber,e.secondsOfDay+t,r)},JulianDate.addMinutes=function(e,t,r){if(!defined(e))throw new DeveloperError("julianDate is required.");if(!defined(t))throw new DeveloperError("minutes is required.");if(!defined(r))throw new DeveloperError("result is required.");const n=e.secondsOfDay+t*TimeConstants$1.SECONDS_PER_MINUTE;return setComponents(e.dayNumber,n,r)},JulianDate.addHours=function(e,t,r){if(!defined(e))throw new DeveloperError("julianDate is required.");if(!defined(t))throw new DeveloperError("hours is required.");if(!defined(r))throw new DeveloperError("result is required.");const n=e.secondsOfDay+t*TimeConstants$1.SECONDS_PER_HOUR;return setComponents(e.dayNumber,n,r)},JulianDate.addDays=function(e,t,r){if(!defined(e))throw new DeveloperError("julianDate is required.");if(!defined(t))throw new DeveloperError("days is required.");if(!defined(r))throw new DeveloperError("result is required.");return setComponents(e.dayNumber+t,e.secondsOfDay,r)},JulianDate.lessThan=function(e,t){return JulianDate.compare(e,t)<0},JulianDate.lessThanOrEquals=function(e,t){return JulianDate.compare(e,t)<=0},JulianDate.greaterThan=function(e,t){return JulianDate.compare(e,t)>0},JulianDate.greaterThanOrEquals=function(e,t){return JulianDate.compare(e,t)>=0},JulianDate.prototype.clone=function(e){return JulianDate.clone(this,e)},JulianDate.prototype.equals=function(e){return JulianDate.equals(this,e)},JulianDate.prototype.equalsEpsilon=function(e,t){return JulianDate.equalsEpsilon(this,e,t)},JulianDate.prototype.toString=function(){return JulianDate.toIso8601(this)},JulianDate.leapSeconds=[new LeapSecond(new JulianDate(2441317,43210,TimeStandard$1.TAI),10),new LeapSecond(new JulianDate(2441499,43211,TimeStandard$1.TAI),11),new LeapSecond(new JulianDate(2441683,43212,TimeStandard$1.TAI),12),new LeapSecond(new JulianDate(2442048,43213,TimeStandard$1.TAI),13),new LeapSecond(new JulianDate(2442413,43214,TimeStandard$1.TAI),14),new LeapSecond(new JulianDate(2442778,43215,TimeStandard$1.TAI),15),new LeapSecond(new JulianDate(2443144,43216,TimeStandard$1.TAI),16),new LeapSecond(new JulianDate(2443509,43217,TimeStandard$1.TAI),17),new LeapSecond(new JulianDate(2443874,43218,TimeStandard$1.TAI),18),new LeapSecond(new JulianDate(2444239,43219,TimeStandard$1.TAI),19),new LeapSecond(new JulianDate(2444786,43220,TimeStandard$1.TAI),20),new LeapSecond(new JulianDate(2445151,43221,TimeStandard$1.TAI),21),new LeapSecond(new JulianDate(2445516,43222,TimeStandard$1.TAI),22),new LeapSecond(new JulianDate(2446247,43223,TimeStandard$1.TAI),23),new LeapSecond(new JulianDate(2447161,43224,TimeStandard$1.TAI),24),new LeapSecond(new JulianDate(2447892,43225,TimeStandard$1.TAI),25),new LeapSecond(new JulianDate(2448257,43226,TimeStandard$1.TAI),26),new LeapSecond(new JulianDate(2448804,43227,TimeStandard$1.TAI),27),new LeapSecond(new JulianDate(2449169,43228,TimeStandard$1.TAI),28),new LeapSecond(new JulianDate(2449534,43229,TimeStandard$1.TAI),29),new LeapSecond(new JulianDate(2450083,43230,TimeStandard$1.TAI),30),new LeapSecond(new JulianDate(2450630,43231,TimeStandard$1.TAI),31),new LeapSecond(new JulianDate(2451179,43232,TimeStandard$1.TAI),32),new LeapSecond(new JulianDate(2453736,43233,TimeStandard$1.TAI),33),new LeapSecond(new JulianDate(2454832,43234,TimeStandard$1.TAI),34),new LeapSecond(new JulianDate(2456109,43235,TimeStandard$1.TAI),35),new LeapSecond(new JulianDate(2457204,43236,TimeStandard$1.TAI),36),new LeapSecond(new JulianDate(2457754,43237,TimeStandard$1.TAI),37)],EarthOrientationParameters.fromUrl=async function(e,t){Check$1.defined("url",e),t=defaultValue(t,defaultValue.EMPTY_OBJECT);const r=Resource.createIfNeeded(e);let n;try{n=await r.fetchJson()}catch(e){throw new RuntimeError(`An error occurred while retrieving the EOP data from the URL ${r.url}.`)}return new EarthOrientationParameters({addNewLeapSeconds:t.addNewLeapSeconds,data:n})},EarthOrientationParameters.NONE=Object.freeze({compute:function(e,t){return defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new EarthOrientationParametersSample(0,0,0,0,0),t}}),EarthOrientationParameters.prototype.compute=function(e,t){if(!defined(this._samples))return;if(defined(t)||(t=new EarthOrientationParametersSample(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;const r=this._dates,n=this._lastIndex;let a=0,i=0;if(defined(n)){const o=r[n],s=r[n+1],c=JulianDate.lessThanOrEquals(o,e),u=!defined(s),l=u||JulianDate.greaterThanOrEquals(s,e);if(c&&l)return a=n,!u&&s.equals(e)&&++a,i=a+1,interpolate(this,r,this._samples,e,a,i,t),t}let o=binarySearch(r,e,JulianDate.compare,this._dateColumn);return o>=0?(o<r.length-1&&r[o+1].equals(e)&&++o,a=o,i=o):(i=~o,a=i-1,a<0&&(a=0)),this._lastIndex=a,interpolate(this,r,this._samples,e,a,i,t),t},HeadingPitchRoll.fromQuaternion=function(e,t){if(!defined(e))throw new DeveloperError("quaternion is required");defined(t)||(t=new HeadingPitchRoll);const r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),o=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(o,i),t.roll=Math.atan2(a,n),t.pitch=-CesiumMath$1.asinClamped(r),t},HeadingPitchRoll.fromDegrees=function(e,t,r,n){if(!defined(e))throw new DeveloperError("heading is required");if(!defined(t))throw new DeveloperError("pitch is required");if(!defined(r))throw new DeveloperError("roll is required");return defined(n)||(n=new HeadingPitchRoll),n.heading=e*CesiumMath$1.RADIANS_PER_DEGREE,n.pitch=t*CesiumMath$1.RADIANS_PER_DEGREE,n.roll=r*CesiumMath$1.RADIANS_PER_DEGREE,n},HeadingPitchRoll.clone=function(e,t){if(defined(e))return defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new HeadingPitchRoll(e.heading,e.pitch,e.roll)},HeadingPitchRoll.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},HeadingPitchRoll.equalsEpsilon=function(e,t,r,n){return e===t||defined(e)&&defined(t)&&CesiumMath$1.equalsEpsilon(e.heading,t.heading,r,n)&&CesiumMath$1.equalsEpsilon(e.pitch,t.pitch,r,n)&&CesiumMath$1.equalsEpsilon(e.roll,t.roll,r,n)},HeadingPitchRoll.prototype.clone=function(e){return HeadingPitchRoll.clone(this,e)},HeadingPitchRoll.prototype.equals=function(e){return HeadingPitchRoll.equals(this,e)},HeadingPitchRoll.prototype.equalsEpsilon=function(e,t,r){return HeadingPitchRoll.equalsEpsilon(this,e,t,r)},HeadingPitchRoll.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};const julianDateScratch=new JulianDate(0,0,TimeStandard$1.TAI);function getDaysSinceEpoch(e,t,r){const n=julianDateScratch;return n.dayNumber=t,n.secondsOfDay=r,JulianDate.daysDifference(n,e._sampleZeroDateTT)}function requestXysChunk(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let r;const n=e._xysFileUrlTemplate;r=defined(n)?n.getDerivedResource({templateValues:{0:t}}):new Resource({url:buildModuleUrl(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});const a=r.fetchJson().then((function(r){e._chunkDownloadsInProgress[t]=!1;const n=e._samples,a=r.samples,i=t*e._samplesPerXysFile*3;for(let e=0,t=a.length;e<t;++e)n[i+e]=a[e]}));return e._chunkDownloadsInProgress[t]=a,a}let _supportsFullscreen;Iau2006XysData.prototype.preload=function(e,t,r,n){const a=getDaysSinceEpoch(this,e,t),i=getDaysSinceEpoch(this,r,n);let o=a/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);let s=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);const c=o/this._samplesPerXysFile|0,u=s/this._samplesPerXysFile|0,l=[];for(let e=c;e<=u;++e)l.push(requestXysChunk(this,e));return Promise.all(l)},Iau2006XysData.prototype.computeXysRadians=function(e,t,r){const n=getDaysSinceEpoch(this,e,t);if(n<0)return;const a=n/this._stepSizeDays|0;if(a>=this._totalSamples)return;const i=this._interpolationOrder;let o=a-(i/2|0);o<0&&(o=0);let s=o+i;s>=this._totalSamples&&(s=this._totalSamples-1,o=s-i,o<0&&(o=0));let c=!1;const u=this._samples;if(defined(u[3*o])||(requestXysChunk(this,o/this._samplesPerXysFile|0),c=!0),defined(u[3*s])||(requestXysChunk(this,s/this._samplesPerXysFile|0),c=!0),c)return;defined(r)?(r.x=0,r.y=0,r.s=0):r=new Iau2006XysSample(0,0,0);const l=n-o*this._stepSizeDays,d=this._work,p=this._denominators,h=this._coef,f=this._xTable;let m,y;for(m=0;m<=i;++m)d[m]=l-f[m];for(m=0;m<=i;++m){for(h[m]=1,y=0;y<=i;++y)y!==m&&(h[m]*=d[y]);h[m]*=p[m];let e=3*(o+m);r.x+=h[m]*u[e++],r.y+=h[m]*u[e++],r.s+=h[m]*u[e]}return r};const _names={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Fullscreen={};Object.defineProperties(Fullscreen,{element:{get:function(){if(Fullscreen.supportsFullscreen())return document[_names.fullscreenElement]}},changeEventName:{get:function(){if(Fullscreen.supportsFullscreen())return _names.fullscreenchange}},errorEventName:{get:function(){if(Fullscreen.supportsFullscreen())return _names.fullscreenerror}},enabled:{get:function(){if(Fullscreen.supportsFullscreen())return document[_names.fullscreenEnabled]}},fullscreen:{get:function(){if(Fullscreen.supportsFullscreen())return null!==Fullscreen.element}}}),Fullscreen.supportsFullscreen=function(){if(defined(_supportsFullscreen))return _supportsFullscreen;_supportsFullscreen=!1;const e=document.body;if("function"==typeof e.requestFullscreen)return _names.requestFullscreen="requestFullscreen",_names.exitFullscreen="exitFullscreen",_names.fullscreenEnabled="fullscreenEnabled",_names.fullscreenElement="fullscreenElement",_names.fullscreenchange="fullscreenchange",_names.fullscreenerror="fullscreenerror",_supportsFullscreen=!0,_supportsFullscreen;const t=["webkit","moz","o","ms","khtml"];let r;for(let n=0,a=t.length;n<a;++n){const a=t[n];r=`${a}RequestFullscreen`,"function"==typeof e[r]?(_names.requestFullscreen=r,_supportsFullscreen=!0):(r=`${a}RequestFullScreen`,"function"==typeof e[r]&&(_names.requestFullscreen=r,_supportsFullscreen=!0)),r=`${a}ExitFullscreen`,"function"==typeof document[r]?_names.exitFullscreen=r:(r=`${a}CancelFullScreen`,"function"==typeof document[r]&&(_names.exitFullscreen=r)),r=`${a}FullscreenEnabled`,void 0!==document[r]?_names.fullscreenEnabled=r:(r=`${a}FullScreenEnabled`,void 0!==document[r]&&(_names.fullscreenEnabled=r)),r=`${a}FullscreenElement`,void 0!==document[r]?_names.fullscreenElement=r:(r=`${a}FullScreenElement`,void 0!==document[r]&&(_names.fullscreenElement=r)),r=`${a}fullscreenchange`,void 0!==document[`on${r}`]&&("ms"===a&&(r="MSFullscreenChange"),_names.fullscreenchange=r),r=`${a}fullscreenerror`,void 0!==document[`on${r}`]&&("ms"===a&&(r="MSFullscreenError"),_names.fullscreenerror=r)}return _supportsFullscreen},Fullscreen.requestFullscreen=function(e,t){Fullscreen.supportsFullscreen()&&e[_names.requestFullscreen]({vrDisplay:t})},Fullscreen.exitFullscreen=function(){Fullscreen.supportsFullscreen()&&document[_names.exitFullscreen]()},Fullscreen._names=_names;var Fullscreen$1=Fullscreen;let theNavigator,isChromeResult,chromeVersionResult,isSafariResult,safariVersionResult,isWebkitResult,webkitVersionResult,isInternetExplorerResult,internetExplorerVersionResult,isEdgeResult,edgeVersionResult,isFirefoxResult,firefoxVersionResult,isWindowsResult,isIPadOrIOSResult,hasPointerEvents,imageRenderingValueResult,supportsImageRenderingPixelatedResult;function extractVersion(e){const t=e.split(".");for(let e=0,r=t.length;e<r;++e)t[e]=parseInt(t[e],10);return t}function isChrome(){if(!defined(isChromeResult)&&(isChromeResult=!1,!isEdge())){const e=/ Chrome\/([\.0-9]+)/.exec(theNavigator.userAgent);null!==e&&(isChromeResult=!0,chromeVersionResult=extractVersion(e[1]))}return isChromeResult}function chromeVersion(){return isChrome()&&chromeVersionResult}function isSafari(){if(!defined(isSafariResult)&&(isSafariResult=!1,!isChrome()&&!isEdge()&&/ Safari\/[\.0-9]+/.test(theNavigator.userAgent))){const e=/ Version\/([\.0-9]+)/.exec(theNavigator.userAgent);null!==e&&(isSafariResult=!0,safariVersionResult=extractVersion(e[1]))}return isSafariResult}function safariVersion(){return isSafari()&&safariVersionResult}function isWebkit(){if(!defined(isWebkitResult)){isWebkitResult=!1;const e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(theNavigator.userAgent);null!==e&&(isWebkitResult=!0,webkitVersionResult=extractVersion(e[1]),webkitVersionResult.isNightly=!!e[2])}return isWebkitResult}function webkitVersion(){return isWebkit()&&webkitVersionResult}function isInternetExplorer(){if(!defined(isInternetExplorerResult)){let e;isInternetExplorerResult=!1,"Microsoft Internet Explorer"===theNavigator.appName?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(theNavigator.userAgent),null!==e&&(isInternetExplorerResult=!0,internetExplorerVersionResult=extractVersion(e[1]))):"Netscape"===theNavigator.appName&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(theNavigator.userAgent),null!==e&&(isInternetExplorerResult=!0,internetExplorerVersionResult=extractVersion(e[1])))}return isInternetExplorerResult}function internetExplorerVersion(){return isInternetExplorer()&&internetExplorerVersionResult}function isEdge(){if(!defined(isEdgeResult)){isEdgeResult=!1;const e=/ Edg\/([\.0-9]+)/.exec(theNavigator.userAgent);null!==e&&(isEdgeResult=!0,edgeVersionResult=extractVersion(e[1]))}return isEdgeResult}function edgeVersion(){return isEdge()&&edgeVersionResult}function isFirefox(){if(!defined(isFirefoxResult)){isFirefoxResult=!1;const e=/Firefox\/([\.0-9]+)/.exec(theNavigator.userAgent);null!==e&&(isFirefoxResult=!0,firefoxVersionResult=extractVersion(e[1]))}return isFirefoxResult}function isWindows(){return defined(isWindowsResult)||(isWindowsResult=/Windows/i.test(theNavigator.appVersion)),isWindowsResult}function isIPadOrIOS(){return defined(isIPadOrIOSResult)||(isIPadOrIOSResult="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),isIPadOrIOSResult}function firefoxVersion(){return isFirefox()&&firefoxVersionResult}function supportsPointerEvents(){return defined(hasPointerEvents)||(hasPointerEvents=!isFirefox()&&"undefined"!=typeof PointerEvent&&(!defined(theNavigator.pointerEnabled)||theNavigator.pointerEnabled)),hasPointerEvents}function supportsImageRenderingPixelated(){if(!defined(supportsImageRenderingPixelatedResult)){const e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");const t=e.style.imageRendering;supportsImageRenderingPixelatedResult=defined(t)&&""!==t,supportsImageRenderingPixelatedResult&&(imageRenderingValueResult=t)}return supportsImageRenderingPixelatedResult}function imageRenderingValue(){return supportsImageRenderingPixelated()?imageRenderingValueResult:void 0}function supportsWebP(){if(!supportsWebP.initialized)throw new DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return supportsWebP._result}theNavigator="undefined"!=typeof navigator?navigator:{},supportsWebP._promise=void 0,supportsWebP._result=void 0,supportsWebP.initialize=function(){return defined(supportsWebP._promise)||(supportsWebP._promise=new Promise((e=>{const t=new Image;t.onload=function(){supportsWebP._result=t.width>0&&t.height>0,e(supportsWebP._result)},t.onerror=function(){supportsWebP._result=!1,e(supportsWebP._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}))),supportsWebP._promise},Object.defineProperties(supportsWebP,{initialized:{get:function(){return defined(supportsWebP._result)}}});const typedArrayTypes=[];"undefined"!=typeof ArrayBuffer&&(typedArrayTypes.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&typedArrayTypes.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&typedArrayTypes.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&typedArrayTypes.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&typedArrayTypes.push(BigUint64Array));const FeatureDetection={isChrome:isChrome,chromeVersion:chromeVersion,isSafari:isSafari,safariVersion:safariVersion,isWebkit:isWebkit,webkitVersion:webkitVersion,isInternetExplorer:isInternetExplorer,internetExplorerVersion:internetExplorerVersion,isEdge:isEdge,edgeVersion:edgeVersion,isFirefox:isFirefox,firefoxVersion:firefoxVersion,isWindows:isWindows,isIPadOrIOS:isIPadOrIOS,hardwareConcurrency:defaultValue(theNavigator.hardwareConcurrency,3),supportsPointerEvents:supportsPointerEvents,supportsImageRenderingPixelated:supportsImageRenderingPixelated,supportsWebP:supportsWebP,imageRenderingValue:imageRenderingValue,typedArrayTypes:typedArrayTypes,supportsBasis:function(e){return FeatureDetection.supportsWebAssembly()&&e.context.supportsBasis},supportsFullscreen:function(){return Fullscreen$1.supportsFullscreen()},supportsTypedArrays:function(){return"undefined"!=typeof ArrayBuffer},supportsBigInt64Array:function(){return"undefined"!=typeof BigInt64Array},supportsBigUint64Array:function(){return"undefined"!=typeof BigUint64Array},supportsBigInt:function(){return"undefined"!=typeof BigInt},supportsWebWorkers:function(){return"undefined"!=typeof Worker},supportsWebAssembly:function(){return"undefined"!=typeof WebAssembly},supportsWebgl2:function(e){return Check$1.defined("scene",e),e.context.webgl2},supportsEsmWebWorkers:function(){return!isFirefox()||parseInt(firefoxVersionResult)>=114}};var FeatureDetection$1=FeatureDetection;function Quaternion(e,t,r,n){this.x=defaultValue(e,0),this.y=defaultValue(t,0),this.z=defaultValue(r,0),this.w=defaultValue(n,0)}let fromAxisAngleScratch=new Cartesian3;Quaternion.fromAxisAngle=function(e,t,r){Check$1.typeOf.object("axis",e),Check$1.typeOf.number("angle",t);const n=t/2,a=Math.sin(n);fromAxisAngleScratch=Cartesian3.normalize(e,fromAxisAngleScratch);const i=fromAxisAngleScratch.x*a,o=fromAxisAngleScratch.y*a,s=fromAxisAngleScratch.z*a,c=Math.cos(n);return defined(r)?(r.x=i,r.y=o,r.z=s,r.w=c,r):new Quaternion(i,o,s,c)};const fromRotationMatrixNext=[1,2,0],fromRotationMatrixQuat=new Array(3);Quaternion.fromRotationMatrix=function(e,t){let r,n,a,i,o;Check$1.typeOf.object("matrix",e);const s=e[Matrix3.COLUMN0ROW0],c=e[Matrix3.COLUMN1ROW1],u=e[Matrix3.COLUMN2ROW2],l=s+c+u;if(l>0)r=Math.sqrt(l+1),o=.5*r,r=.5/r,n=(e[Matrix3.COLUMN1ROW2]-e[Matrix3.COLUMN2ROW1])*r,a=(e[Matrix3.COLUMN2ROW0]-e[Matrix3.COLUMN0ROW2])*r,i=(e[Matrix3.COLUMN0ROW1]-e[Matrix3.COLUMN1ROW0])*r;else{const t=fromRotationMatrixNext;let l=0;c>s&&(l=1),u>s&&u>c&&(l=2);const d=t[l],p=t[d];r=Math.sqrt(e[Matrix3.getElementIndex(l,l)]-e[Matrix3.getElementIndex(d,d)]-e[Matrix3.getElementIndex(p,p)]+1);const h=fromRotationMatrixQuat;h[l]=.5*r,r=.5/r,o=(e[Matrix3.getElementIndex(p,d)]-e[Matrix3.getElementIndex(d,p)])*r,h[d]=(e[Matrix3.getElementIndex(d,l)]+e[Matrix3.getElementIndex(l,d)])*r,h[p]=(e[Matrix3.getElementIndex(p,l)]+e[Matrix3.getElementIndex(l,p)])*r,n=-h[0],a=-h[1],i=-h[2]}return defined(t)?(t.x=n,t.y=a,t.z=i,t.w=o,t):new Quaternion(n,a,i,o)};const scratchHPRQuaternion$1=new Quaternion;let scratchHeadingQuaternion=new Quaternion,scratchPitchQuaternion=new Quaternion,scratchRollQuaternion=new Quaternion;Quaternion.fromHeadingPitchRoll=function(e,t){return Check$1.typeOf.object("headingPitchRoll",e),scratchRollQuaternion=Quaternion.fromAxisAngle(Cartesian3.UNIT_X,e.roll,scratchHPRQuaternion$1),scratchPitchQuaternion=Quaternion.fromAxisAngle(Cartesian3.UNIT_Y,-e.pitch,t),t=Quaternion.multiply(scratchPitchQuaternion,scratchRollQuaternion,scratchPitchQuaternion),scratchHeadingQuaternion=Quaternion.fromAxisAngle(Cartesian3.UNIT_Z,-e.heading,scratchHPRQuaternion$1),Quaternion.multiply(scratchHeadingQuaternion,t,t)};const sampledQuaternionAxis=new Cartesian3,sampledQuaternionRotation=new Cartesian3,sampledQuaternionTempQuaternion=new Quaternion,sampledQuaternionQuaternion0=new Quaternion,sampledQuaternionQuaternion0Conjugate=new Quaternion;Quaternion.packedLength=4,Quaternion.pack=function(e,t,r){return Check$1.typeOf.object("value",e),Check$1.defined("array",t),r=defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Quaternion.unpack=function(e,t,r){return Check$1.defined("array",e),t=defaultValue(t,0),defined(r)||(r=new Quaternion),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},Quaternion.packedInterpolationLength=3,Quaternion.convertPackedArrayForInterpolation=function(e,t,r,n){Quaternion.unpack(e,4*r,sampledQuaternionQuaternion0Conjugate),Quaternion.conjugate(sampledQuaternionQuaternion0Conjugate,sampledQuaternionQuaternion0Conjugate);for(let a=0,i=r-t+1;a<i;a++){const r=3*a;Quaternion.unpack(e,4*(t+a),sampledQuaternionTempQuaternion),Quaternion.multiply(sampledQuaternionTempQuaternion,sampledQuaternionQuaternion0Conjugate,sampledQuaternionTempQuaternion),sampledQuaternionTempQuaternion.w<0&&Quaternion.negate(sampledQuaternionTempQuaternion,sampledQuaternionTempQuaternion),Quaternion.computeAxis(sampledQuaternionTempQuaternion,sampledQuaternionAxis);const i=Quaternion.computeAngle(sampledQuaternionTempQuaternion);defined(n)||(n=[]),n[r]=sampledQuaternionAxis.x*i,n[r+1]=sampledQuaternionAxis.y*i,n[r+2]=sampledQuaternionAxis.z*i}},Quaternion.unpackInterpolationResult=function(e,t,r,n,a){defined(a)||(a=new Quaternion),Cartesian3.fromArray(e,0,sampledQuaternionRotation);const i=Cartesian3.magnitude(sampledQuaternionRotation);return Quaternion.unpack(t,4*n,sampledQuaternionQuaternion0),0===i?Quaternion.clone(Quaternion.IDENTITY,sampledQuaternionTempQuaternion):Quaternion.fromAxisAngle(sampledQuaternionRotation,i,sampledQuaternionTempQuaternion),Quaternion.multiply(sampledQuaternionTempQuaternion,sampledQuaternionQuaternion0,a)},Quaternion.clone=function(e,t){if(defined(e))return defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Quaternion(e.x,e.y,e.z,e.w)},Quaternion.conjugate=function(e,t){return Check$1.typeOf.object("quaternion",e),Check$1.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},Quaternion.magnitudeSquared=function(e){return Check$1.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Quaternion.magnitude=function(e){return Math.sqrt(Quaternion.magnitudeSquared(e))},Quaternion.normalize=function(e,t){Check$1.typeOf.object("result",t);const r=1/Quaternion.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,o=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=o,t},Quaternion.inverse=function(e,t){Check$1.typeOf.object("result",t);const r=Quaternion.magnitudeSquared(e);return t=Quaternion.conjugate(e,t),Quaternion.multiplyByScalar(t,1/r,t)},Quaternion.add=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Quaternion.subtract=function(e,t,r){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Quaternion.negate=function(e,t){return Check$1.typeOf.object("quaternion",e),Check$1.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Quaternion.dot=function(e,t){return Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Quaternion.multiply=function(e,t,r){Check$1.typeOf.object("left",e),Check$1.typeOf.object("right",t),Check$1.typeOf.object("result",r);const n=e.x,a=e.y,i=e.z,o=e.w,s=t.x,c=t.y,u=t.z,l=t.w,d=o*s+n*l+a*u-i*c,p=o*c-n*u+a*l+i*s,h=o*u+n*c-a*s+i*l,f=o*l-n*s-a*c-i*u;return r.x=d,r.y=p,r.z=h,r.w=f,r},Quaternion.multiplyByScalar=function(e,t,r){return Check$1.typeOf.object("quaternion",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Quaternion.divideByScalar=function(e,t,r){return Check$1.typeOf.object("quaternion",e),Check$1.typeOf.number("scalar",t),Check$1.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Quaternion.computeAxis=function(e,t){Check$1.typeOf.object("quaternion",e),Check$1.typeOf.object("result",t);const r=e.w;if(Math.abs(r-1)<CesiumMath$1.EPSILON6||Math.abs(r+1)<CesiumMath$1.EPSILON6)return t.x=1,t.y=t.z=0,t;const n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},Quaternion.computeAngle=function(e){return Check$1.typeOf.object("quaternion",e),Math.abs(e.w-1)<CesiumMath$1.EPSILON6?0:2*Math.acos(e.w)};let lerpScratch=new Quaternion;Quaternion.lerp=function(e,t,r,n){return Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n),lerpScratch=Quaternion.multiplyByScalar(t,r,lerpScratch),n=Quaternion.multiplyByScalar(e,1-r,n),Quaternion.add(lerpScratch,n,n)};let slerpEndNegated=new Quaternion,slerpScaledP=new Quaternion,slerpScaledR=new Quaternion;Quaternion.slerp=function(e,t,r,n){Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n);let a=Quaternion.dot(e,t),i=t;if(a<0&&(a=-a,i=slerpEndNegated=Quaternion.negate(t,slerpEndNegated)),1-a<CesiumMath$1.EPSILON6)return Quaternion.lerp(e,i,r,n);const o=Math.acos(a);return slerpScaledP=Quaternion.multiplyByScalar(e,Math.sin((1-r)*o),slerpScaledP),slerpScaledR=Quaternion.multiplyByScalar(i,Math.sin(r*o),slerpScaledR),n=Quaternion.add(slerpScaledP,slerpScaledR,n),Quaternion.multiplyByScalar(n,1/Math.sin(o),n)},Quaternion.log=function(e,t){Check$1.typeOf.object("quaternion",e),Check$1.typeOf.object("result",t);const r=CesiumMath$1.acosClamped(e.w);let n=0;return 0!==r&&(n=r/Math.sin(r)),Cartesian3.multiplyByScalar(e,n,t)},Quaternion.exp=function(e,t){Check$1.typeOf.object("cartesian",e),Check$1.typeOf.object("result",t);const r=Cartesian3.magnitude(e);let n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};const squadScratchCartesian0=new Cartesian3,squadScratchCartesian1=new Cartesian3,squadScratchQuaternion0=new Quaternion,squadScratchQuaternion1=new Quaternion;Quaternion.computeInnerQuadrangle=function(e,t,r,n){Check$1.typeOf.object("q0",e),Check$1.typeOf.object("q1",t),Check$1.typeOf.object("q2",r),Check$1.typeOf.object("result",n);const a=Quaternion.conjugate(t,squadScratchQuaternion0);Quaternion.multiply(a,r,squadScratchQuaternion1);const i=Quaternion.log(squadScratchQuaternion1,squadScratchCartesian0);Quaternion.multiply(a,e,squadScratchQuaternion1);const o=Quaternion.log(squadScratchQuaternion1,squadScratchCartesian1);return Cartesian3.add(i,o,i),Cartesian3.multiplyByScalar(i,.25,i),Cartesian3.negate(i,i),Quaternion.exp(i,squadScratchQuaternion0),Quaternion.multiply(t,squadScratchQuaternion0,n)},Quaternion.squad=function(e,t,r,n,a,i){Check$1.typeOf.object("q0",e),Check$1.typeOf.object("q1",t),Check$1.typeOf.object("s0",r),Check$1.typeOf.object("s1",n),Check$1.typeOf.number("t",a),Check$1.typeOf.object("result",i);const o=Quaternion.slerp(e,t,a,squadScratchQuaternion0),s=Quaternion.slerp(r,n,a,squadScratchQuaternion1);return Quaternion.slerp(o,s,2*a*(1-a),i)};const fastSlerpScratchQuaternion=new Quaternion,opmu=1.9011074535173003,u=FeatureDetection$1.supportsTypedArrays()?new Float32Array(8):[],v=FeatureDetection$1.supportsTypedArrays()?new Float32Array(8):[],bT=FeatureDetection$1.supportsTypedArrays()?new Float32Array(8):[],bD=FeatureDetection$1.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){const t=e+1,r=2*t+1;u[e]=1/(t*r),v[e]=t/r}u[7]=opmu/136,v[7]=8*opmu/17,Quaternion.fastSlerp=function(e,t,r,n){Check$1.typeOf.object("start",e),Check$1.typeOf.object("end",t),Check$1.typeOf.number("t",r),Check$1.typeOf.object("result",n);let a,i=Quaternion.dot(e,t);i>=0?a=1:(a=-1,i=-i);const o=i-1,s=1-r,c=r*r,l=s*s;for(let e=7;e>=0;--e)bT[e]=(u[e]*c-v[e])*o,bD[e]=(u[e]*l-v[e])*o;const d=a*r*(1+bT[0]*(1+bT[1]*(1+bT[2]*(1+bT[3]*(1+bT[4]*(1+bT[5]*(1+bT[6]*(1+bT[7])))))))),p=s*(1+bD[0]*(1+bD[1]*(1+bD[2]*(1+bD[3]*(1+bD[4]*(1+bD[5]*(1+bD[6]*(1+bD[7])))))))),h=Quaternion.multiplyByScalar(e,p,fastSlerpScratchQuaternion);return Quaternion.multiplyByScalar(t,d,n),Quaternion.add(h,n,n)},Quaternion.fastSquad=function(e,t,r,n,a,i){Check$1.typeOf.object("q0",e),Check$1.typeOf.object("q1",t),Check$1.typeOf.object("s0",r),Check$1.typeOf.object("s1",n),Check$1.typeOf.number("t",a),Check$1.typeOf.object("result",i);const o=Quaternion.fastSlerp(e,t,a,squadScratchQuaternion0),s=Quaternion.fastSlerp(r,n,a,squadScratchQuaternion1);return Quaternion.fastSlerp(o,s,2*a*(1-a),i)},Quaternion.equals=function(e,t){return e===t||defined(e)&&defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Quaternion.equalsEpsilon=function(e,t,r){return r=defaultValue(r,0),e===t||defined(e)&&defined(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},Quaternion.ZERO=Object.freeze(new Quaternion(0,0,0,0)),Quaternion.IDENTITY=Object.freeze(new Quaternion(0,0,0,1)),Quaternion.prototype.clone=function(e){return Quaternion.clone(this,e)},Quaternion.prototype.equals=function(e){return Quaternion.equals(this,e)},Quaternion.prototype.equalsEpsilon=function(e,t){return Quaternion.equalsEpsilon(this,e,t)},Quaternion.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const Transforms={},vectorProductLocalFrame={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},degeneratePositionLocalFrame={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},localFrameToFixedFrameCache={},scratchCalculateCartesian={east:new Cartesian3,north:new Cartesian3,up:new Cartesian3,west:new Cartesian3,south:new Cartesian3,down:new Cartesian3};let scratchFirstCartesian=new Cartesian3,scratchSecondCartesian=new Cartesian3,scratchThirdCartesian=new Cartesian3;Transforms.localFrameToFixedFrameGenerator=function(e,t){if(!vectorProductLocalFrame.hasOwnProperty(e)||!vectorProductLocalFrame[e].hasOwnProperty(t))throw new DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");const r=vectorProductLocalFrame[e][t];let n;const a=e+t;return defined(localFrameToFixedFrameCache[a])?n=localFrameToFixedFrameCache[a]:(n=function(n,a,i){if(!defined(n))throw new DeveloperError("origin is required.");if(defined(i)||(i=new Matrix4),Cartesian3.equalsEpsilon(n,Cartesian3.ZERO,CesiumMath$1.EPSILON14))Cartesian3.unpack(degeneratePositionLocalFrame[e],0,scratchFirstCartesian),Cartesian3.unpack(degeneratePositionLocalFrame[t],0,scratchSecondCartesian),Cartesian3.unpack(degeneratePositionLocalFrame[r],0,scratchThirdCartesian);else if(CesiumMath$1.equalsEpsilon(n.x,0,CesiumMath$1.EPSILON14)&&CesiumMath$1.equalsEpsilon(n.y,0,CesiumMath$1.EPSILON14)){const a=CesiumMath$1.sign(n.z);Cartesian3.unpack(degeneratePositionLocalFrame[e],0,scratchFirstCartesian),"east"!==e&&"west"!==e&&Cartesian3.multiplyByScalar(scratchFirstCartesian,a,scratchFirstCartesian),Cartesian3.unpack(degeneratePositionLocalFrame[t],0,scratchSecondCartesian),"east"!==t&&"west"!==t&&Cartesian3.multiplyByScalar(scratchSecondCartesian,a,scratchSecondCartesian),Cartesian3.unpack(degeneratePositionLocalFrame[r],0,scratchThirdCartesian),"east"!==r&&"west"!==r&&Cartesian3.multiplyByScalar(scratchThirdCartesian,a,scratchThirdCartesian)}else{(a=defaultValue(a,Ellipsoid.WGS84)).geodeticSurfaceNormal(n,scratchCalculateCartesian.up);const i=scratchCalculateCartesian.up,o=scratchCalculateCartesian.east;o.x=-n.y,o.y=n.x,o.z=0,Cartesian3.normalize(o,scratchCalculateCartesian.east),Cartesian3.cross(i,o,scratchCalculateCartesian.north),Cartesian3.multiplyByScalar(scratchCalculateCartesian.up,-1,scratchCalculateCartesian.down),Cartesian3.multiplyByScalar(scratchCalculateCartesian.east,-1,scratchCalculateCartesian.west),Cartesian3.multiplyByScalar(scratchCalculateCartesian.north,-1,scratchCalculateCartesian.south),scratchFirstCartesian=scratchCalculateCartesian[e],scratchSecondCartesian=scratchCalculateCartesian[t],scratchThirdCartesian=scratchCalculateCartesian[r]}return i[0]=scratchFirstCartesian.x,i[1]=scratchFirstCartesian.y,i[2]=scratchFirstCartesian.z,i[3]=0,i[4]=scratchSecondCartesian.x,i[5]=scratchSecondCartesian.y,i[6]=scratchSecondCartesian.z,i[7]=0,i[8]=scratchThirdCartesian.x,i[9]=scratchThirdCartesian.y,i[10]=scratchThirdCartesian.z,i[11]=0,i[12]=n.x,i[13]=n.y,i[14]=n.z,i[15]=1,i},localFrameToFixedFrameCache[a]=n),n},Transforms.eastNorthUpToFixedFrame=Transforms.localFrameToFixedFrameGenerator("east","north"),Transforms.northEastDownToFixedFrame=Transforms.localFrameToFixedFrameGenerator("north","east"),Transforms.northUpEastToFixedFrame=Transforms.localFrameToFixedFrameGenerator("north","up"),Transforms.northWestUpToFixedFrame=Transforms.localFrameToFixedFrameGenerator("north","west");const scratchHPRQuaternion=new Quaternion,scratchScale=new Cartesian3(1,1,1),scratchHPRMatrix4=new Matrix4;Transforms.headingPitchRollToFixedFrame=function(e,t,r,n,a){Check$1.typeOf.object("HeadingPitchRoll",t),n=defaultValue(n,Transforms.eastNorthUpToFixedFrame);const i=Quaternion.fromHeadingPitchRoll(t,scratchHPRQuaternion),o=Matrix4.fromTranslationQuaternionRotationScale(Cartesian3.ZERO,i,scratchScale,scratchHPRMatrix4);return a=n(e,r,a),Matrix4.multiply(a,o,a)};const scratchENUMatrix4=new Matrix4,scratchHPRMatrix3=new Matrix3;Transforms.headingPitchRollQuaternion=function(e,t,r,n,a){Check$1.typeOf.object("HeadingPitchRoll",t);const i=Transforms.headingPitchRollToFixedFrame(e,t,r,n,scratchENUMatrix4),o=Matrix4.getMatrix3(i,scratchHPRMatrix3);return Quaternion.fromRotationMatrix(o,a)};const noScale=new Cartesian3(1,1,1),hprCenterScratch=new Cartesian3,ffScratch=new Matrix4,hprTransformScratch=new Matrix4,hprRotationScratch=new Matrix3,hprQuaternionScratch=new Quaternion;Transforms.fixedFrameToHeadingPitchRoll=function(e,t,r,n){Check$1.defined("transform",e),t=defaultValue(t,Ellipsoid.WGS84),r=defaultValue(r,Transforms.eastNorthUpToFixedFrame),defined(n)||(n=new HeadingPitchRoll);const a=Matrix4.getTranslation(e,hprCenterScratch);if(Cartesian3.equals(a,Cartesian3.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;let i=Matrix4.inverseTransformation(r(a,t,ffScratch),ffScratch),o=Matrix4.setScale(e,noScale,hprTransformScratch);o=Matrix4.setTranslation(o,Cartesian3.ZERO,o),i=Matrix4.multiply(i,o,i);let s=Quaternion.fromRotationMatrix(Matrix4.getMatrix3(i,hprRotationScratch),hprQuaternionScratch);return s=Quaternion.normalize(s,s),HeadingPitchRoll.fromQuaternion(s,n)};const gmstConstant0=24110.54841,gmstConstant1=8640184.812866,gmstConstant2=.093104,gmstConstant3=-62e-7,rateCoef=11772758384668e-32,wgs84WRPrecessing=72921158553e-15,twoPiOverSecondsInDay=CesiumMath$1.TWO_PI/86400;let dateInUtc=new JulianDate;Transforms.computeTemeToPseudoFixedMatrix=function(e,t){if(!defined(e))throw new DeveloperError("date is required.");dateInUtc=JulianDate.addSeconds(e,-JulianDate.computeTaiMinusUtc(e),dateInUtc);const r=dateInUtc.dayNumber,n=dateInUtc.secondsOfDay;let a;const i=r-2451545;a=n>=43200?(i+.5)/TimeConstants$1.DAYS_PER_JULIAN_CENTURY:(i-.5)/TimeConstants$1.DAYS_PER_JULIAN_CENTURY;const o=(gmstConstant0+a*(gmstConstant1+a*(gmstConstant2+a*gmstConstant3)))*twoPiOverSecondsInDay%CesiumMath$1.TWO_PI+(wgs84WRPrecessing+rateCoef*(r-2451545.5))*((n+.5*TimeConstants$1.SECONDS_PER_DAY)%TimeConstants$1.SECONDS_PER_DAY),s=Math.cos(o),c=Math.sin(o);return defined(t)?(t[0]=s,t[1]=-c,t[2]=0,t[3]=c,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Matrix3(s,c,0,-c,s,0,0,0,1)},Transforms.iau2006XysData=new Iau2006XysData,Transforms.earthOrientationParameters=EarthOrientationParameters.NONE;const ttMinusTai=32.184,j2000ttDays=2451545;Transforms.preloadIcrfFixed=function(e){const t=e.start.dayNumber,r=e.start.secondsOfDay+ttMinusTai,n=e.stop.dayNumber,a=e.stop.secondsOfDay+ttMinusTai;return Transforms.iau2006XysData.preload(t,r,n,a)},Transforms.computeIcrfToFixedMatrix=function(e,t){if(!defined(e))throw new DeveloperError("date is required.");defined(t)||(t=new Matrix3);const r=Transforms.computeFixedToIcrfMatrix(e,t);if(defined(r))return Matrix3.transpose(r,t)};const xysScratch=new Iau2006XysSample(0,0,0),eopScratch=new EarthOrientationParametersSample(0,0,0,0,0),rotation1Scratch=new Matrix3,rotation2Scratch=new Matrix3;Transforms.computeFixedToIcrfMatrix=function(e,t){if(!defined(e))throw new DeveloperError("date is required.");defined(t)||(t=new Matrix3);const r=Transforms.earthOrientationParameters.compute(e,eopScratch);if(!defined(r))return;const n=e.dayNumber,a=e.secondsOfDay+ttMinusTai,i=Transforms.iau2006XysData.computeXysRadians(n,a,xysScratch);if(!defined(i))return;const o=i.x+r.xPoleOffset,s=i.y+r.yPoleOffset,c=1/(1+Math.sqrt(1-o*o-s*s)),u=rotation1Scratch;u[0]=1-c*o*o,u[3]=-c*o*s,u[6]=o,u[1]=-c*o*s,u[4]=1-c*s*s,u[7]=s,u[2]=-o,u[5]=-s,u[8]=1-c*(o*o+s*s);const l=Matrix3.fromRotationZ(-i.s,rotation2Scratch),d=Matrix3.multiply(u,l,rotation1Scratch),p=e.dayNumber-2451545,h=(e.secondsOfDay-JulianDate.computeTaiMinusUtc(e)+r.ut1MinusUtc)/TimeConstants$1.SECONDS_PER_DAY;let f=.779057273264+h+.00273781191135448*(p+h);f=f%1*CesiumMath$1.TWO_PI;const m=Matrix3.fromRotationZ(f,rotation2Scratch),y=Matrix3.multiply(d,m,rotation1Scratch),g=Math.cos(r.xPoleWander),C=Math.cos(r.yPoleWander),b=Math.sin(r.xPoleWander),x=Math.sin(r.yPoleWander);let w=n-j2000ttDays+a/TimeConstants$1.SECONDS_PER_DAY;w/=36525;const v=-47e-6*w*CesiumMath$1.RADIANS_PER_DEGREE/3600,_=Math.cos(v),O=Math.sin(v),$=rotation2Scratch;return $[0]=g*_,$[1]=g*O,$[2]=b,$[3]=-C*O+x*b*_,$[4]=C*_+x*b*O,$[5]=-x*g,$[6]=-x*O-C*b*_,$[7]=x*_-C*b*O,$[8]=C*g,Matrix3.multiply(y,$,t)};const pointToWindowCoordinatesTemp=new Cartesian4;Transforms.pointToWindowCoordinates=function(e,t,r,n){return(n=Transforms.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Transforms.pointToGLWindowCoordinates=function(e,t,r,n){if(!defined(e))throw new DeveloperError("modelViewProjectionMatrix is required.");if(!defined(t))throw new DeveloperError("viewportTransformation is required.");if(!defined(r))throw new DeveloperError("point is required.");defined(n)||(n=new Cartesian2);const a=pointToWindowCoordinatesTemp;return Matrix4.multiplyByVector(e,Cartesian4.fromElements(r.x,r.y,r.z,1,a),a),Cartesian4.multiplyByScalar(a,1/a.w,a),Matrix4.multiplyByVector(t,a,a),Cartesian2.fromCartesian4(a,n)};const normalScratch=new Cartesian3,rightScratch=new Cartesian3,upScratch=new Cartesian3;Transforms.rotationMatrixFromPositionVelocity=function(e,t,r,n){if(!defined(e))throw new DeveloperError("position is required.");if(!defined(t))throw new DeveloperError("velocity is required.");const a=defaultValue(r,Ellipsoid.WGS84).geodeticSurfaceNormal(e,normalScratch);let i=Cartesian3.cross(t,a,rightScratch);Cartesian3.equalsEpsilon(i,Cartesian3.ZERO,CesiumMath$1.EPSILON6)&&(i=Cartesian3.clone(Cartesian3.UNIT_X,i));const o=Cartesian3.cross(i,t,upScratch);return Cartesian3.normalize(o,o),Cartesian3.cross(t,o,i),Cartesian3.negate(i,i),Cartesian3.normalize(i,i),defined(n)||(n=new Matrix3),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=i.x,n[4]=i.y,n[5]=i.z,n[6]=o.x,n[7]=o.y,n[8]=o.z,n};const swizzleMatrix=new Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),scratchCartographic=new Cartographic,scratchCartesian3Projection=new Cartesian3,scratchCenter=new Cartesian3,scratchRotation=new Matrix3,scratchFromENU=new Matrix4,scratchToENU=new Matrix4;Transforms.basisTo2D=function(e,t,r){if(!defined(e))throw new DeveloperError("projection is required.");if(!defined(t))throw new DeveloperError("matrix is required.");if(!defined(r))throw new DeveloperError("result is required.");const n=Matrix4.getTranslation(t,scratchCenter),a=e.ellipsoid,i=a.cartesianToCartographic(n,scratchCartographic),o=e.project(i,scratchCartesian3Projection);Cartesian3.fromElements(o.z,o.x,o.y,o);const s=Transforms.eastNorthUpToFixedFrame(n,a,scratchFromENU),c=Matrix4.inverseTransformation(s,scratchToENU),u=Matrix4.getMatrix3(t,scratchRotation),l=Matrix4.multiplyByMatrix3(c,u,r);return Matrix4.multiply(swizzleMatrix,l,r),Matrix4.setTranslation(r,o,r),r},Transforms.wgs84To2DModelMatrix=function(e,t,r){if(!defined(e))throw new DeveloperError("projection is required.");if(!defined(t))throw new DeveloperError("center is required.");if(!defined(r))throw new DeveloperError("result is required.");const n=e.ellipsoid,a=Transforms.eastNorthUpToFixedFrame(t,n,scratchFromENU),i=Matrix4.inverseTransformation(a,scratchToENU),o=n.cartesianToCartographic(t,scratchCartographic),s=e.project(o,scratchCartesian3Projection);Cartesian3.fromElements(s.z,s.x,s.y,s);const c=Matrix4.fromTranslation(s,scratchFromENU);return Matrix4.multiply(swizzleMatrix,i,r),Matrix4.multiply(c,r,r),r};var Transforms$1=Transforms;function create_fragment$2(e){let t,r,n,a,i,o,s,c,u,l,d,p,h,f,m,y,g,C,b,x,w,v,_,O,$,S,M,E,k,R,T,q,D,A,I,j,P,z,U,N,F,Q,L,V,B,W,H,J,Y,G,X,Z,K,ee,te,re,ne,ae,ie,oe,se,ce,ue,le,de,pe,he=e[1].voltage+"",fe=e[1].level+"",me=e[1].gps+"",ye=e[1].gpsFix+"",ge=e[1].armed+"",Ce=e[1].mode+"",be=e[1].ekf+"",xe=e[1].alt+"",we=e[1].slAlt+"",ve=e[1].airSpeed+"",_e=e[1].groundSpeed+"";return{c(){t=element("div"),r=element("div"),n=element("div"),a=element("div"),i=text("드론ID : "),o=text(e[0]),s=space(),c=element("div"),u=element("div"),l=element("div"),l.innerHTML='<div class="col">배터리</div> \n                    <div class="col">GPS</div> \n                    <div class="col">Telemetry</div>',d=space(),p=element("div"),h=element("div"),f=text(he),m=element("br"),y=text(fe),g=space(),C=element("div"),b=text(me),x=element("br"),w=text(ye),v=space(),_=element("div"),_.innerHTML="99%<br/>25%",O=space(),$=element("div"),S=element("div"),M=element("div"),E=text(ge),k=space(),R=element("div"),T=text(Ce),q=space(),D=element("div"),A=text(be),I=space(),j=element("div"),P=element("div"),z=element("div"),U=element("div"),N=element("div"),N.innerHTML='<div class="col">고도 (m)</div>',F=space(),Q=element("div"),L=element("div"),V=text("상대고도"),B=element("br"),W=text(xe),H=space(),J=element("div"),Y=text("해수면고도"),G=element("br"),X=text(we),Z=space(),K=element("div"),ee=element("div"),te=element("div"),te.innerHTML='<div class="col">속도 (m/s)</div>',re=space(),ne=element("div"),ae=element("div"),ie=text("Air"),oe=element("br"),se=text(ve),ce=space(),ue=element("div"),le=text("Ground"),de=element("br"),pe=text(_e),attr(a,"class","col"),attr(n,"class","row"),set_style(n,"color","white"),set_style(n,"font-size","1.1em"),set_style(n,"background","rgba(50,50,50,0.8)"),set_style(n,"padding","3px"),set_style(n,"text-align","center"),attr(l,"class","row"),set_style(l,"background","rgba(50,50,50,0.8)"),set_style(l,"padding","3px 0 3px 0"),attr(h,"class","col"),attr(C,"class","col"),attr(_,"class","col"),attr(p,"class","row"),set_style(p,"font-size","1.2em"),set_style(p,"padding","5px 0 5px 0"),attr(u,"class","container"),set_style(u,"border","1px solid rgba(150,150,150,0.8)"),set_style(u,"border-radius","5px"),attr(M,"class","col"),attr(R,"class","col"),attr(D,"class","col"),attr(S,"class","row"),set_style(S,"font-size","1.1em"),set_style(S,"padding","5px 0 4px 0"),set_style(S,"color","yellow"),attr($,"class","container"),attr(N,"class","row"),set_style(N,"background","rgba(50,50,50,0.8)"),set_style(N,"padding","3px 0 3px 0"),attr(L,"class","col"),attr(J,"class","col"),attr(Q,"class","row"),set_style(Q,"font-size","1.2em"),set_style(Q,"padding","5px 0 5px 0"),attr(U,"class","container"),attr(z,"class","col g-0"),set_style(z,"border-right","1px solid rgba(150,150,150,0.8)"),attr(te,"class","row"),set_style(te,"background","rgba(50,50,50,0.8)"),set_style(te,"padding","3px 0 3px 0"),attr(ae,"class","col"),attr(ue,"class","col"),attr(ne,"class","row"),set_style(ne,"font-size","1.2em"),set_style(ne,"padding","5px 0 5px 0"),attr(ee,"class","container"),attr(K,"class","col g-0"),set_style(K,"border-right","1px solid rgba(150,150,150,0.8)"),attr(P,"class","row"),attr(j,"class","container"),set_style(j,"border","1px solid rgba(150,150,150,0.8)"),set_style(j,"border-radius","5px"),attr(c,"class","row"),set_style(c,"color","white"),set_style(c,"font-size","1em"),set_style(c,"background","rgba(0,0,0,0.8)"),set_style(c,"padding","5px"),set_style(c,"text-align","center"),attr(r,"class","container"),set_style(t,"width","400px"),attr(t,"class","status-layer")},m(e,he){insert(e,t,he),append(t,r),append(r,n),append(n,a),append(a,i),append(a,o),append(r,s),append(r,c),append(c,u),append(u,l),append(u,d),append(u,p),append(p,h),append(h,f),append(h,m),append(h,y),append(p,g),append(p,C),append(C,b),append(C,x),append(C,w),append(p,v),append(p,_),append(c,O),append(c,$),append($,S),append(S,M),append(M,E),append(S,k),append(S,R),append(R,T),append(S,q),append(S,D),append(D,A),append(c,I),append(c,j),append(j,P),append(P,z),append(z,U),append(U,N),append(U,F),append(U,Q),append(Q,L),append(L,V),append(L,B),append(L,W),append(Q,H),append(Q,J),append(J,Y),append(J,G),append(J,X),append(P,Z),append(P,K),append(K,ee),append(ee,te),append(ee,re),append(ee,ne),append(ne,ae),append(ae,ie),append(ae,oe),append(ae,se),append(ne,ce),append(ne,ue),append(ue,le),append(ue,de),append(ue,pe)},p(e,[t]){1&t&&set_data(o,e[0]),2&t&&he!==(he=e[1].voltage+"")&&set_data(f,he),2&t&&fe!==(fe=e[1].level+"")&&set_data(y,fe),2&t&&me!==(me=e[1].gps+"")&&set_data(b,me),2&t&&ye!==(ye=e[1].gpsFix+"")&&set_data(w,ye),2&t&&ge!==(ge=e[1].armed+"")&&set_data(E,ge),2&t&&Ce!==(Ce=e[1].mode+"")&&set_data(T,Ce),2&t&&be!==(be=e[1].ekf+"")&&set_data(A,be),2&t&&xe!==(xe=e[1].alt+"")&&set_data(W,xe),2&t&&we!==(we=e[1].slAlt+"")&&set_data(X,we),2&t&&ve!==(ve=e[1].airSpeed+"")&&set_data(se,ve),2&t&&_e!==(_e=e[1].groundSpeed+"")&&set_data(pe,_e)},i:noop,o:noop,d(e){e&&detach(t)}}}function instance$2(e,t,r){let n,a,i,o;component_subscribe(e,DRONE_MODEL_SCALE,(e=>r(3,n=e))),component_subscribe(e,MAP_VIEWER,(e=>r(4,a=e))),component_subscribe(e,DRONE_YAW_OFFSET,(e=>r(5,i=e))),component_subscribe(e,DRONEKIT_API,(e=>r(6,o=e)));let{droneID:s}=t,c=null;onMount((()=>{setInterval((()=>{fetch(o+"drone_status/"+encodeURIComponent(s),{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let t=e.Battery.split(",")[0];t=t.split("=")[1];let o=e.Battery.split(",")[2];o=o.split("=")[1];let s=e.GPS.split(",")[1];s=s.split("=")[1];let l=e.GPS.split(",")[0];switch(l=l.split("=")[1],l){case"0":case"1":l="No";break;case"2":l="2D";break;case"3":l="3D"}let d=e.ekf_ok;d="True"===d?"EKF OK":"EKF Error";let p=e.Armed;p="True"===p?"ARMED":"DISARMED",r(1,u={airSpeed:parseFloat(e.AirSpeed).toFixed(2),groundSpeed:parseFloat(e.GroundSpeed).toFixed(2),voltage:t+"V",level:o+"%",mode:e.Mode,gps:s,gpsFix:l,armed:p,ekf:d,lat:e.Lat,lng:e.Lng,alt:e.Alt,slAlt:e.SL_Alt,roll:e.Roll,pitch:e.Pitch,yaw:e.Yaw}),r(1,u),function(){if(null!=c){console.log("drone update");let e=Cartesian3.fromDegrees(u.lng,u.lat,u.slAlt),t=new HeadingPitchRoll(CesiumMath$1.toRadians(u.yaw-i),u.pitch,u.roll),r=Transforms$1.headingPitchRollQuaternion(e,t);c.position=e,c.orientation=r}else console.log("drone add"),c=a.entities.add({name:"Drone",position:Cartesian3.fromDegrees(u.lng,u.lat,u.slAlt),model:{uri:"/scene.gltf",scale:n}})}()})).catch((e=>{console.error("Error:",e)}))}),API_CALL_INTERVAL)}));let u={airSpeed:0,groundSpeed:0,voltage:"--",level:"--",mode:"--",gps:null,gpsFix:null,armed:null,ekf:null,lat:0,lng:0,alt:0,slAlt:0,roll:0,pitch:0,yaw:0};return e.$$set=e=>{"droneID"in e&&r(0,s=e.droneID)},[s,u]}class Drone_status extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{droneID:0})}}function get_each_context(e,t,r){const n=e.slice();return n[14]=t[r],n}function get_each_context_1(e,t,r){const n=e.slice();return n[14]=t[r],n}function create_each_block_1(e){let t,r;return t=new Drone_label({props:{droneID:e[14]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},p(e,r){const n={};2&r&&(n.droneID=e[14]),t.$set(n)},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_each_block(e){let t,r;return t=new Drone_status({props:{droneID:e[14]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),r=!0},p(e,r){const n={};2&r&&(n.droneID=e[14]),t.$set(n)},i(e){r||(transition_in(t.$$.fragment,e),r=!0)},o(e){transition_out(t.$$.fragment,e),r=!1},d(e){destroy_component(t,e)}}}function create_else_block(e){let t,r,n,a,i,o,s,c,u,l,d,p,h,f,m,y,g,C,b;return{c(){t=element("form"),r=element("select"),n=element("option"),n.textContent="연결방식",a=element("option"),a.textContent="TCP",i=space(),o=element("input"),s=space(),c=element("input"),u=space(),l=element("input"),d=space(),p=element("div"),h=element("div"),f=element("div"),m=element("button"),m.textContent="연결",y=space(),g=element("button"),g.textContent="취소",n.__value="",n.value=n.__value,n.selected=!0,a.__value="tcp",a.value=a.__value,attr(r,"class","form-select"),attr(r,"id","connectType"),attr(r,"aria-label","Default select example"),set_style(r,"margin-bottom","10px"),void 0===e[2].connectType&&add_render_callback((()=>e[6].call(r))),attr(o,"type","text"),attr(o,"class","form-control"),attr(o,"id","droneID"),attr(o,"placeholder","드론 ID"),set_style(o,"margin-bottom","10px"),attr(c,"type","text"),attr(c,"class","form-control"),attr(c,"id","IPAddress"),attr(c,"placeholder","IP 주소"),set_style(c,"margin-bottom","10px"),attr(l,"type","number"),attr(l,"class","form-control"),attr(l,"id","port"),attr(l,"placeholder","포트번호"),set_style(l,"margin-bottom","10px"),attr(m,"type","submit"),attr(m,"class","btn btn-primary"),set_style(m,"margin-right","20px"),attr(g,"type","button"),attr(g,"class","btn btn-secondary"),attr(f,"class","col d-flex justify-content-center"),attr(h,"class","row"),attr(p,"class","container"),attr(t,"name","myform"),attr(t,"id","myform")},m(x,w){insert(x,t,w),append(t,r),append(r,n),append(r,a),select_option(r,e[2].connectType,!0),append(t,i),append(t,o),set_input_value(o,e[2].droneID),append(t,s),append(t,c),set_input_value(c,e[2].IPAddress),append(t,u),append(t,l),set_input_value(l,e[2].port),append(t,d),append(t,p),append(p,h),append(h,f),append(f,m),append(f,y),append(f,g),C||(b=[listen(r,"change",e[6]),listen(o,"input",e[7]),listen(c,"input",e[8]),listen(l,"input",e[9]),listen(g,"click",e[4]),listen(t,"submit",e[5])],C=!0)},p(e,t){4&t&&select_option(r,e[2].connectType),4&t&&o.value!==e[2].droneID&&set_input_value(o,e[2].droneID),4&t&&c.value!==e[2].IPAddress&&set_input_value(c,e[2].IPAddress),4&t&&to_number(l.value)!==e[2].port&&set_input_value(l,e[2].port)},d(e){e&&detach(t),C=!1,run_all(b)}}}function create_if_block(e){let t;return{c(){t=element("div"),t.innerHTML='<div class="spinner-border text-light" style="width: 4rem; height: 4rem;" role="status"><span class="visually-hidden">Loading...</span></div>',set_style(t,"text-align","center")},m(e,r){insert(e,t,r)},p:noop,d(e){e&&detach(t)}}}function create_fragment$1(e){let t,r,n,a,i,o,s,c,u,l,d,p,h,f,m,y,g,C,b,x,w,v,_,O,$,S=e[1],M=[];for(let t=0;t<S.length;t+=1)M[t]=create_each_block_1(get_each_context_1(e,S,t));const E=e=>transition_out(M[e],1,1,(()=>{M[e]=null}));let k=e[1],R=[];for(let t=0;t<k.length;t+=1)R[t]=create_each_block(get_each_context(e,k,t));const T=e=>transition_out(R[e],1,1,(()=>{R[e]=null}));function q(e,t){return!0===e[0]?create_if_block:create_else_block}let D=q(e),A=D(e);return{c(){t=element("div"),r=element("div"),n=element("div"),a=element("div");for(let e=0;e<M.length;e+=1)M[e].c();i=space(),o=element("div"),s=element("button"),s.innerHTML='<img src="/images/icon_drone.png" width="35" height="35" alt="drone icon"/> \n                    <p style="margin-top:5px">드론추가</p>',c=space(),u=element("div");for(let e=0;e<R.length;e+=1)R[e].c();l=space(),d=element("div"),p=element("div"),h=element("div"),f=element("div"),m=element("div"),y=element("div"),y.textContent="드론 연결 정보",g=space(),C=element("div"),b=element("button"),b.innerHTML='<i class="bi bi-x-square-fill" style="font-size:1.4em;"></i>',x=space(),w=element("div"),v=element("div"),A.c(),attr(a,"class","col d-flex"),attr(s,"class","btn-add-drone svelte-h6ib2g"),attr(o,"class","col g-0"),attr(n,"class","row g-0"),attr(r,"class","container g-0"),attr(t,"class","manage-drone-layer svelte-h6ib2g"),attr(u,"class","status-layer svelte-h6ib2g"),set_style(u,"gap","6px"),attr(y,"class","col-11 my-auto"),set_style(y,"font-size","1.2em"),set_style(y,"text-align","center"),set_style(b,"background-color","black"),set_style(b,"border","0"),attr(C,"class","col-1 d-flex align-items-center"),set_style(C,"text-align","center"),attr(m,"class","row"),set_style(m,"height","30px"),set_style(m,"background","rgba(0,0,0,0.5)"),set_style(m,"color","white"),attr(v,"class","col"),set_style(v,"padding","10px"),attr(w,"class","row"),set_style(w,"background","rgba(100,100,100,0.7)"),attr(f,"class","container"),attr(h,"class","modal-content"),set_style(h,"background","rgba(0,0,0,0)"),attr(p,"class","modal-dialog modal-dialog-centered"),attr(d,"class","modal fade"),attr(d,"id","droneConnectModal"),attr(d,"tabindex","-1"),attr(d,"aria-labelledby","droneConnectModalLabel"),attr(d,"aria-hidden","true")},m(S,E){insert(S,t,E),append(t,r),append(r,n),append(n,a);for(let e=0;e<M.length;e+=1)M[e]&&M[e].m(a,null);append(n,i),append(n,o),append(o,s),insert(S,c,E),insert(S,u,E);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m(u,null);insert(S,l,E),insert(S,d,E),append(d,p),append(p,h),append(h,f),append(f,m),append(m,y),append(m,g),append(m,C),append(C,b),append(f,x),append(f,w),append(w,v),A.m(v,null),_=!0,O||($=[listen(s,"click",e[3]),listen(b,"click",e[4])],O=!0)},p(e,[t]){if(2&t){let r;for(S=e[1],r=0;r<S.length;r+=1){const n=get_each_context_1(e,S,r);M[r]?(M[r].p(n,t),transition_in(M[r],1)):(M[r]=create_each_block_1(n),M[r].c(),transition_in(M[r],1),M[r].m(a,null))}for(group_outros(),r=S.length;r<M.length;r+=1)E(r);check_outros()}if(2&t){let r;for(k=e[1],r=0;r<k.length;r+=1){const n=get_each_context(e,k,r);R[r]?(R[r].p(n,t),transition_in(R[r],1)):(R[r]=create_each_block(n),R[r].c(),transition_in(R[r],1),R[r].m(u,null))}for(group_outros(),r=k.length;r<R.length;r+=1)T(r);check_outros()}D===(D=q(e))&&A?A.p(e,t):(A.d(1),A=D(e),A&&(A.c(),A.m(v,null)))},i(e){if(!_){for(let e=0;e<S.length;e+=1)transition_in(M[e]);for(let e=0;e<k.length;e+=1)transition_in(R[e]);_=!0}},o(e){M=M.filter(Boolean);for(let e=0;e<M.length;e+=1)transition_out(M[e]);R=R.filter(Boolean);for(let e=0;e<R.length;e+=1)transition_out(R[e]);_=!1},d(e){e&&detach(t),destroy_each(M,e),e&&detach(c),e&&detach(u),destroy_each(R,e),e&&detach(l),e&&detach(d),A.d(),O=!1,run_all($)}}}function instance$1(e,t,r){let n;component_subscribe(e,DRONEKIT_API,(e=>r(12,n=e)));let a=null,i=!1,o=null,s=[];function c(){o=null,r(0,i=!1),a.hide()}let u={connectType:"tcp",droneID:"drone#01",IPAddress:"192.168.0.65",port:"5760"};function l(e){s.includes(e)||(s.push(e),r(1,s))}return[i,s,u,function(){r(0,i=!1),o=null,a=new bootstrap.Modal(document.getElementById("droneConnectModal"),{keyboard:!1}),a.show()},c,async function(e){if(e.preventDefault(),r(0,i=!0),o=null,!(u.connectType&&u.IPAddress&&u.port&&u.droneID))return alert("연결방식, 드론ID, IP주소, 포트를 입력해주세요."),void r(0,i=!1);try{const e=await fetch(n+"connect_drone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connection_string:u.connectType+":"+u.IPAddress+":"+u.port,drone_id:u.droneID})});if(!e.ok)throw new o("Network response was not ok.");const t=await e.json();console.log(t),"Connected"===t.status&&(alert("드론이 연결되었습니다."),l(u.droneID),c()),"Already Connected"===t.status&&(alert("이미 연결되어 있습니다."),l(u.droneID),c()),"Failed"===t.status&&(o=t.details)}catch(e){console.error("Error:",e),o=e}finally{r(0,i=!1)}},function(){u.connectType=select_value(this),r(2,u)},function(){u.droneID=this.value,r(2,u)},function(){u.IPAddress=this.value,r(2,u)},function(){u.port=to_number(this.value),r(2,u)}]}class Manage_drone extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}function create_fragment(e){let t,r,n,a,i,o,s;return a=new Top({}),o=new Manage_drone({}),{c(){t=element("div"),r=element("div"),n=space(),create_component(a.$$.fragment),i=space(),create_component(o.$$.fragment),attr(r,"id","vmap"),set_style(r,"width","100%"),set_style(r,"height","100%"),attr(t,"class","fullscreen-layer svelte-1bn9o1o")},m(e,c){insert(e,t,c),append(t,r),append(t,n),mount_component(a,t,null),append(t,i),mount_component(o,t,null),s=!0},p:noop,i(e){s||(transition_in(a.$$.fragment,e),transition_in(o.$$.fragment,e),s=!0)},o(e){transition_out(a.$$.fragment,e),transition_out(o.$$.fragment,e),s=!1},d(e){e&&detach(t),destroy_component(a),destroy_component(o)}}}function instance($$self,$$props,$$invalidate){let $MAP_VIEWER;function vwmap(){let controlDensity="vw.DensityType.BASIC",interactionDensity="vw.DensityType.BASIC",mapOptions=new vw.MapOptions(vw.BasemapType.GRAPHIC,"",eval(controlDensity),eval(interactionDensity),!1,new vw.CameraPosition(new vw.CoordZ(126.621259,37.520995,1e3),new vw.Direction(-90,0,0)),new vw.CameraPosition(new vw.CoordZ(126.621259,37.520995,1e3),new vw.Direction(0,-90,0)));new vw.Map("vmap",mapOptions),set_store_value(MAP_VIEWER,$MAP_VIEWER=ws3d.viewer,$MAP_VIEWER)}return component_subscribe($$self,MAP_VIEWER,(e=>$$invalidate(1,$MAP_VIEWER=e))),onMount((async()=>{vwmap()})),[]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}const app=new App({target:document.body});return app}();
//# sourceMappingURL=bundle.js.map
